import{_ as ae,a as ne}from"./icon_delete-7a56ee05.js";import{W as le,r as W,d as O,J as T,L as oe,M as se,o as a,c as n,a as e,b as I,u as c,w as C,l as ce,Q as ie,F as m,j as _,e as E,bH as V,t as v,i as x,h as D,O as de,s as J,x as H,_ as q,g as re,n as Q,p as ue,k as f,aA as be}from"./index-6e9b82fa.js";import{_ as ve}from"./FormTitle.vue_vue_type_script_setup_true_lang-da6c3e06.js";/* empty css                                                               */import{u as me}from"./pagination-2ced949c.js";import{N as _e}from"./Breadcrumbs-ec0de9b4.js";import"./icon_note-96b9c260.js";const he="/group-insurance/images/icons/icon_consent.png",z=le("authorityManagement",()=>{const h=W("add"),R=W({roleNameInput:""}),w=W([{code:"20230116170505",roleName:"主任",actions:[[{value:"createWebPreview",actionID:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",actionID:"uploadFiles",label:"上傳文件",selected:!0},{value:"createWebCopyFiles",actionID:"createWebCopyFiles",label:"複製案件",selected:!0},{value:"createWebDeletion",actionID:"createWebDeletion",label:"刪除",selected:!0},{value:"createWebRegistering",actionID:"createWebRegistering",label:"套版",selected:!0},{value:"createWebEdit",actionID:"createWebEdit",label:"編輯",selected:!0},{value:"createWebNew",actionID:"createWebNew",label:"新增",selected:!0},{value:"createWebReview",actionID:"createWebReview",label:"審核",selected:!0},{value:"createWebSecondStageReview",actionID:"createWebSecondStageReview",label:"二階段審核",selected:!0},{value:"createWebRemovedContent",actionID:"createWebRemovedContent",label:"下架內容",selected:!0}],[{value:"reportQueryViewContent",actionID:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",actionID:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",actionID:"dataMaintenanceDeletion",label:"刪除",selected:!0},{value:"dataMaintenanceEdit",actionID:"dataMaintenanceEdit",label:"編輯",selected:!0},{value:"dataMaintenanceRemovedContent",actionID:"dataMaintenanceRemovedContent",label:"下架",selected:!0},{value:"dataMaintenanceReview",actionID:"dataMaintenanceReview",label:"審核",selected:!0}],[{value:"authorityManagementEdit",actionID:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",actionID:"authorityManagementDeletion",label:"刪除",selected:!0},{value:"authorityManagementNew",actionID:"authorityManagementNew",label:"新增",selected:!0}],[{value:"accountManagementEdit",actionID:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",actionID:"accountManagementDeletion",label:"刪除",selected:!0},{value:"accountManagementNew",actionID:"accountManagementNew",label:"新增",selected:!0}]]},{code:"20230230141620",roleName:"合作金庫",actions:[[{value:"createWebPreview",actionID:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",actionID:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",actionID:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",actionID:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",actionID:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",actionID:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",actionID:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",actionID:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",actionID:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",actionID:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",actionID:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",actionID:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",actionID:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",actionID:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",actionID:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",actionID:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",actionID:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",actionID:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",actionID:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",actionID:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",actionID:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",actionID:"accountManagementNew",label:"新增",selected:!1}]]},{code:"20230717190707",roleName:"合作金庫",actions:[[{value:"createWebPreview",actionID:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",actionID:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",actionID:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",actionID:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",actionID:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",actionID:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",actionID:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",actionID:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",actionID:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",actionID:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",actionID:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",actionID:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",actionID:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",actionID:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",actionID:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",actionID:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",actionID:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",actionID:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",actionID:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",actionID:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",actionID:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",actionID:"accountManagementNew",label:"新增",selected:!1}]]}]),u=W([{buttonName:"創建網站",index:0},{buttonName:"報表查詢",index:1},{buttonName:"資料維護",index:2},{buttonName:"權限管理",index:3},{buttonName:"帳號管理",index:4}]),F=W([[{value:"createWebPreview",actionID:"createWebPreview",label:"預覽",selected:!1},{value:"createWebUploadFiles",actionID:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",actionID:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",actionID:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",actionID:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",actionID:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",actionID:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",actionID:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",actionID:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",actionID:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",actionID:"reportQueryViewContent",label:"查看內容",selected:!1}],[{value:"dataMaintenanceViewContent",actionID:"dataMaintenanceViewContent",label:"查看內容",selected:!1},{value:"dataMaintenanceDeletion",actionID:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",actionID:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",actionID:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",actionID:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",actionID:"authorityManagementEdit",label:"編輯",selected:!1},{value:"authorityManagementDeletion",actionID:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",actionID:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",actionID:"accountManagementEdit",label:"編輯",selected:!1},{value:"accountManagementDeletion",actionID:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",actionID:"accountManagementNew",label:"新增",selected:!1}]]);return{initValues:R,authorityManagementDataList:w,navButton:u,checkBoxes:F,modeState:h}}),k=h=>(J("data-v-c011dbf0"),h=h(),H(),h),ge={class:"modal-mask"},pe={class:"content"},fe={class:"content-box pb-6 flex justify-center align-middle"},De={class:"show-modal"},Ie={class:"show-modal-body"},Me={class:"show-modal-input"},we=k(()=>e("label",{for:"roleNameInput"},"角色名稱",-1)),ye={class:"show-modal-table"},We=k(()=>e("label",{class:"show-modal-label",for:"roleNameInput"}," 管理權限 ",-1)),Ne={class:"show-table-container"},Ce={class:"table-container"},ke=k(()=>e("div",{class:"container-title"}," 創建網站 ",-1)),Re={class:"check-container"},Se=["id","onUpdate:modelValue"],$e=["for"],Ee=k(()=>e("div",{class:"container-title"}," 報表查詢 ",-1)),Ve={class:"check-container"},xe=["id","onUpdate:modelValue"],Pe=["for"],Fe=k(()=>e("div",{class:"container-title"}," 資料維護 ",-1)),Ue={class:"check-container"},Le=["id","onUpdate:modelValue"],Ae=["for"],Qe=k(()=>e("div",{class:"container-title"}," 權限管理 ",-1)),Te={class:"check-container"},je=["id","onUpdate:modelValue"],Oe=["for"],Je=k(()=>e("div",{class:"container-title"}," 帳號管理 ",-1)),He={class:"check-container"},qe=["id","onUpdate:modelValue"],ze=["for"],Ye={class:"show-modal-button"},Ge=O({__name:"AuthorityManagementForms",props:{currentNavButton:{type:Number,default:0}},emits:["close","on-submit"],setup(h,{emit:R}){const w=z(),{initValues:u,authorityManagementDataList:F,navButton:$,checkBoxes:g,modeState:U}=T(w);function y(){R("close")}function L(){R("on-submit")}const P=oe({account:se().required("請輸入角色名稱").test("roleNameInput","必須輸入內容",N=>/^.*/.test(N))});return(N,S)=>(a(),n("div",ge,[e("div",pe,[I(ve,{title:c(U)==="add"?"新增角色":"編輯角色",onClose:y},null,8,["title"]),e("div",fe,[e("div",De,[I(c(de),{"validation-schema":c(P),"initial-values":c(u)},{default:C(()=>[e("div",Ie,[e("div",Me,[we,I(c(ce),{id:"roleNameInput",name:"roleNameInput"},{default:C(({field:t,errorMessage:r})=>[I(ie,{modelValue:c(u).roleNameInput,"onUpdate:modelValue":S[0]||(S[0]=b=>c(u).roleNameInput=b),"v-bind":t,class:"modal-input",placeholder:"系統管理員","error-message":r},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",ye,[We,e("div",Ne,[e("div",Ce,[ke,e("div",Re,[(a(!0),n(m,null,_(c(g)[0],(t,r)=>(a(),n("div",{key:r,class:"check-box"},[E(e("input",{id:t.actionID,"onUpdate:modelValue":b=>t.selected=b,type:"checkbox"},null,8,Se),[[V,t.selected]]),e("label",{class:"check-label",for:t.actionID},v(t.label),9,$e)]))),128))]),Ee,e("div",Ve,[(a(!0),n(m,null,_(c(g)[1],(t,r)=>(a(),n("div",{key:r,class:"check-box"},[E(e("input",{id:t.actionID,"onUpdate:modelValue":b=>t.selected=b,type:"checkbox"},null,8,xe),[[V,t.selected]]),e("label",{class:"check-label",for:t.actionID},v(t.label),9,Pe)]))),128))]),Fe,e("div",Ue,[(a(!0),n(m,null,_(c(g)[2],(t,r)=>(a(),n("div",{key:r,class:"check-box"},[E(e("input",{id:t.actionID,"onUpdate:modelValue":b=>t.selected=b,type:"checkbox"},null,8,Le),[[V,t.selected]]),e("label",{class:"check-label",for:t.actionID},v(t.label),9,Ae)]))),128))]),Qe,e("div",Te,[(a(!0),n(m,null,_(c(g)[3],(t,r)=>(a(),n("div",{key:r,class:"check-box"},[E(e("input",{id:t.actionID,"onUpdate:modelValue":b=>t.selected=b,type:"checkbox"},null,8,je),[[V,t.selected]]),e("label",{class:"check-label",for:t.actionID},v(t.label),9,Oe)]))),128))]),Je,e("div",He,[(a(!0),n(m,null,_(c(g)[4],(t,r)=>(a(),n("div",{key:r,class:"check-box"},[E(e("input",{id:t.actionID,"onUpdate:modelValue":b=>t.selected=b,type:"checkbox"},null,8,qe),[[V,t.selected]]),e("label",{class:"check-label",for:t.actionID},v(t.label),9,ze)]))),128))])])])])]),e("div",Ye,[I(x,{outline:!0,onClick:y},{default:C(()=>[D(" 取消 ")]),_:1}),I(x,{type:"submit",onClick:L},{default:C(()=>[D(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])])]))}});const Ke=q(Ge,[["__scopeId","data-v-c011dbf0"]]),M=h=>(J("data-v-bfe62e89"),h=h(),H(),h),Xe={class:"create-view-container"},Ze={class:"breadcrumb"},Be={class:"box mx-auto w-full"},et=M(()=>e("h2",{class:"title-text"}," 權限管理 ",-1)),tt={class:"management-title"},at=M(()=>e("span",{class:"management-title-text"},[e("img",{src:he,alt:""}),D(" 權限列表 ")],-1)),nt=M(()=>e("span",null," ＋ ",-1)),lt={class:"table-container"},ot=be('<div class="table-header" data-v-bfe62e89><div class="table-header-title1" data-v-bfe62e89> 序號 </div><div class="table-header-title2" data-v-bfe62e89> 角色名稱 </div><div class="table-header-title3" data-v-bfe62e89> 角色名稱 </div><div class="table-header-title4" data-v-bfe62e89> 操作 </div></div>',1),st={class:"table-body-item1","data-title":"序　　號："},ct={class:"table-body-item2","data-title":"角色名稱："},it={class:"table-body-item3","data-title":"角色名稱："},dt={class:"table-body-direction"},rt={class:"table-body-item-text"},ut=M(()=>e("div",null,"創建網站-",-1)),bt={key:0},vt={key:0,class:"separate"},mt={class:"table-body-item-text"},_t=M(()=>e("div",null,"報價查詢-",-1)),ht={key:0},gt={class:"table-body-item-text"},pt=M(()=>e("div",null,"資料維護-",-1)),ft={key:0},Dt={key:0,class:"separate"},It={class:"table-body-item-text"},Mt=M(()=>e("div",null,"權限管理-",-1)),wt={key:0},yt={key:0,class:"separate"},Wt={class:"table-body-item-text"},Nt=M(()=>e("div",null,"帳號管理-",-1)),Ct={key:0},kt={key:0,class:"separate"},Rt={class:"table-body-item4"},St=M(()=>e("img",{src:ae,alt:""},null,-1)),$t=M(()=>e("img",{src:ne,alt:""},null,-1)),Et={class:"pagination"},Vt=["disabled"],xt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pt=["onClick"],Ft=["disabled"],Ut={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Lt=O({__name:"AuthorityManagementView",setup(h){const R=z(),{initValues:w,authorityManagementDataList:u,navButton:F,modeState:$,checkBoxes:g}=T(R),U=[{title:"首頁",path:"/back-home"},{title:"權限管理",path:"/back-authority-management"}],y=W(!1),L=W(0),P=W(0);function N(s,d){for(let l=d.length-1;l>s;l--)if(d[l].selected)return!1;return!0}const S=me(),{pageSet:t,totalPages:r}=T(S);function b(){const s=t.value.currentPage-1;t.value.currentPage=s,t.value.totalElements=u.value.length}function Y(){const s=t.value.currentPage+1;t.value.currentPage=s,t.value.totalElements=u.value.length}function G(s){s!==t.value.currentPage&&(t.value.currentPage=s,t.value.totalElements=u.value.length)}function j(s){const d=document.getElementById(s);if(d)return!!d.disabled}re(()=>{S.$reset()});function K(s){u.value.splice(s,1)}function X(){$.value="add",w.value.roleNameInput="";for(const s of g.value)for(const d of s)d.selected=!1;y.value=!0}function Z(s,d){$.value="edit",P.value=d;const l=JSON.parse(JSON.stringify(s));w.value.roleNameInput=l.roleName;const{actions:p}=l;p.forEach((o,i)=>{o.forEach((A,te)=>{g.value[i][te].selected=A.selected})}),y.value=!0}function B(){w.value.roleNameInput="";for(const s of g.value)for(const d of s)d.selected=!1;y.value=!1}const ee=async()=>{if($.value==="add"){const s=w.value.roleNameInput,d=g.value,p={code:(()=>{const o=new Date;return`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}${String(o.getDate()).padStart(2,"0")}${String(o.getHours()).padStart(2,"0")}${String(o.getMinutes()).padStart(2,"0")}${String(o.getSeconds()).padStart(2,"0")}`})(),roleName:s,actions:d};u.value.push(p),y.value=!1}else if($.value==="edit"){const s=u.value[P.value],d=w.value.roleNameInput,l=g.value.map((p,o)=>p.map((i,A)=>({...s.actions[o][A],selected:i.selected})));s.roleName=d,s.actions=l,y.value=!1}};return(s,d)=>(a(),n("div",Xe,[e("div",Ze,[I(_e,{breadcrumb:U})]),e("div",Be,[et,e("div",tt,[at,I(x,{onClick:X},{default:C(()=>[nt,D(" 新增角色 ")]),_:1})]),e("div",lt,[ot,(a(!0),n(m,null,_(c(u),(l,p)=>(a(),n("div",{key:p,class:"table-body"},[e("div",st,v(l.code),1),e("div",ct,v(l.roleName),1),e("div",it,[e("div",dt,[e("div",rt,[ut,(a(!0),n(m,null,_(l.actions[0],(o,i)=>(a(),n("span",{key:i},[o.selected?(a(),n("span",bt,[D(v(o.label),1),N(i,l.actions[0])?f("",!0):(a(),n("span",vt,","))])):f("",!0)]))),128))]),e("div",mt,[_t,(a(!0),n(m,null,_(l.actions[1],(o,i)=>(a(),n("span",{key:i},[o.selected?(a(),n("span",ht,v(o.label),1)):f("",!0)]))),128))]),e("div",gt,[pt,(a(!0),n(m,null,_(l.actions[2],(o,i)=>(a(),n("span",{key:i,class:"table-body-item-text"},[o.selected?(a(),n("span",ft,[D(v(o.label),1),N(i,l.actions[2])?f("",!0):(a(),n("span",Dt,","))])):f("",!0)]))),128))]),e("div",It,[Mt,(a(!0),n(m,null,_(l.actions[3],(o,i)=>(a(),n("span",{key:i,class:"table-body-item-text"},[o.selected?(a(),n("span",wt,[D(v(o.label),1),N(i,l.actions[3])?f("",!0):(a(),n("span",yt,","))])):f("",!0)]))),128))]),e("div",Wt,[Nt,(a(!0),n(m,null,_(l.actions[4],(o,i)=>(a(),n("span",{key:i,class:"table-body-item-text"},[o.selected?(a(),n("span",Ct,[D(v(o.label),1),N(i,l.actions[4])?f("",!0):(a(),n("span",kt,","))])):f("",!0)]))),128))])])]),e("div",Rt,[I(x,{class:"edit-button",onClick:o=>Z(l,p)},{default:C(()=>[St,D(" 編輯 ")]),_:2},1032,["onClick"]),I(x,{class:"delete-button",onClick:o=>K(p)},{default:C(()=>[$t,D(" 刪除 ")]),_:2},1032,["onClick"])])]))),128)),e("div",Et,[e("button",{disabled:c(t).currentPage===1,onClick:b},[(a(),n("svg",xt,[e("path",{class:Q({"disabled-btn":j("pre-btn")}),d:"M6.16602 1.33301L1.49935 5.99967L6.16602 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Vt),(a(!0),n(m,null,_(c(r),l=>(a(),n("button",{key:l,class:Q(l===c(t).currentPage?"chosenPageBtn":"unchosenPageBtn"),onClick:p=>G(l)},v(l),11,Pt))),128)),e("button",{disabled:c(t).currentPage===c(r),onClick:Y},[(a(),n("svg",Ut,[e("path",{class:Q({"disabled-btn":j("next-btn")}),d:"M1.5 1.33301L6.16667 5.99967L1.5 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Ft)])])]),y.value?(a(),ue(Ke,{key:0,"current-nav-button":L.value,onClose:B,onOnSubmit:ee},null,8,["current-nav-button"])):f("",!0)]))}});const qt=q(Lt,[["__scopeId","data-v-bfe62e89"]]);export{qt as default};
