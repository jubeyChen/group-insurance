import{_ as ae,a as le,b as se}from"./icon_delete-cb30b165.js";import{d as I,G as oe,y as E,r as w,g as Q,C as ne,D as J,k as U,o as h,p as K,w as u,a as e,n as C,u as c,L as ie,M as de,c as k,b as n,F as T,R,m as W,j as B,h as V,bT as ce,Q as ue,s as X,x as Y,_ as Z,J as re,l as H,i as me,at as ve,t as A}from"./index-01998dcb.js";import{_ as _e}from"./FormTitle.vue_vue_type_script_setup_true_lang-66c6e81a.js";import{t as pe,d as he,j as be,f as fe,K as ge,b as we,H as ye,T as ke,h as q,k as Se,o as xe,N as $e}from"./Select-95a47108.js";import{k as Ve,E as z}from"./radio-group-96bf05bb.js";import{u as Ce}from"./pagination-568d81d3.js";import{N as Pe}from"./Breadcrumbs-2ed7165c.js";/* empty css                                                               */let Ne=Symbol("GroupContext"),Me=I({name:"Switch",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${pe()}`}},inheritAttrs:!1,setup(a,{emit:f,attrs:m,slots:v,expose:P}){let t=oe(Ne,null),[r,x]=he(E(()=>a.modelValue),o=>f("update:modelValue",o),E(()=>a.defaultChecked));function N(){x(!r.value)}let M=w(null),l=t===null?M:t.switchRef,y=be(E(()=>({as:a.as,type:m.type})),l);P({el:l,$el:l});function d(o){o.preventDefault(),N()}function _(o){o.key===q.Space?(o.preventDefault(),N()):o.key===q.Enter&&Se(o.currentTarget)}function g(o){o.preventDefault()}let $=E(()=>{var o,b;return(b=(o=xe(l))==null?void 0:o.closest)==null?void 0:b.call(o,"form")});return Q(()=>{ne([$],()=>{if(!$.value||a.defaultChecked===void 0)return;function o(){x(a.defaultChecked)}return $.value.addEventListener("reset",o),()=>{var b;(b=$.value)==null||b.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{id:o,name:b,value:j,form:F,...O}=a,i={checked:r.value},p={id:o,ref:l,role:"switch",type:y.value,tabIndex:0,"aria-checked":r.value,"aria-labelledby":t==null?void 0:t.labelledby.value,"aria-describedby":t==null?void 0:t.describedby.value,onClick:d,onKeyup:_,onKeypress:g};return J(U,[b!=null&&r.value!=null?J(fe,ge({features:we.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:r.value,form:F,name:b,value:j})):null,ye({ourProps:p,theirProps:{...m,...ke(O,["modelValue","defaultChecked"])},slot:i,attrs:m,slots:v,name:"Switch"})])}}});const Le=I({__name:"Toggle",props:{value:{type:null}},setup(a){return(f,m)=>(h(),K(c(Me),{"model-value":a.value,as:"template","onUpdate:modelValue":m[0]||(m[0]=v=>f.$emit("update:modelValue",v))},{default:u(({checked:v})=>[e("button",{class:C([v?"bg-primary-500 on":"bg-gray-200 off","relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-1 focus:ring-primary-500 focus:ring-offset-2"])},[e("span",{"aria-hidden":"true",class:C([v?"translate-x-7":"translate-x-0","pointer-events-none inline-block h-5 w-5 self-center transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "])},null,2)],2)]),_:1},8,["model-value"]))}});const S=a=>(X("data-v-5ebd1b3e"),a=a(),Y(),a),Te={class:"modal-mask"},Ae={class:"content"},Be={class:"pb-6 flex justify-center align-middle"},De={class:"show-modal"},Ee={class:"show-modal-row"},Ie={class:"show-modal-input"},je=S(()=>e("label",{for:"code"},"員工編號",-1)),Fe={class:"show-modal-input"},Oe=S(()=>e("label",{for:"addNewPermissions"},"部門",-1)),Ge={class:"flex items-center mb-4"},Re=S(()=>e("span",{class:"radio-text"},"DB TEAM",-1)),Ue={class:"flex items-center"},Ke=S(()=>e("span",{class:"radio-text"},"AG TEAM",-1)),Je={class:"show-modal-row"},We={class:"show-modal-input"},He=S(()=>e("label",{for:"name"},"姓名",-1)),qe={class:"show-modal-input"},ze=S(()=>e("label",{for:"addNewPermissions"},"角色",-1)),Qe={class:"show-modal-row"},Xe={class:"show-modal-input"},Ye=S(()=>e("label",{for:"email"},"科主管Email",-1)),Ze={class:"show-modal-input"},et=S(()=>e("label",{for:"state"},"帳號狀態",-1)),tt={class:"show-modal-button"},at=I({__name:"AccountManagementForms",props:{initValues:{type:Object,default:()=>({})},options:{type:Array,default:()=>[]}},emits:["close","onSubmit","update:initValuesState"],setup(a,{emit:f}){const{initValues:m,options:v}=a,P=v;function t(l){f("update:initValuesState",l)}function r(l){console.log(l)}function x(){f("close")}function N(){f("onSubmit")}const M=ie({account:de().required("請輸入角色名稱").test("addNewPermissions","必須輸入內容",l=>/^.*/.test(l))});return(l,y)=>(h(),k("div",Te,[e("div",Ae,[n(_e,{title:"新增帳號",onClose:x}),e("div",Be,[e("div",De,[n(c(ue),{"validation-schema":c(M),"initial-values":a.initValues,onSubmit:ce(N,["prevent"])},{default:u(()=>[e("div",Ee,[e("div",Ie,[je,n(c(T),{id:"code",name:"code"},{default:u(({field:d,value:_,errorMessage:g})=>[n(R,{"v-bind":d,class:"modal-input",placeholder:"請輸入人員代碼","error-message":g,"model-value":a.initValues.code=_},null,8,["v-bind","error-message","model-value"])]),_:1})]),e("div",Fe,[Oe,n(c(T),{name:"addNewDepartment"},{default:u(()=>[n(c(Ve),{modelValue:a.initValues.department,"onUpdate:modelValue":y[0]||(y[0]=d=>a.initValues.department=d),class:"flex gap-5 pt-3 h-0"},{default:u(()=>[n(c(z),{value:"DBTeam",class:"w-fit"},{default:u(({checked:d})=>[e("div",Ge,[e("span",{class:C(["radio-circle text-[0px]",{"is-checked":d}])},null,2),Re])]),_:1}),n(c(z),{value:"AGTeam",class:"w-fit"},{default:u(({checked:d})=>[e("div",Ue,[e("span",{class:C(["radio-circle text-[0px]",{"is-checked":d}])},null,2),Ke])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),e("div",Je,[e("div",We,[He,n(c(T),{id:"name",name:"name"},{default:u(({field:d,value:_,errorMessage:g})=>[n(R,{"v-bind":d,class:"modal-input",placeholder:"請輸入姓名","error-message":g,"model-value":a.initValues.name=_},null,8,["v-bind","error-message","model-value"])]),_:1})]),e("div",qe,[ze,n(c(T),{id:"addNewPermissions",name:"addNewPermissions"},{default:u(({field:d,errorMessage:_})=>[(h(),K($e,W(d,{key:a.initValues.role.label,value:a.initValues.role.value,class:"modal-input",placeholder:"請選擇角色","model-value":a.initValues.role,options:c(P),"error-message":_,"onUpdate:modelValue":r}),null,16,["value","model-value","options","error-message"]))]),_:1})])]),e("div",Qe,[e("div",Xe,[Ye,n(c(T),{id:"email",name:"email"},{default:u(({field:d,errorMessage:_})=>[n(R,{"v-bind":d,class:"modal-input",placeholder:"請輸入email","error-message":_,"model-value":a.initValues.email},null,8,["v-bind","error-message","model-value"])]),_:1})]),e("div",Ze,[et,n(c(T),{id:"state",name:"state"},{default:u(({value:d,field:_,errorMessage:g})=>[n(Le,W({class:"modal-radio-button mt-3"},_,{"error-message":g,"model-value":d,"onUpdate:modelValue":t}),null,16,["error-message","model-value"])]),_:1})])]),e("div",tt,[n(B,{outline:!0,onClick:x},{default:u(()=>[V(" 取消 ")]),_:1}),n(B,{type:"submit"},{default:u(()=>[V(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values","onSubmit"])])])])]))}});const lt=Z(at,[["__scopeId","data-v-5ebd1b3e"]]);const D=a=>(X("data-v-83453a42"),a=a(),Y(),a),st={class:"create-view-container"},ot={class:"breadcrumb"},nt={class:"box mx-auto w-full"},it=D(()=>e("h2",{class:"title-text"}," 帳號管理 ",-1)),dt={class:"management-title"},ct=D(()=>e("span",{class:"management-title-text"},[e("img",{src:ae,alt:""}),V(" 帳號列表 ")],-1)),ut=D(()=>e("span",null," ＋ ",-1)),rt={class:"table-container"},mt=ve('<div class="table-header" data-v-83453a42><div class="table-header-title1" data-v-83453a42> 序號 </div><div class="table-header-title2" data-v-83453a42> 人員代碼 </div><div class="table-header-title3" data-v-83453a42> 姓名 </div><div class="table-header-title4" data-v-83453a42> 角色 </div><div class="table-header-title5" data-v-83453a42> 帳號狀態 </div><div class="table-header-title6" data-v-83453a42> 操作 </div></div>',1),vt={class:"table-body-item1","data-title":"序　　號："},_t={class:"table-body-item2","data-title":"人員代碼："},pt={class:"table-body-item3","data-title":"姓　　名："},ht={class:"table-body-direction"},bt={class:"table-body-item4","data-title":"角　　色："},ft={class:"table-body-direction"},gt={class:"table-body-item5","data-title":"帳號狀態："},wt={class:"table-body-direction w-full"},yt={class:"ms-12"},kt=["src"],St={class:"table-body-item6"},xt=D(()=>e("img",{src:le,alt:""},null,-1)),$t=D(()=>e("img",{src:se,alt:""},null,-1)),Vt={class:"pagination"},Ct=["disabled"],Pt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Nt=["onClick"],Mt=["disabled"],Lt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tt=I({__name:"AccountManagementView",setup(a){const f=[{title:"首頁",path:"/back-home"},{title:"帳號管理",path:"/back-account-management"}],m=w(!1),v=w("add"),P=w(0),t=w({no:"",code:"",department:"",name:"",role:{label:"",value:""},state:!1,email:""}),r=w([{no:"20230116170505",code:"W901111",department:"DBTeam",name:"玉南山",role:{label:"內勤人員",value:"1"},state:!0,email:"NSL@mail.com"},{no:"20230116170505",code:"W902222",department:"AGTeam",name:"玉北山",role:{label:"外勤人員",value:"2"},state:!1,email:"NSL2@mail.com"},{no:"20230116170505",code:"W904444",department:"AGTeam",name:"玉東山",role:{label:"經理",value:"4"},state:!1,email:"NSL5@mail.com"}]),x=w([{label:"內勤人員",value:"1"},{label:"外勤人員",value:"2"},{label:"專員",value:"3"},{label:"經理",value:"4"},{label:"科主管",value:"5"},{label:"處長",value:"6"}]);w();const N=w({label:"內勤人員",value:1}),M=Ce(),{pageSet:l,totalPages:y}=re(M);function d(){const i=l.value.currentPage-1;l.value.currentPage=i,l.value.totalElements=r.value.length}function _(){const i=l.value.currentPage+1;l.value.currentPage=i,l.value.totalElements=r.value.length}function g(i){i!==l.value.currentPage&&(l.value.currentPage=i,l.value.totalElements=r.value.length)}function $(i){const p=document.getElementById(i);if(p)return!!p.disabled}Q(()=>{M.$reset()});function o(i){r.value.splice(i,1)}function b(){v.value="add",t.value.code="",t.value.department="",t.value.name="",t.value.role={label:"",value:""},t.value.state=!1,t.value.email="",m.value=!0}function j(i,p){v.value="edit",P.value=p;const s=JSON.parse(JSON.stringify(i));t.value.code=s.code,t.value.department=s.department,t.value.name=s.name,t.value.state=s.state,t.value.email=s.email,t.value.role=s.role,m.value=!0}function F(){t.value.no="",t.value.code="",t.value.name="",t.value.role={label:"",value:""},t.value.state=!1,t.value.email="",m.value=!1}const O=async()=>{if(v.value==="add"){const i=t.value.code,p=t.value.department,s=t.value.name,L=t.value.role,G=t.value.state,ee=t.value.email,te={no:"20230116170505",code:i,department:p,name:s,role:L,state:G,email:ee};r.value.push(te),m.value=!1}else if(v.value==="edit"){const i=r.value[P.value];console.log(i);const p=t.value.code;i.code=p,m.value=!1}};return(i,p)=>(h(),k("div",st,[e("div",ot,[n(Pe,{breadcrumb:f})]),e("div",nt,[it,e("div",dt,[ct,n(B,{onClick:b},{default:u(()=>[ut,V(" 新增帳號 ")]),_:1})]),e("div",rt,[mt,(h(!0),k(U,null,H(r.value,(s,L)=>(h(),k("div",{key:L,class:"table-body"},[e("div",vt,A(s.no),1),e("div",_t,A(s.code),1),e("div",pt,[e("div",ht,A(s.name),1)]),e("div",bt,[e("div",ft,A(s.role.label),1)]),e("div",gt,[e("div",wt,[e("div",yt,[e("img",{src:s.state?"/images/icons/icon_check.png":"/images/icons/icon_alert_grey.png",class:"inline-block",alt:"State Image"},null,8,kt),V(" "+A(s.state?"啟用":"未啟用"),1)])])]),e("div",St,[n(B,{class:"edit-button",onClick:G=>j(s,L)},{default:u(()=>[xt,V(" 編輯 ")]),_:2},1032,["onClick"]),n(B,{class:"delete-button",onClick:G=>o(L)},{default:u(()=>[$t,V(" 刪除 ")]),_:2},1032,["onClick"])])]))),128)),e("div",Vt,[e("button",{disabled:c(l).currentPage===1,onClick:d},[(h(),k("svg",Pt,[e("path",{class:C({"disabled-btn":$("pre-btn")}),d:"M6.16602 1.33301L1.49935 5.99967L6.16602 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Ct),(h(!0),k(U,null,H(c(y),s=>(h(),k("button",{key:s,class:C(s===c(l).currentPage?"chosenPageBtn":"unchosenPageBtn"),onClick:L=>g(s)},A(s),11,Nt))),128)),e("button",{disabled:c(l).currentPage===c(y),onClick:_},[(h(),k("svg",Lt,[e("path",{class:C({"disabled-btn":$("next-btn")}),d:"M1.5 1.33301L6.16667 5.99967L1.5 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Mt)])])]),m.value?(h(),K(lt,{key:0,class:"nsl-form","init-values":t.value,options:x.value,"selected-value":N.value,onClose:F,onOnSubmit:O,"onUpdate:initValuesState":p[0]||(p[0]=s=>t.value.state=s)},null,8,["init-values","options","selected-value"])):me("",!0)]))}});const Gt=Z(Tt,[["__scopeId","data-v-83453a42"]]);export{Gt as default};
