import{a0 as yc,r as ke,d as Qt,J as pn,o as te,c as fe,a as m,b as x,w as T,Q as le,m as _,u as y,l as J,n as de,k as Se,F as rn,p as Kt,T as Ds,a7 as ti,j as Po,t as qe,i as Ne,h as we,_ as io,a8 as bc,a9 as xc,E as Sc,H as ka,aa as Cc,D as Si,ab as Ec,ac as Ac,g as Is,ad as il,y as Tt,L as Ns,O as Ps,s as ni,x as ri,C as Oc,e as Eo,v as Ao,ae as Tc,af as Mc,a1 as wc,a2 as Ci,ag as kc,U as Dc}from"./index-ee8c1cae.js";import{_ as Ei}from"./icon_right-arrow-052f859b.js";import{r as Ic,P as Dt}from"./vue.runtime.esm-bundler-4759f893.js";import{N as Da}from"./Select-d76b03a0.js";import{N as ue}from"./Checkbox-52823328.js";import{_ as Pt,a as Ia}from"./InputDate.vue_vue_type_style_index_0_lang-c53f4462.js";import{k as Gt,E as Oe}from"./radio-group-a9645075.js";import{_ as Rs}from"./FormTitle.vue_vue_type_script_setup_true_lang-c2ef5d19.js";import{h as Ro,_ as Na}from"./moment-80943d60.js";import{N as Nc}from"./Breadcrumbs-7d021867.js";/* empty css                                                               */import"./icon_note-96b9c260.js";const Pc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAhCAYAAACm75niAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANXSURBVHgBzVhLUttAEG2J8ClWzg3ECWIv+K0iTgA3iDkB5ATIJwg+AfYNwgmiLCgoWJicILpBvKL4FDjvyT0wloWRrLHhVY3VlqzRm1b36x57UgK9Xq92d3fX9H3/C77WMQKMml7uYySDwSDxPO/08fEx3t7eTmRG8Ir86OrqKgShI5ihlADu+YlFttfX12NxjInEz8/Pg4WFhRN5IUyvXj89PaUeXV1dTRqNBs+lb+P29rYOb3N8xdizpurg9y2Xb+BV4peXlwc4RDIMhT68115aWjo2RN8CFw1vN7GAbzIMqT4W3Nra2joWB8gljtA4AtFIv7YXFxejooSz0AVEugDBMULotKQixojbpOGh7648dHFxcYgF/Egf6oD8CHEND0N0f2NjoyMOAe83NWcqO8WzJmUi9mDWXHo6C8vzfSRsY9qE9Y0B0pQ7JmJnVqQJnbvNZxnvT4OUOHUahyZGQtmSGYPJLkNpDfGmQ5kCxuOMbRaM7iyrnQEVivJKW990afiMbUySFgvEdkfmBNYEUa+zeElJeFCSJo4nrIaIvz2ZI/DsXzLeRqTVGaM7qd/xoam7ascyZ4BYN+c0vR9inCCM/rKu5N3r4UIPoVLHJDtYXSzvjLOzszrkkmPX6ncS5ZeY3zFU/uFYQ6Z/nraszwpaWxhOgWTIU1XSxPhopAmShEMbMoz5dBEmkX354KBDQX4HZoIR3N/fH/L8TELFesWSjc0Kc4Y6JxeyRlVJeOHm5iYQB8jEZWrznFSECgfHcPsI/f7DC3hAKBWRIW3gjLwln6EPKWTgC+VHKiCrANYl2q7Ix/zgZt1fXl7uSIXSS+TJlrmmdiIOyFu5Evja8Jzym8nYqqTtZKTtkrxBKoemuUKiHpSZ9C3SBq7IQwHravZ9nThmSyvD5r5Qm1mUtGPyhvj1cwGC1yM1m0Wa+zKkDfLISwlYDWHXtyeF11tKqmhzn5QtMBnyhWHvG9jujuzyqSoPDw/cMAdVN8yIxwGP+Keg0N98k2DzonM3NzejkV6FCoPV7NOGVh65yP6qUNLPYUnSPD/WZGlpNbvwUjHoGtzEq6eZlCP1Ibc71F14Iu8IjelXBeBT3k3aJa5JNcQy2rOUwsrKSh/epkz/5sYauTLSuf4Hpuog8hGW51UAAAAASUVORK5CYII=",$s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADoSURBVHgB7VLBkcIwDJTk5J8SaIEKLtcBHZxn4ru5381VAvwYyATTAR1ACZRgOvAfx0LJ8BQPPjwY9iPPalZrrQ3wxqNAjWyanxlg3gJi7C+Xqfc+Nu77IK2aAf+7dr3QdKR78Jf4VMAwMcbU1v5OhkGjO/If3IE6TARLZgwy9Nj35cn7VQDOwkFExh08A2pm1tqKqLDSjl238SPnXC1r1DklidAHTVdopDHlXGzscHbOhZTSyQAexl5Rfkj51HRqZox8Vuh4qxXcgXozWWVBVAYiDm3bHgdOXnRKlGY5F3t4Bt6f9pVwBVRAeJdnfmuiAAAAAElFTkSuQmCC",mn=yc("createPage",()=>{const r=ke({serialNumber:"idNum",checkNum:"",policyCount:"single",customerNum:"",policyNum:"",company:"",anniversaryDate:"",brandCode:"",noChangeFillIn:!1,mailOption:"hr",mailOther:"",newStaffApplyPeriod:"",staffSpouseNewlyMarried:"",staffNewbornKids:"",newStaffEffectiveDate:"applyDay",newStaffSpecifiedDate:"",dayOfNextMonth:"",specifiedDate:"",coveragePeriod:"specifiedPeriod",coverageSpecifiedPeriodStart:"",coverageSpecifiedPeriodEnd:"",coverageLimitedStartDateNotEndDate:"",coveragePeriodEffectiveDate:"applyDay",coveragePeriodSpecifiedDate:"",terminationPeriodEffectiveDate:"applyDay",terminationPeriodSpecifiedDate:"",identityAndAge:{employee:{checked:!0},spouse:{checked:!1},children:{checked:!1},employeeParents:{checked:!1},spouseParents:{checked:!1}},employeeAgeStart:"",employeeAgeMiddle:"",employeeAgeEnd:"",spouseAgeStart:"",spouseAgeMiddle:"",spouseAgeEnd:"",childrenAgeStart:"",childrenAgeMiddle:"",childrenAgeEnd:"",employeeParentsAgeStart:"",employeeParentsAgeMiddle:"",employeeParentsAgeEnd:"",spouseParentsAgeStart:"",spouseParentsAgeMiddle:"",spouseParentsAgeEnd:"",neededCol:{employeeName:!0,employeeIdentity:!1,employeeBirthday:!1,employeeGender:!1,employeeCompany:!1,employeeNumber:!1,employeeOnBoardDate:!1,employeePhone:!1,employeeExtension:!1,employeeAddress:!1,employeeDepartment:!1,employeeFactory:!1,employeeJob:!1,employeeCitizenship:!1,employeeEmail:!1,identityName:!0,identityNumber:!0,identityBirthday:!0,identityGender:!0,identityAddress:!0,identityJob:!0,identityPhone:!0,identityCitizenship:!0,identityMarriedDate:!1},payment:"salary",selfPay:{creditCard:!1,atm:!1},uploadDate:"",removedDate:"",healthInfoEmployee:"unlimited",healthInfoSpouse:"unlimited",healthInfoEmployeePlan:{life:!1,medical:!1,group:!1,internet:!1},healthInfoSpousePlan:{life:!1,medical:!1,group:!1,internet:!1},healthInfoEmployeeAgeStart:"",healthInfoEmployeeAgeEnd:"",healthInfoSpouseAgeStart:"",healthInfoSpouseAgeEnd:"",selectedRules:[],addRuleStart:"",addRuleEnd:"",editRuleStart:"",editRuleEnd:"",addRuleName:"",editRuleName:"",note:"",selectedQA:[],selectedAd:[],planMaking:[]}),e=ke([{label:"南山1",value:1},{label:"南山2",value:2},{label:"南山3",value:3}]),t=ke([{label:"帳密設定",to:"account-setting"},{label:"上傳資料",to:"uploading"},{label:"基本資料",to:"basic-info"},{label:"繳費方式",to:"payment"},{label:"上架時間",to:"upload-time"},{label:"計畫別",to:"plan-making"},{label:"健康告知",to:"health-info"},{label:"投保規則",to:"rules"},{label:"備註",to:"note"},{label:"Ｑ＆Ａ",to:"Q-A"},{label:"Banner",to:"banner"},{label:"廣告",to:"A-D"}]);function n(d,c){r.value[c]=d}const o=ke([{order:1,id:"rule1",name:"規則一",startDate:"2023/10/11",endDate:"2023/11/30",content:"規則一內容內容內容",expand:!1},{order:2,id:"rule2",name:"規則二",startDate:"2023/10/12",endDate:"2023/12/30",content:"規則二內容內容內容",expand:!1},{order:3,id:"rule3",name:"規則三",startDate:"2023/10/13",endDate:"2023/12/31",content:"規則三內容內容內容",expand:!1},{order:4,id:"rule4",name:"規則四",startDate:"2023/11/01",endDate:"2023/11/20",content:"規則四內容內容內容",expand:!1},{order:5,id:"rule5",name:"規則五",startDate:"2023/11/02",endDate:"2023/11/30",content:"規則五內容內容內容",expand:!1},{order:6,id:"rule6",name:"規則六",startDate:"2023/11/03",endDate:"2023/11/30",content:"規則六內容內容內容",expand:!1},{order:7,id:"rule7",name:"規則七",startDate:"2023/11/04",endDate:"2023/11/30",content:"規則七內容內容內容",expand:!1},{order:8,id:"rule8",name:"規則八",startDate:"2023/11/05",endDate:"2023/11/30",content:"規則八內容內容內容",expand:!1},{order:9,id:"rule9",name:"規則九",startDate:"2023/11/06",endDate:"2023/11/30",content:"規則九內容內容內容",expand:!1},{order:10,id:"rule10",name:"規則十",startDate:"2023/11/11",endDate:"2023/11/30",content:"規則十內容內容內容",expand:!1}]),i=ke(JSON.parse(JSON.stringify(o.value))),s=ke([{order:1,id:"qa1",name:"如何聯絡專員",startDate:"2023/10/01",endDate:"2023/11/30",content:"打給他",expand:!1},{order:2,id:"qa2",name:"保險事故發生後該怎麼？到那裡申請理賠？",startDate:"2023/10/11",endDate:"2023/11/30",content:"請撥打0800-005-678，本公司客服專員將引導您完成出險程序，並立即指派理賠人員協助您處理車禍事故。",expand:!1},{order:3,id:"qa3",name:"理賠電話？",startDate:"2023/10/11",endDate:"2023/11/30",content:"請撥打0800-005-678",expand:!1}]),l=ke([{order:1,id:"ad1",name:"廣告1",startDate:"2023/10/01",endDate:"2023/11/30",textSmall:"你可以",textBig:"計畫保障讚讚讚",bigPic:"/images/img/plans/plan1.jpg",smallPic:"/images/icons/plan1-icon.png",url:"google.com",expand:!1},{order:2,id:"ad2",name:"廣告2",startDate:"2023/10/03",endDate:"2023/11/11",textSmall:"你可以",textBig:"計畫保障Very Good",bigPic:"/images/img/plans/plan2.jpg",smallPic:"/images/icons/plan2-icon.png",url:"google.com",expand:!1},{order:3,id:"ad3",name:"廣告3",startDate:"2023/10/10",endDate:"2023/12/01",textSmall:"你可以",textBig:"計畫保障一定是大拇指的啦",bigPic:"/images/img/plans/plan3.jpg",smallPic:"/images/icons/plan3-icon.png",url:"google.com",expand:!1}]),a=ke([{label:"壽險",value:"1"},{label:"醫療險",value:"2"},{label:"癌症險",value:"3"},{label:"意外險",value:"4"}]);return{createInfo:r,branchCodeOption:e,sideBarList:t,rules:o,ruleCopy:i,QAs:s,ADs:l,planSubjects:a,handleDateSelection:n}}),Rc={class:"mb-4"},$c=m("label",{class:"form-label lable-text"},"新進員工申請期間",-1),Bc={class:"w-[165px] flex items-center"},Lc=m("span",{class:"ml-2"},"天",-1),Fc={class:"mb-4"},Vc=m("label",{class:"form-label lable-text"},"員工新婚配偶",-1),zc={class:"w-[165px] flex items-center"},jc=m("span",{class:"ml-2"},"天",-1),Uc={class:"mb-4"},Hc=m("label",{class:"form-label lable-text"},"員工新婚配偶",-1),Kc={class:"w-[165px] flex items-center"},Wc=m("span",{class:"ml-2"},"天",-1),Gc={class:"mb-4"},Jc=m("label",{class:"form-label lable-text mb-3"},"新進人員/眷屬申請期間生效日",-1),Yc={class:"flex items-center mb-4"},Xc=m("span",{class:"radio-text"},"申請日",-1),Qc={class:"flex items-center mb-4"},Zc=m("span",{class:"radio-text"},"申請日翌日零時",-1),_c={class:"flex items-center mb-4"},qc=m("span",{class:"radio-text"},"次月某日",-1),eu={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},tu=m("span",{class:"ml-2"},"日",-1),nu={class:"flex items-center mb-4"},ru=m("span",{class:"radio-text"},"出生日",-1),ou={class:"flex items-center mb-4"},iu=m("span",{class:"radio-text"},"指定日期",-1),su={key:1,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},lu=Qt({__name:"NewStaffApplySetting",setup(r){const e=mn(),{createInfo:t}=pn(e);return(n,o)=>(te(),fe(rn,null,[m("div",Rc,[$c,m("div",Bc,[x(y(J),{name:"newStaffApplyPeriod"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入加保天數","model-value":y(t).newStaffApplyPeriod=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),Lc])]),m("div",Fc,[Vc,m("div",zc,[x(y(J),{name:"staffSpouseNewlyMarried"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入加保天數","model-value":y(t).staffSpouseNewlyMarried=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),jc])]),m("div",Uc,[Hc,m("div",Kc,[x(y(J),{name:"staffNewbornKids"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入加保天數","model-value":y(t).staffNewbornKids=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),Wc])]),m("div",Gc,[Jc,x(y(J),{name:"newStaffEffectiveDate"},{default:T(()=>[x(y(Gt),{modelValue:y(t).newStaffEffectiveDate,"onUpdate:modelValue":o[1]||(o[1]=i=>y(t).newStaffEffectiveDate=i)},{default:T(()=>[x(y(Oe),{value:"applyDay",class:"w-fit"},{default:T(({checked:i})=>[m("div",Yc,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Xc])]),_:1}),x(y(Oe),{value:"applyDayMidnight",class:"w-fit"},{default:T(({checked:i})=>[m("div",Qc,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Zc])]),_:1}),x(y(Oe),{value:"dayOfNextMonth",class:"w-fit"},{default:T(({checked:i})=>[m("div",_c,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),qc])]),_:1}),y(t).newStaffEffectiveDate==="dayOfNextMonth"?(te(),fe("div",eu,[x(y(J),{name:"dayOfNextMonth"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"次月某日","model-value":y(t).dayOfNextMonth=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),tu])):Se("",!0),x(y(Oe),{value:"dayOfBirth",class:"w-fit"},{default:T(({checked:i})=>[m("div",nu,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),ru])]),_:1}),x(y(Oe),{value:"specifiedDate",class:"w-fit"},{default:T(({checked:i})=>[m("div",ou,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),iu])]),_:1}),y(t).newStaffEffectiveDate==="specifiedDate"?(te(),fe("div",su,[x(y(J),{name:"newStaffSpecifiedDate"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[0]||(o[0]=l=>y(e).handleDateSelection(l,"newStaffSpecifiedDate"))}),null,16,["error-message"])]),_:1})])):Se("",!0)]),_:1},8,["modelValue"])]),_:1})])],64))}}),au={class:"mb-6"},du=m("p",{class:"font-medium mb-3"}," 員工基本資料 ",-1),cu={class:"grid grid-cols-5 gap-4"},uu={class:"flex items-center"},fu=m("label",{for:"employeeName",class:"text-neutral-800 cursor-pointer"},"員工姓名",-1),hu={class:"flex items-center"},pu=m("label",{for:"employeeIdentity",class:"text-neutral-800 cursor-pointer"},"身分證統一編號",-1),mu={class:"flex items-center"},gu=m("label",{for:"employeeBirthday",class:"text-neutral-800 cursor-pointer"},"出生年月日",-1),vu={class:"flex items-center"},yu=m("label",{for:"employeeGender",class:"text-neutral-800 cursor-pointer"},"性別",-1),bu={class:"flex items-center"},xu=m("label",{for:"employeeCompany",class:"text-neutral-800 cursor-pointer"},"公司名稱",-1),Su={class:"flex items-center"},Cu=m("label",{for:"employeeNumber",class:"text-neutral-800 cursor-pointer"},"員工編號",-1),Eu={class:"flex items-center"},Au=m("label",{for:"employeeOnBoardDate",class:"text-neutral-800 cursor-pointer"},"到職日",-1),Ou={class:"flex items-center"},Tu=m("label",{for:"employeePhone",class:"text-neutral-800 cursor-pointer"},"聯絡電話",-1),Mu={class:"flex items-center"},wu=m("label",{for:"employeeExtension",class:"text-neutral-800 cursor-pointer"},"分機",-1),ku={class:"flex items-center"},Du=m("label",{for:"employeeAddress",class:"text-neutral-800 cursor-pointer"},"地址",-1),Iu={class:"flex items-center"},Nu=m("label",{for:"employeeDepartment",class:"text-neutral-800 cursor-pointer"},"部門名稱",-1),Pu={class:"flex items-center"},Ru=m("label",{for:"employeeFactory",class:"text-neutral-800 cursor-pointer"},"廠別",-1),$u={class:"flex items-center"},Bu=m("label",{for:"employeeJob",class:"text-neutral-800 cursor-pointer"},"職業類別",-1),Lu={class:"flex items-center"},Fu=m("label",{for:"employeeCitizenship",class:"text-neutral-800 cursor-pointer"},"國籍",-1),Vu={class:"flex items-center"},zu=m("label",{for:"employeeEmail",class:"text-neutral-800 cursor-pointer"},"Email",-1),ju=m("p",{class:"font-medium mb-3"}," 身份別基本資料 ",-1),Uu={class:"grid grid-cols-5 gap-4"},Hu={class:"flex items-center"},Ku=m("label",{for:"identityName",class:"text-neutral-800 cursor-pointer"},"姓名",-1),Wu={class:"flex items-center"},Gu=m("label",{for:"identityNumber",class:"text-neutral-800 cursor-pointer"},"身分證統一編號",-1),Ju={class:"flex items-center"},Yu=m("label",{for:"identityBirthday",class:"text-neutral-800 cursor-pointer"},"出生年月日",-1),Xu={class:"flex items-center"},Qu=m("label",{for:"identityGender",class:"text-neutral-800 cursor-pointer"},"性別",-1),Zu={class:"flex items-center"},_u=m("label",{for:"identityAddress",class:"text-neutral-800 cursor-pointer"},"地址(預設同員工)",-1),qu={class:"flex items-center"},ef=m("label",{for:"identityJob",class:"text-neutral-800 cursor-pointer"},"職業類別",-1),tf={class:"flex items-center"},nf=m("label",{for:"identityPhone",class:"text-neutral-800 cursor-pointer"},"手機",-1),rf={class:"flex items-center"},of=m("label",{for:"identityCitizenship",class:"text-neutral-800 cursor-pointer"},"國籍",-1),sf={class:"flex items-center"},lf=m("label",{for:"identityMarriedDate",class:"text-neutral-800 cursor-pointer"},"配偶結婚日",-1),af=Qt({__name:"EmployeeInfoCheckGroup",setup(r){const e=mn(),{createInfo:t}=pn(e);return(n,o)=>(te(),fe(rn,null,[m("div",au,[du,m("div",cu,[m("div",uu,[x(ue,{id:"employeeName",name:"neededCol","model-value":y(t).neededCol.employeeName,"is-checked":y(t).neededCol.employeeName,onChange:o[0]||(o[0]=i=>y(t).neededCol.employeeName=!y(t).neededCol.employeeName)},null,8,["model-value","is-checked"]),fu]),m("div",hu,[x(ue,{id:"employeeIdentity",name:"neededCol","model-value":y(t).neededCol.employeeIdentity,onChange:o[1]||(o[1]=i=>y(t).neededCol.employeeIdentity=!y(t).neededCol.employeeIdentity)},null,8,["model-value"]),pu]),m("div",mu,[x(ue,{id:"employeeBirthday",name:"neededCol","model-value":y(t).neededCol.employeeBirthday,onChange:o[2]||(o[2]=i=>y(t).neededCol.employeeBirthday=!y(t).neededCol.employeeBirthday)},null,8,["model-value"]),gu]),m("div",vu,[x(ue,{id:"employeeGender",name:"neededCol","model-value":y(t).neededCol.employeeGender,onChange:o[3]||(o[3]=i=>y(t).neededCol.employeeGender=!y(t).neededCol.employeeGender)},null,8,["model-value"]),yu]),m("div",bu,[x(ue,{id:"employeeCompany",name:"neededCol","model-value":y(t).neededCol.employeeCompany,onChange:o[4]||(o[4]=i=>y(t).neededCol.employeeCompany=!y(t).neededCol.employeeCompany)},null,8,["model-value"]),xu]),m("div",Su,[x(ue,{id:"employeeNumber",name:"neededCol","model-value":y(t).neededCol.employeeNumber,onChange:o[5]||(o[5]=i=>y(t).neededCol.employeeNumber=!y(t).neededCol.employeeNumber)},null,8,["model-value"]),Cu]),m("div",Eu,[x(ue,{id:"employeeOnBoardDate",name:"neededCol","model-value":y(t).neededCol.employeeOnBoardDate,onChange:o[6]||(o[6]=i=>y(t).neededCol.employeeOnBoardDate=!y(t).neededCol.employeeOnBoardDate)},null,8,["model-value"]),Au]),m("div",Ou,[x(ue,{id:"employeePhone",name:"neededCol","model-value":y(t).neededCol.employeePhone,onChange:o[7]||(o[7]=i=>y(t).neededCol.employeePhone=!y(t).neededCol.employeePhone)},null,8,["model-value"]),Tu]),m("div",Mu,[x(ue,{id:"employeeExtension",name:"neededCol","model-value":y(t).neededCol.employeeExtension,onChange:o[8]||(o[8]=i=>y(t).neededCol.employeeExtension=!y(t).neededCol.employeeExtension)},null,8,["model-value"]),wu]),m("div",ku,[x(ue,{id:"employeeAddress",name:"neededCol","model-value":y(t).neededCol.employeeAddress,onChange:o[9]||(o[9]=i=>y(t).neededCol.employeeAddress=!y(t).neededCol.employeeAddress)},null,8,["model-value"]),Du]),m("div",Iu,[x(ue,{id:"employeeDepartment",name:"neededCol","model-value":y(t).neededCol.employeeDepartment,onChange:o[10]||(o[10]=i=>y(t).neededCol.employeeDepartment=!y(t).neededCol.employeeDepartment)},null,8,["model-value"]),Nu]),m("div",Pu,[x(ue,{id:"employeeFactory",name:"neededCol","model-value":y(t).neededCol.employeeFactory,onChange:o[11]||(o[11]=i=>y(t).neededCol.employeeFactory=!y(t).neededCol.employeeFactory)},null,8,["model-value"]),Ru]),m("div",$u,[x(ue,{id:"employeeJob",name:"neededCol","model-value":y(t).neededCol.employeeJob,onChange:o[12]||(o[12]=i=>y(t).neededCol.employeeJob=!y(t).neededCol.employeeJob)},null,8,["model-value"]),Bu]),m("div",Lu,[x(ue,{id:"employeeCitizenship",name:"neededCol","model-value":y(t).neededCol.employeeCitizenship,onChange:o[13]||(o[13]=i=>y(t).neededCol.employeeCitizenship=!y(t).neededCol.employeeCitizenship)},null,8,["model-value"]),Fu]),m("div",Vu,[x(ue,{id:"employeeEmail",name:"neededCol","model-value":y(t).neededCol.employeeEmail,onChange:o[14]||(o[14]=i=>y(t).neededCol.employeeEmail=!y(t).neededCol.employeeEmail)},null,8,["model-value"]),zu])])]),m("div",null,[ju,m("div",Uu,[m("div",Hu,[x(ue,{id:"identityName",name:"neededCol","is-checked":y(t).neededCol.identityName,"model-value":y(t).neededCol.identityName,onChange:o[15]||(o[15]=i=>y(t).neededCol.identityName=!y(t).neededCol.identityName)},null,8,["is-checked","model-value"]),Ku]),m("div",Wu,[x(ue,{id:"identityNumber",name:"neededCol","model-value":y(t).neededCol.identityNumber,onChange:o[16]||(o[16]=i=>y(t).neededCol.identityNumber=!y(t).neededCol.identityNumber)},null,8,["model-value"]),Gu]),m("div",Ju,[x(ue,{id:"identityBirthday",name:"neededCol","model-value":y(t).neededCol.identityBirthday,onChange:o[17]||(o[17]=i=>y(t).neededCol.identityBirthday=!y(t).neededCol.identityBirthday)},null,8,["model-value"]),Yu]),m("div",Xu,[x(ue,{id:"identityGender",name:"neededCol","model-value":y(t).neededCol.identityGender,onChange:o[18]||(o[18]=i=>y(t).neededCol.identityGender=!y(t).neededCol.identityGender)},null,8,["model-value"]),Qu]),m("div",Zu,[x(ue,{id:"identityAddress",name:"neededCol","model-value":y(t).neededCol.identityAddress,onChange:o[19]||(o[19]=i=>y(t).neededCol.identityAddress=!y(t).neededCol.identityAddress)},null,8,["model-value"]),_u]),m("div",qu,[x(ue,{id:"identityJob",name:"neededCol","model-value":y(t).neededCol.identityJob,onChange:o[20]||(o[20]=i=>y(t).neededCol.identityJob=!y(t).neededCol.identityJob)},null,8,["model-value"]),ef]),m("div",tf,[x(ue,{id:"identityPhone",name:"neededCol","model-value":y(t).neededCol.identityPhone,onChange:o[21]||(o[21]=i=>y(t).neededCol.identityPhone=!y(t).neededCol.identityPhone)},null,8,["model-value"]),nf]),m("div",rf,[x(ue,{id:"identityCitizenship",name:"neededCol","model-value":y(t).neededCol.identityCitizenship,onChange:o[22]||(o[22]=i=>y(t).neededCol.identityCitizenship=!y(t).neededCol.identityCitizenship)},null,8,["model-value"]),of]),m("div",sf,[x(ue,{id:"identityMarriedDate",name:"neededCol","model-value":y(t).neededCol.identityMarriedDate,onChange:o[23]||(o[23]=i=>y(t).neededCol.identityMarriedDate=!y(t).neededCol.identityMarriedDate)},null,8,["model-value"]),lf])])])],64))}}),df={class:"mb-4"},cf=m("label",{class:"form-label lable-text mb-3"},"設定加保期間",-1),uf={class:"flex items-center mb-4"},ff=m("span",{class:"radio-text"},"限定日期",-1),hf={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[400px] -mt-2 mb-4 flex items-center"},pf=m("span",{class:"mx-2"},"-",-1),mf={class:"flex items-center mb-4"},gf=m("span",{class:"radio-text"},"無限定加保但限定一次加保後不可再退保",-1),vf={class:"flex items-center mb-4"},yf=m("span",{class:"radio-text"},"限定加保日期，不限定退保日",-1),bf={key:1,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},xf={class:"flex items-center mb-4"},Sf=m("span",{class:"radio-text"},"無限定",-1),Cf={class:"mb-4"},Ef=m("label",{class:"form-label lable-text mb-3"},"設定加保期間生效日",-1),Af={class:"flex items-center mb-4"},Of=m("span",{class:"radio-text"},"申請日",-1),Tf={class:"flex items-center mb-4"},Mf=m("span",{class:"radio-text"},"申請日翌日零時",-1),wf={class:"flex items-center mb-4"},kf=m("span",{class:"radio-text"},"次月某日",-1),Df={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},If=m("span",{class:"ml-2"},"日",-1),Nf={class:"flex items-center mb-4"},Pf=m("span",{class:"radio-text"},"指定日期",-1),Rf={key:1,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},$f={class:"mb-4"},Bf=m("label",{class:"form-label lable-text mb-3"},"設定退保期間生效日",-1),Lf={class:"flex items-center mb-4"},Ff=m("span",{class:"radio-text"},"申請日",-1),Vf={class:"flex items-center mb-4"},zf=m("span",{class:"radio-text"},"申請日翌日零時",-1),jf={class:"flex items-center mb-4"},Uf=m("span",{class:"radio-text"},"次月某日",-1),Hf={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},Kf=m("span",{class:"ml-2"},"日",-1),Wf={class:"flex items-center mb-4"},Gf=m("span",{class:"radio-text"},"指定日期",-1),Jf={key:1,class:"bg-[#F8FBFD] py-3 px-8 w-[240px] -mt-2 mb-4 flex items-center"},Yf={class:"mb-4"},Xf=m("label",{class:"form-label lable-text mb-3"},"選擇開放的身份別/年齡",-1),Qf={class:"flex items-center mb-4"},Zf=m("label",{for:"employee",class:"text-neutral-800 cursor-pointer"},"員工",-1),_f={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[520px] -mt-2 mb-4 flex items-center"},qf=m("span",{class:"mx-2"},"-",-1),eh=m("span",{class:"mx-2"},"-",-1),th={class:"flex items-center mb-4"},nh=m("label",{for:"spouse",class:"text-neutral-800 cursor-pointer"},"配偶",-1),rh={key:1,class:"bg-[#F8FBFD] py-3 px-8 w-[520px] -mt-2 mb-4 flex items-center"},oh=m("span",{class:"mx-2"},"-",-1),ih=m("span",{class:"mx-2"},"-",-1),sh={class:"flex items-center mb-4"},lh=m("label",{for:"children",class:"text-neutral-800 cursor-pointer"},"子女",-1),ah={key:2,class:"bg-[#F8FBFD] py-3 px-8 w-[520px] -mt-2 mb-4 flex items-center"},dh=m("span",{class:"mx-2"},"-",-1),ch=m("span",{class:"mx-2"},"-",-1),uh={class:"flex items-center mb-4"},fh=m("label",{for:"employeeParentsAgeStart",class:"text-neutral-800 cursor-pointer"},"員工父母",-1),hh={key:3,class:"bg-[#F8FBFD] py-3 px-8 w-[520px] -mt-2 mb-4 flex items-center"},ph=m("span",{class:"mx-2"},"-",-1),mh=m("span",{class:"mx-2"},"-",-1),gh={class:"flex items-center mb-4"},vh=m("label",{for:"spouseParentsAgeStart",class:"text-neutral-800 cursor-pointer"},"配偶父母",-1),yh={key:4,class:"bg-[#F8FBFD] py-3 px-8 w-[520px] -mt-2 mb-4 flex items-center"},bh=m("span",{class:"mx-2"},"-",-1),xh=m("span",{class:"mx-2"},"-",-1),Sh=Qt({__name:"CoveragePeriod",setup(r){const e=mn(),{createInfo:t}=pn(e);return(n,o)=>(te(),fe(rn,null,[m("div",df,[cf,x(y(Gt),{modelValue:y(t).coveragePeriod,"onUpdate:modelValue":o[3]||(o[3]=i=>y(t).coveragePeriod=i)},{default:T(()=>[x(y(Oe),{value:"specifiedPeriod",class:"w-fit"},{default:T(({checked:i})=>[m("div",uf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),ff])]),_:1}),y(t).coveragePeriod==="specifiedPeriod"?(te(),fe("div",hf,[x(y(J),{name:"coverageSpecifiedPeriodStart"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[0]||(o[0]=l=>y(e).handleDateSelection(l,"coverageSpecifiedPeriodStart"))}),null,16,["error-message"])]),_:1}),pf,x(y(J),{name:"coverageSpecifiedPeriodEnd"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[1]||(o[1]=l=>y(e).handleDateSelection(l,"coverageSpecifiedPeriodEnd"))}),null,16,["error-message"])]),_:1})])):Se("",!0),x(y(Oe),{value:"unlimitedNonReversible",class:"w-fit"},{default:T(({checked:i})=>[m("div",mf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),gf])]),_:1}),x(y(Oe),{value:"limitedStartDateNotEndDate",class:"w-fit"},{default:T(({checked:i})=>[m("div",vf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),yf])]),_:1}),y(t).coveragePeriod==="limitedStartDateNotEndDate"?(te(),fe("div",bf,[x(y(J),{name:"coverageLimitedStartDateNotEndDate"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[2]||(o[2]=l=>y(e).handleDateSelection(l,"coverageLimitedStartDateNotEndDate"))}),null,16,["error-message"])]),_:1})])):Se("",!0),x(y(Oe),{value:"unlimited",class:"w-fit"},{default:T(({checked:i})=>[m("div",xf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Sf])]),_:1})]),_:1},8,["modelValue"])]),m("div",Cf,[Ef,x(y(Gt),{modelValue:y(t).coveragePeriodEffectiveDate,"onUpdate:modelValue":o[5]||(o[5]=i=>y(t).coveragePeriodEffectiveDate=i)},{default:T(()=>[x(y(Oe),{value:"applyDay",class:"w-fit"},{default:T(({checked:i})=>[m("div",Af,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Of])]),_:1}),x(y(Oe),{value:"applyDayMidnight",class:"w-fit"},{default:T(({checked:i})=>[m("div",Tf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Mf])]),_:1}),x(y(Oe),{value:"dayOfNextMonth",class:"w-fit"},{default:T(({checked:i})=>[m("div",wf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),kf])]),_:1}),y(t).coveragePeriodEffectiveDate==="dayOfNextMonth"?(te(),fe("div",Df,[x(y(J),{name:"dayOfNextMonth"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"次月某日","model-value":y(t).dayOfNextMonth=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),If])):Se("",!0),x(y(Oe),{value:"specifiedDate",class:"w-fit"},{default:T(({checked:i})=>[m("div",Nf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Pf])]),_:1}),y(t).coveragePeriodEffectiveDate==="specifiedDate"?(te(),fe("div",Rf,[x(y(J),{name:"coveragePeriodSpecifiedDate"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[4]||(o[4]=l=>y(e).handleDateSelection(l,"coveragePeriodSpecifiedDate"))}),null,16,["error-message"])]),_:1})])):Se("",!0)]),_:1},8,["modelValue"])]),m("div",$f,[Bf,x(y(Gt),{modelValue:y(t).terminationPeriodEffectiveDate,"onUpdate:modelValue":o[7]||(o[7]=i=>y(t).terminationPeriodEffectiveDate=i)},{default:T(()=>[x(y(Oe),{value:"applyDay",class:"w-fit"},{default:T(({checked:i})=>[m("div",Lf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Ff])]),_:1}),x(y(Oe),{value:"applyDayMidnight",class:"w-fit"},{default:T(({checked:i})=>[m("div",Vf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),zf])]),_:1}),x(y(Oe),{value:"dayOfNextMonth",class:"w-fit"},{default:T(({checked:i})=>[m("div",jf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Uf])]),_:1}),y(t).terminationPeriodEffectiveDate==="dayOfNextMonth"?(te(),fe("div",Hf,[x(y(J),{name:"dayOfNextMonth"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"次月某日","model-value":y(t).dayOfNextMonth=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),Kf])):Se("",!0),x(y(Oe),{value:"specifiedDate",class:"w-fit"},{default:T(({checked:i})=>[m("div",Wf,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Gf])]),_:1}),y(t).terminationPeriodEffectiveDate==="specifiedDate"?(te(),fe("div",Jf,[x(y(J),{name:"terminationPeriodSpecifiedDate"},{default:T(({field:i,errorMessage:s})=>[x(Pt,_(i,{placeholder:"選擇日期","error-message":s,"onUpdate:modelValue":o[6]||(o[6]=l=>y(e).handleDateSelection(l,"terminationPeriodSpecifiedDate"))}),null,16,["error-message"])]),_:1})])):Se("",!0)]),_:1},8,["modelValue"])]),m("div",Yf,[Xf,m("div",Qf,[x(ue,{id:"employee",name:"identityAndAge","model-value":y(t).identityAndAge.employee.checked,"is-checked":y(t).identityAndAge.employee.checked,onChange:o[8]||(o[8]=i=>y(t).identityAndAge.employee.checked=!y(t).identityAndAge.employee.checked)},null,8,["model-value","is-checked"]),Zf]),y(t).identityAndAge.employee.checked?(te(),fe("div",_f,[x(y(J),{name:"employeeAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),qf,x(y(J),{name:"employeeAgeMiddle"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeAgeMiddle=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),eh,x(y(J),{name:"employeeAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0),m("div",th,[x(ue,{id:"spouse",name:"identityAndAge","model-value":y(t).identityAndAge.spouse.checked,onChange:o[9]||(o[9]=i=>y(t).identityAndAge.spouse.checked=!y(t).identityAndAge.spouse.checked)},null,8,["model-value"]),nh]),y(t).identityAndAge.spouse.checked?(te(),fe("div",rh,[x(y(J),{name:"spouseAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),oh,x(y(J),{name:"spouseAgeMiddle"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseAgeMiddle=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),ih,x(y(J),{name:"spouseAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0),m("div",sh,[x(ue,{id:"children",name:"identityAndAge","model-value":y(t).identityAndAge.children.checked,onChange:o[10]||(o[10]=i=>y(t).identityAndAge.children.checked=!y(t).identityAndAge.children.checked)},null,8,["model-value"]),lh]),y(t).identityAndAge.children.checked?(te(),fe("div",ah,[x(y(J),{name:"childrenAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).childrenAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),dh,x(y(J),{name:"childrenAgeMiddle"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).childrenAgeMiddle=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),ch,x(y(J),{name:"childrenAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).childrenAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0),m("div",uh,[x(ue,{id:"employeeParentsAgeStart",name:"identityAndAge","model-value":y(t).identityAndAge.employeeParents.checked,onChange:o[11]||(o[11]=i=>y(t).identityAndAge.employeeParents.checked=!y(t).identityAndAge.employeeParents.checked)},null,8,["model-value"]),fh]),y(t).identityAndAge.employeeParents.checked?(te(),fe("div",hh,[x(y(J),{name:"employeeParentsAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeParentsAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),ph,x(y(J),{name:"employeeParentsAgeMiddle"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeParentsAgeMiddle=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),mh,x(y(J),{name:"employeeParentsAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).employeeParentsAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0),m("div",gh,[x(ue,{id:"spouseParentsAgeStart",name:"identityAndAge","model-value":y(t).identityAndAge.spouseParents.checked,onChange:o[12]||(o[12]=i=>y(t).identityAndAge.spouseParents.checked=!y(t).identityAndAge.spouseParents.checked)},null,8,["model-value"]),vh]),y(t).identityAndAge.spouseParents.checked?(te(),fe("div",yh,[x(y(J),{name:"spouseParentsAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseParentsAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),bh,x(y(J),{name:"spouseParentsAgeMiddle"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseParentsAgeMiddle=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),xh,x(y(J),{name:"spouseParentsAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).spouseParentsAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0)])],64))}}),Ch={class:"mb-6"},Eh=m("label",{class:"mb-3 font-normal font-base text-neutral-800 inline-block"},"本人",-1),Ah={class:"flex items-center mb-4"},Oh=m("span",{class:"radio-text"},"無限制",-1),Th={class:"flex items-center mb-4"},Mh=m("span",{class:"radio-text"},"每人需告知",-1),wh={class:"flex items-center mb-4"},kh=m("span",{class:"radio-text"},"依年齡告知",-1),Dh={key:0,class:"bg-[#F8FBFD] py-3 px-8 -mt-2 w-[500px]"},Ih={class:"flex mb-4"},Nh={class:"flex items-center mr-4"},Ph=m("label",{for:"life",class:"text-neutral-800 cursor-pointer"},"人壽險",-1),Rh={class:"flex items-center mr-4"},$h=m("label",{for:"medical",class:"text-neutral-800 cursor-pointer"},"醫療險",-1),Bh={class:"flex items-center mr-4"},Lh=m("label",{for:"group",class:"text-neutral-800 cursor-pointer"},"團體保險",-1),Fh={class:"flex items-center mr-4"},Vh=m("label",{for:"internet",class:"text-neutral-800 cursor-pointer"},"網路保險",-1),zh={class:"flex items-center w-[300px]"},jh=m("span",{class:"mx-2"},"-",-1),Uh={class:"mb-6"},Hh=m("label",{class:"mb-3 font-normal font-base text-neutral-800 inline-block"},"配偶",-1),Kh={class:"flex items-center mb-4"},Wh=m("span",{class:"radio-text"},"無限制",-1),Gh={class:"flex items-center mb-4"},Jh=m("span",{class:"radio-text"},"每人需告知",-1),Yh={class:"flex items-center mb-4"},Xh=m("span",{class:"radio-text"},"依年齡告知",-1),Qh={key:0,class:"bg-[#F8FBFD] py-3 px-8 -mt-2 w-[500px]"},Zh={class:"flex mb-4"},_h={class:"flex items-center mr-4"},qh=m("label",{for:"spouceLife",class:"text-neutral-800 cursor-pointer"},"人壽險",-1),ep={class:"flex items-center mr-4"},tp=m("label",{for:"spouseMedical",class:"text-neutral-800 cursor-pointer"},"醫療險",-1),np={class:"flex items-center mr-4"},rp=m("label",{for:"spouseGroup",class:"text-neutral-800 cursor-pointer"},"團體保險",-1),op={class:"flex items-center mr-4"},ip=m("label",{for:"spouseInternet",class:"text-neutral-800 cursor-pointer"},"網路保險",-1),sp={class:"flex items-center w-[300px]"},lp=m("span",{class:"mx-2"},"-",-1),ap=Qt({__name:"HealthInfo",setup(r){const e=mn(),{createInfo:t}=pn(e);return(n,o)=>(te(),fe(rn,null,[m("div",Ch,[Eh,x(y(J),{name:"healthInfoEmployee"},{default:T(()=>[x(y(Gt),{modelValue:y(t).healthInfoEmployee,"onUpdate:modelValue":o[0]||(o[0]=i=>y(t).healthInfoEmployee=i)},{default:T(()=>[x(y(Oe),{value:"unlimited",class:"w-fit"},{default:T(({checked:i})=>[m("div",Ah,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Oh])]),_:1}),x(y(Oe),{value:"needy",class:"w-fit"},{default:T(({checked:i})=>[m("div",Th,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Mh])]),_:1}),x(y(Oe),{value:"informByAge",class:"w-fit"},{default:T(({checked:i})=>[m("div",wh,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),kh])]),_:1})]),_:1},8,["modelValue"])]),_:1}),y(t).healthInfoEmployee==="informByAge"?(te(),fe("div",Dh,[m("div",Ih,[m("div",Nh,[x(ue,{id:"life",name:"healthInfoEmployeePlan","model-value":y(t).healthInfoEmployeePlan.life,onChange:o[1]||(o[1]=i=>y(t).healthInfoEmployeePlan.life=!y(t).healthInfoEmployeePlan.life)},null,8,["model-value"]),Ph]),m("div",Rh,[x(ue,{id:"medical",name:"healthInfoEmployeePlan","model-value":y(t).healthInfoEmployeePlan.medical,onChange:o[2]||(o[2]=i=>y(t).healthInfoEmployeePlan.medical=!y(t).healthInfoEmployeePlan.medical)},null,8,["model-value"]),$h]),m("div",Bh,[x(ue,{id:"group",name:"healthInfoEmployeePlan","model-value":y(t).healthInfoEmployeePlan.group,onChange:o[3]||(o[3]=i=>y(t).healthInfoEmployeePlan.group=!y(t).healthInfoEmployeePlan.group)},null,8,["model-value"]),Lh]),m("div",Fh,[x(ue,{id:"internet",name:"healthInfoEmployeePlan","model-value":y(t).healthInfoEmployeePlan.internet,onChange:o[4]||(o[4]=i=>y(t).healthInfoEmployeePlan.internet=!y(t).healthInfoEmployeePlan.internet)},null,8,["model-value"]),Vh])]),m("div",zh,[x(y(J),{name:"healthInfoEmployeeAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).healthInfoEmployeeAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),jh,x(y(J),{name:"healthInfoEmployeeAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).healthInfoEmployeeAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])])):Se("",!0)]),m("div",Uh,[Hh,x(y(J),{name:"healthInfoSpouse"},{default:T(()=>[x(y(Gt),{modelValue:y(t).healthInfoSpouse,"onUpdate:modelValue":o[5]||(o[5]=i=>y(t).healthInfoSpouse=i)},{default:T(()=>[x(y(Oe),{value:"unlimited",class:"w-fit"},{default:T(({checked:i})=>[m("div",Kh,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Wh])]),_:1}),x(y(Oe),{value:"needy",class:"w-fit"},{default:T(({checked:i})=>[m("div",Gh,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Jh])]),_:1}),x(y(Oe),{value:"informByAge",class:"w-fit"},{default:T(({checked:i})=>[m("div",Yh,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Xh])]),_:1})]),_:1},8,["modelValue"])]),_:1}),y(t).healthInfoSpouse==="informByAge"?(te(),fe("div",Qh,[m("div",Zh,[m("div",_h,[x(ue,{id:"spouceLife",name:"healthInfoSpousePlan","model-value":y(t).healthInfoSpousePlan.life,onChange:o[6]||(o[6]=i=>y(t).healthInfoSpousePlan.life=!y(t).healthInfoSpousePlan.life)},null,8,["model-value"]),qh]),m("div",ep,[x(ue,{id:"spouseMedical",name:"healthInfoSpousePlan","model-value":y(t).healthInfoSpousePlan.medical,onChange:o[7]||(o[7]=i=>y(t).healthInfoSpousePlan.medical=!y(t).healthInfoSpousePlan.medical)},null,8,["model-value"]),tp]),m("div",np,[x(ue,{id:"spouseGroup",name:"healthInfoSpousePlan","model-value":y(t).healthInfoSpousePlan.group,onChange:o[8]||(o[8]=i=>y(t).healthInfoSpousePlan.group=!y(t).healthInfoSpousePlan.group)},null,8,["model-value"]),rp]),m("div",op,[x(ue,{id:"spouseInternet",name:"healthInfoSpousePlan","model-value":y(t).healthInfoSpousePlan.internet,onChange:o[9]||(o[9]=i=>y(t).healthInfoSpousePlan.internet=!y(t).healthInfoSpousePlan.internet)},null,8,["model-value"]),ip])]),m("div",sp,[x(y(J),{name:"healthInfoSpouseAgeStart"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).healthInfoSpouseAgeStart=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1}),lp,x(y(J),{name:"healthInfoSpouseAgeEnd"},{default:T(({field:i,value:s,errorMessage:l})=>[x(le,_(i,{placeholder:"請輸入年齡","model-value":y(t).healthInfoSpouseAgeEnd=s,"error-message":l}),null,16,["model-value","error-message"])]),_:1})])])):Se("",!0)])],64))}}),dp={class:"modal-mask QA-form"},cp={class:"content"},up={class:"w-[85%] py-6 gap-6 mx-auto grid grid-cols-5"},fp=["for"],hp={class:"flex items-center justify-center py-6"},pp=Qt({__name:"ChooseRules",props:{count:{type:Number,required:!0}},emits:["close"],setup(r,{emit:e}){const t=r,n=mn(),{createInfo:o,rules:i,ruleCopy:s}=pn(n),l=ke([]);function a(){e("close")}function d(p){return o.value.selectedRules.some(g=>g.id===p)}function c(p){return s.value.findIndex(g=>g.id===p)}function u(p,g){if(!l.value.some(b=>b===g)&&p){const b=c(g),S={order:s.value[b].order,id:s.value[b].id};l.value.push(S)}else{const b=l.value.findIndex(S=>S.id===g);l.value.splice(b,1)}}function f(){t.count<2&&l.value.sort((p,g)=>{const v=p.order??Number.MIN_SAFE_INTEGER,b=g.order??Number.MIN_SAFE_INTEGER;return v-b}),l.value.forEach(p=>{const g=c(p.id);o.value.selectedRules.push(s.value[g]),s.value.splice(g,1)}),l.value=[],e("close")}function h(){l.value=[],e("close")}return(p,g)=>(te(),Kt(ti,{to:"body"},[x(Ds,{name:"modal"},{default:T(()=>[m("div",dp,[m("div",cp,[x(Rs,{title:"請選擇模板",onClose:a}),m("div",up,[(te(!0),fe(rn,null,Po(y(s),(v,b)=>(te(),fe("div",{key:b,class:"flex items-center justify-center"},[x(ue,{id:v.id,name:"chooseRules","model-value":d(v.id),"onUpdate:modelValue":S=>u(S,v.id)},null,8,["id","model-value","onUpdate:modelValue"]),m("label",{for:v.id,class:"text-neutral-800 cursor-pointer"},qe(v.name),9,fp)]))),128))]),m("div",hp,[x(Ne,{size:"custom",width:250,height:48,outline:!0,class:"mr-4",onClick:h},{default:T(()=>[we(" 取消 ")]),_:1}),x(Ne,{size:"custom",width:250,height:48,disabled:y(i).length===0,class:de({"cursor-not-allowed":y(i).length===0}),onClick:f},{default:T(()=>[we(" 確認 ")]),_:1},8,["disabled","class"])])])])]),_:1})]))}});const mp=io(pp,[["__scopeId","data-v-f893115f"]]);function ot(r){this.content=r}ot.prototype={constructor:ot,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,o=n.find(r),i=n.content.slice();return o==-1?i.push(t||r,e):(i[o+1]=e,t&&(i[o]=t)),new ot(i)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ot(t)},addToStart:function(r,e){return new ot([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new ot(t)},addBefore:function(r,e,t){var n=this.remove(e),o=n.content.slice(),i=n.find(r);return o.splice(i==-1?o.length:i,0,e,t),new ot(o)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=ot.from(r),r.size?new ot(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=ot.from(r),r.size?new ot(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=ot.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};ot.from=function(r){if(r instanceof ot)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new ot(e)};function Pa(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let o=r.child(n),i=e.child(n);if(o==i){t+=o.nodeSize;continue}if(!o.sameMarkup(i))return t;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)t++;return t}if(o.content.size||i.content.size){let s=Pa(o.content,i.content,t+1);if(s!=null)return s}t+=o.nodeSize}}function Ra(r,e,t,n){for(let o=r.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:t,b:n};let s=r.child(--o),l=e.child(--i),a=s.nodeSize;if(s==l){t-=a,n-=a;continue}if(!s.sameMarkup(l))return{a:t,b:n};if(s.isText&&s.text!=l.text){let d=0,c=Math.min(s.text.length,l.text.length);for(;d<c&&s.text[s.text.length-d-1]==l.text[l.text.length-d-1];)d++,t--,n--;return{a:t,b:n}}if(s.content.size||l.content.size){let d=Ra(s.content,l.content,t-1,n-1);if(d)return d}t-=a,n-=a}}class L{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,o=0,i){for(let s=0,l=0;l<t;s++){let a=this.content[s],d=l+a.nodeSize;if(d>e&&n(a,o+l,i||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,o+c)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,o){let i="",s=!0;return this.nodesBetween(e,t,(l,a)=>{l.isText?(i+=l.text.slice(Math.max(e,a)-a,t-a),s=!n):l.isLeaf?(o?i+=typeof o=="function"?o(l):o:l.type.spec.leafText&&(i+=l.type.spec.leafText(l)),s=!n):!s&&l.isBlock&&(i+=n,s=!0)},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new L(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],o=0;if(t>e)for(let i=0,s=0;s<t;i++){let l=this.content[i],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),n.push(l),o+=l.nodeSize),s=a}return new L(n,o)}cutByIndex(e,t){return e==t?L.empty:e==0&&t==this.content.length?this:new L(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let o=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new L(o,i)}addToStart(e){return new L([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new L(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let o=this.content[t];e(o,n,t),n+=o.nodeSize}}findDiffStart(e,t=0){return Pa(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Ra(this,e,t,n)}findIndex(e,t=-1){if(e==0)return ho(0,e);if(e==this.size)return ho(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,o=0;;n++){let i=this.child(n),s=o+i.nodeSize;if(s>=e)return s==e||t>0?ho(n+1,s):ho(n,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return L.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return L.empty;let t,n=0;for(let o=0;o<e.length;o++){let i=e[o];n+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new L(t||e,n)}static from(e){if(!e)return L.empty;if(e instanceof L)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new L([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);const Ai={index:0,offset:0};function ho(r,e){return Ai.index=r,Ai.offset=e,Ai}function $o(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!$o(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!$o(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}let De=class is{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$o(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return is.none;if(e instanceof is)return[e];let t=e.slice();return t.sort((n,o)=>n.type.rank-o.type.rank),t}};De.none=[];class Bo extends Error{}class G{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Ba(this.content,e+this.openStart,t);return n&&new G(n,this.openStart,this.openEnd)}removeBetween(e,t){return new G($a(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return G.empty;let n=t.openStart||0,o=t.openEnd||0;if(typeof n!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new G(L.fromJSON(e,t.content),n,o)}static maxOpen(e,t=!0){let n=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new G(e,n,o)}}G.empty=new G(L.empty,0,0);function $a(r,e,t){let{index:n,offset:o}=r.findIndex(e),i=r.maybeChild(n),{index:s,offset:l}=r.findIndex(t);if(o==e||i.isText){if(l!=t&&!r.child(s).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=s)throw new RangeError("Removing non-flat range");return r.replaceChild(n,i.copy($a(i.content,e-o-1,t-o-1)))}function Ba(r,e,t,n){let{index:o,offset:i}=r.findIndex(e),s=r.maybeChild(o);if(i==e||s.isText)return n&&!n.canReplace(o,o,t)?null:r.cut(0,e).append(t).append(r.cut(e));let l=Ba(s.content,e-i-1,t);return l&&r.replaceChild(o,s.copy(l))}function gp(r,e,t){if(t.openStart>r.depth)throw new Bo("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new Bo("Inconsistent open depths");return La(r,e,t,0)}function La(r,e,t,n){let o=r.index(n),i=r.node(n);if(o==e.index(n)&&n<r.depth-t.openStart){let s=La(r,e,t,n+1);return i.copy(i.content.replaceChild(o,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let s=r.parent,l=s.content;return Wn(s,l.cut(0,r.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=vp(t,r);return Wn(i,Va(r,s,l,e,n))}else return Wn(i,Lo(r,e,n))}function Fa(r,e){if(!e.type.compatibleContent(r.type))throw new Bo("Cannot join "+e.type.name+" onto "+r.type.name)}function ss(r,e,t){let n=r.node(t);return Fa(n,e.node(t)),n}function Kn(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function Ur(r,e,t,n){let o=(e||r).node(t),i=0,s=e?e.index(t):o.childCount;r&&(i=r.index(t),r.depth>t?i++:r.textOffset&&(Kn(r.nodeAfter,n),i++));for(let l=i;l<s;l++)Kn(o.child(l),n);e&&e.depth==t&&e.textOffset&&Kn(e.nodeBefore,n)}function Wn(r,e){return r.type.checkContent(e),r.copy(e)}function Va(r,e,t,n,o){let i=r.depth>o&&ss(r,e,o+1),s=n.depth>o&&ss(t,n,o+1),l=[];return Ur(null,r,o,l),i&&s&&e.index(o)==t.index(o)?(Fa(i,s),Kn(Wn(i,Va(r,e,t,n,o+1)),l)):(i&&Kn(Wn(i,Lo(r,e,o+1)),l),Ur(e,t,o,l),s&&Kn(Wn(s,Lo(t,n,o+1)),l)),Ur(n,null,o,l),new L(l)}function Lo(r,e,t){let n=[];if(Ur(null,r,t,n),r.depth>t){let o=ss(r,e,t+1);Kn(Wn(o,Lo(r,e,t+1)),n)}return Ur(e,null,t,n),new L(n)}function vp(r,e){let t=e.depth-r.openStart,o=e.node(t).copy(r.content);for(let i=t-1;i>=0;i--)o=e.node(i).copy(L.from(o));return{start:o.resolveNoCache(r.openStart+t),end:o.resolveNoCache(o.content.size-r.openEnd-t)}}class Zr{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)o+=n.child(i).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return De.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){let l=n;n=o,o=l}let i=n.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!o||!n[i].isInSet(o.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Fo(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],o=0,i=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(i),d=i-a;if(n.push(s,l,o+a),!d||(s=s.child(l),s.isText))break;i=d-1,o+=a+1}return new Zr(t,n,i)}static resolveCached(e,t){for(let o=0;o<Oi.length;o++){let i=Oi[o];if(i.pos==t&&i.doc==e)return i}let n=Oi[Ti]=Zr.resolve(e,t);return Ti=(Ti+1)%yp,n}}let Oi=[],Ti=0,yp=12;class Fo{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const bp=Object.create(null);let Gn=class ls{constructor(e,t,n,o=De.none){this.type=e,this.attrs=t,this.marks=o,this.content=n||L.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,o=0){this.content.nodesBetween(e,t,n,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,o){return this.content.textBetween(e,t,n,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&$o(this.attrs,t||e.defaultAttrs||bp)&&De.sameSet(this.marks,n||De.none)}copy(e=null){return e==this.content?this:new ls(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ls(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return G.empty;let o=this.resolve(e),i=this.resolve(t),s=n?0:o.sharedDepth(t),l=o.start(s),d=o.node(s).content.cut(o.pos-l,i.pos-l);return new G(d,o.depth-s,i.depth-s)}replace(e,t,n){return gp(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let o=this.content.child(t-1);return{node:o,index:t-1,offset:n-o.nodeSize}}resolve(e){return Zr.resolveCached(this,e)}resolveNoCache(e){return Zr.resolve(this,e)}rangeHasMark(e,t,n){let o=!1;return t>e&&this.nodesBetween(e,t,i=>(n.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),za(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=L.empty,o=0,i=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,o,i),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=o;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(n),s=i&&i.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=De.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!De.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let o=L.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,n)}};Gn.prototype.text=void 0;class Vo extends Gn{constructor(e,t,n,o){if(super(e,t,null,o),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):za(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vo(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function za(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Qn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new xp(e,t);if(n.next==null)return Qn.empty;let o=ja(n);n.next&&n.err("Unexpected trailing text");let i=Mp(Tp(o));return wp(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let o=this;for(let i=t;o&&i<n;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let o=[this];function i(s,l){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return L.from(l.map(d=>d.createAndFill()));for(let d=0;d<s.next.length;d++){let{type:c,next:u}=s.next[d];if(!(c.isText||c.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let f=i(u,l.concat(c));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let o=n.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let l=o;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:l,next:a}=i.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!o.type||a.validEnd)&&(n.push({match:l.contentMatch,type:l,via:o}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let o=0;o<n.next.length;o++)e.indexOf(n.next[o].next)==-1&&t(n.next[o].next)}return t(this),e.map((n,o)=>{let i=o+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)i+=(s?", ":"")+n.next[s].type.name+"->"+e.indexOf(n.next[s].next);return i}).join(`
`)}}Qn.empty=new Qn(!0);class xp{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ja(r){let e=[];do e.push(Sp(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Sp(r){let e=[];do e.push(Cp(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Cp(r){let e=Op(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=Ep(r,e);else break;return e}function sl(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function Ep(r,e){let t=sl(r),n=t;return r.eat(",")&&(r.next!="}"?n=sl(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function Ap(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let o=[];for(let i in t){let s=t[i];s.groups.indexOf(e)>-1&&o.push(s)}return o.length==0&&r.err("No node type or group '"+e+"' found"),o}function Op(r){if(r.eat("(")){let e=ja(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=Ap(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Tp(r){let e=[[]];return o(i(r,0),t()),e;function t(){return e.push([])-1}function n(s,l,a){let d={term:a,to:l};return e[s].push(d),d}function o(s,l){s.forEach(a=>a.to=l)}function i(s,l){if(s.type=="choice")return s.exprs.reduce((a,d)=>a.concat(i(d,l)),[]);if(s.type=="seq")for(let a=0;;a++){let d=i(s.exprs[a],l);if(a==s.exprs.length-1)return d;o(d,l=t())}else if(s.type=="star"){let a=t();return n(l,a),o(i(s.expr,a),a),[n(a)]}else if(s.type=="plus"){let a=t();return o(i(s.expr,l),a),o(i(s.expr,a),a),[n(a)]}else{if(s.type=="opt")return[n(l)].concat(i(s.expr,l));if(s.type=="range"){let a=l;for(let d=0;d<s.min;d++){let c=t();o(i(s.expr,a),c),a=c}if(s.max==-1)o(i(s.expr,a),a);else for(let d=s.min;d<s.max;d++){let c=t();n(a,c),o(i(s.expr,a),c),a=c}return[n(a)]}else{if(s.type=="name")return[n(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Ua(r,e){return e-r}function ll(r,e){let t=[];return n(e),t.sort(Ua);function n(o){let i=r[o];if(i.length==1&&!i[0].term)return n(i[0].to);t.push(o);for(let s=0;s<i.length;s++){let{term:l,to:a}=i[s];!l&&t.indexOf(a)==-1&&n(a)}}}function Mp(r){let e=Object.create(null);return t(ll(r,0));function t(n){let o=[];n.forEach(s=>{r[s].forEach(({term:l,to:a})=>{if(!l)return;let d;for(let c=0;c<o.length;c++)o[c][0]==l&&(d=o[c][1]);ll(r,a).forEach(c=>{d||o.push([l,d=[]]),d.indexOf(c)==-1&&d.push(c)})})});let i=e[n.join(",")]=new Qn(n.indexOf(r.length-1)>-1);for(let s=0;s<o.length;s++){let l=o[s][1].sort(Ua);i.next.push({type:o[s][0],next:e[l.join(",")]||t(l)})}return i}}function wp(r,e){for(let t=0,n=[r];t<n.length;t++){let o=n[t],i=!o.validEnd,s=[];for(let l=0;l<o.next.length;l++){let{type:a,next:d}=o.next[l];s.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),n.indexOf(d)==-1&&n.push(d)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Ha(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function Ka(r,e){let t=Object.create(null);for(let n in r){let o=e&&e[n];if(o===void 0){let i=r[n];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=o}return t}function Wa(r){let e=Object.create(null);if(r)for(let t in r)e[t]=new kp(r[t]);return e}let al=class Ga{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Wa(n.attrs),this.defaultAttrs=Ha(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ka(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gn(this,this.computeAttrs(e),L.from(t),De.setFrom(n))}createChecked(e=null,t,n){return t=L.from(t),this.checkContent(t),new Gn(this,this.computeAttrs(e),t,De.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=L.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(L.empty,!0);return i?new Gn(this,e,t.append(i),De.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:De.none:e}static compile(e,t){let n=Object.create(null);e.forEach((i,s)=>n[i]=new Ga(i,t,s));let o=t.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};class kp{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class oi{constructor(e,t,n,o){this.name=e,this.rank=t,this.schema=n,this.spec=o,this.attrs=Wa(o.attrs),this.excluded=null;let i=Ha(this.attrs);this.instance=i?new De(this,i):null}create(e=null){return!e&&this.instance?this.instance:new De(this,Ka(this.attrs,e))}static compile(e,t){let n=Object.create(null),o=0;return e.forEach((i,s)=>n[i]=new oi(i,o++,t,s)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Dp{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=ot.from(e.nodes),t.marks=ot.from(e.marks||{}),this.nodes=al.compile(this.spec.nodes,this),this.marks=oi.compile(this.spec.marks,this);let n=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",l=i.spec.marks;i.contentMatch=n[s]||(n[s]=Qn.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=l=="_"?null:l?dl(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:dl(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof al){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,o)}text(e,t){let n=this.nodes.text;return new Vo(n,n.defaultAttrs,e,De.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Gn.fromJSON(this,e)}markFromJSON(e){return De.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function dl(r,e){let t=[];for(let n=0;n<e.length;n++){let o=e[n],i=r.marks[o],s=i;if(i)t.push(i);else for(let l in r.marks){let a=r.marks[l];(o=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(o)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}class gr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(n=>{n.tag?this.tags.push(n):n.style&&this.styles.push(n)}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let o=e.nodes[n.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let n=new ul(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new ul(this,t,!0);return n.addAll(e,t.from,t.to),G.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(Pp(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,t,n,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!n.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function n(o){let i=o.priority==null?50:o.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<i)break}t.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{n(s=fl(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{n(s=fl(s)),s.node||s.ignore||s.mark||(s.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new gr(e,gr.schemaRules(e)))}}const Ja={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ip={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ya={ol:!0,ul:!0},zo=1,jo=2,Hr=4;function cl(r,e,t){return e!=null?(e?zo:0)|(e==="full"?jo:0):r&&r.whitespace=="pre"?zo|jo:t&~Hr}class po{constructor(e,t,n,o,i,s,l){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=o,this.solid=i,this.options=l,this.content=[],this.activeMarks=De.none,this.stashMarks=[],this.match=s||(l&Hr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(L.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,o;return(o=n.findWrapping(e.type))?(this.match=n,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&zo)){let n=this.content[this.content.length-1],o;if(n&&n.isText&&(o=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let t=L.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let o=n[t];(this.type?this.type.allowsMarkType(o.type):$p(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ja.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ul{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let o=t.topNode,i,s=cl(null,t.preserveWhitespace,0)|(n?Hr:0);o?i=new po(o.type,o.attrs,De.none,De.none,!0,t.topMatch||o.type.contentMatch,s):n?i=new po(null,null,De.none,De.none,!0,null,s):i=new po(e.schema.topNodeType,null,De.none,De.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let o=this.readStyles(Rp(n));if(!o)return;let[i,s]=o,l=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],l);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);t();for(let a=0;a<i.length;a++)this.removePendingMark(i[a],l);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&jo||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&zo)n.options&jo?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let o=n.content[n.content.length-1],i=e.previousSibling;(!o||i&&i.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n=e.nodeName.toLowerCase(),o;Ya.hasOwnProperty(n)&&this.parser.normalizeLists&&Np(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,t));if(i?i.ignore:Ip.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let s,l=this.top,a=this.needsBlock;if(Ja.hasOwnProperty(n))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),s=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}i&&i.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(l),this.needsBlock=a}else this.withStyleRules(e,()=>{this.addElementByRule(e,i,i.consuming===!1?o:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=De.none,n=De.none;for(let o=0;o<e.length;o+=2)for(let i=void 0;;){let s=this.parser.matchStyle(e[o],e[o+1],this,i);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(l=>{s.clearMark(l)&&(n=l.addToSet(n))}):t=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(t),s.consuming===!1)i=s;else break}return[t,n]}addElementByRule(e,t,n){let o,i,s;t.node?(i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):o=this.enter(i,t.attrs||null,t.preserveWhitespace)):(s=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(s));let l=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a)}o&&this.sync(l)&&this.open--,s&&this.removePendingMark(s,l)}addAll(e,t,n){let o=t||0;for(let i=t?e.childNodes[t]:e.firstChild,s=n==null?null:e.childNodes[n];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i);this.findAtPoint(e,o)}findPlace(e){let t,n;for(let o=this.open;o>=0;o--){let i=this.nodes[o],s=i.findWrapping(e);if(s&&(!t||t.length>s.length)&&(t=s,n=i,!s.length)||i.solid)break}if(!t)return!1;this.sync(n);for(let o=0;o<t.length;o++)this.enterInner(t[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let o=0;o<e.marks.length;o++)(!t.type||t.type.allowsMarkType(e.marks[o].type))&&(n=e.marks[o].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let o=this.findPlace(e.create(t));return o&&this.enterInner(e,t,!0,n),o}enterInner(e,t=null,n=!1,o){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let s=cl(e,o,i.options);i.options&Hr&&i.content.length==0&&(s|=Hr),this.nodes.push(new po(e,t,i.activeMarks,i.pendingMarks,n,null,s)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let o=n.length-1;o>=0;o--)e+=n[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,o=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(o?0:1),s=(l,a)=>{for(;l>=0;l--){let d=t[l];if(d==""){if(l==t.length-1||l==0)continue;for(;a>=i;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&o?this.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!c||c.name!=d&&c.groups.indexOf(d)==-1)return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(e){let t=Bp(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let o=this.nodes[n];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let s=o.popFromStashMark(e);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==t)break}}}function Np(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&Ya.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function Pp(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function Rp(r){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,n=[];for(;t=e.exec(r);)n.push(t[1],t[2].trim());return n}function fl(r){let e={};for(let t in r)e[t]=r[t];return e}function $p(r,e){let t=e.schema.nodes;for(let n in t){let o=t[n];if(!o.allowsMarkType(r))continue;let i=[],s=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:d,next:c}=l.edge(a);if(d==e||i.indexOf(c)<0&&s(c))return!0}};if(s(o.contentMatch))return!0}}function Bp(r,e){for(let t=0;t<e.length;t++)if(r.eq(e[t]))return e[t]}class tn{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Mi(t).createDocumentFragment());let o=n,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let l=0,a=0;for(;l<i.length&&a<s.marks.length;){let d=s.marks[a];if(!this.marks[d.type.name]){a++;continue}if(!d.eq(i[l][0])||d.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)o=i.pop()[1];for(;a<s.marks.length;){let d=s.marks[a++],c=this.serializeMark(d,s.isInline,t);c&&(i.push([d,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(this.serializeNodeInner(s,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:o}=tn.renderSpec(Mi(t),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let o=this.marks[e.type.name];return o&&tn.renderSpec(Mi(n),o(e,t))}static renderSpec(e,t,n=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let s,l=n?e.createElementNS(n,o):e.createElement(o),a=t[1],d=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){d=2;for(let c in a)if(a[c]!=null){let u=c.indexOf(" ");u>0?l.setAttributeNS(c.slice(0,u),c.slice(u+1),a[c]):l.setAttribute(c,a[c])}}for(let c=d;c<t.length;c++){let u=t[c];if(u===0){if(c<t.length-1||c>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:h}=tn.renderSpec(e,u,n);if(l.appendChild(f),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:l,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new tn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=hl(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return hl(e.marks)}}function hl(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Mi(r){return r.document||window.document}const Xa=65535,Qa=Math.pow(2,16);function Lp(r,e){return r+e*Qa}function pl(r){return r&Xa}function Fp(r){return(r-(r&Xa))/Qa}const Za=1,_a=2,Oo=4,qa=8;class as{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&qa)>0}get deletedBefore(){return(this.delInfo&(Za|Oo))>0}get deletedAfter(){return(this.delInfo&(_a|Oo))>0}get deletedAcross(){return(this.delInfo&Oo)>0}}class Mt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Mt.empty)return Mt.empty}recover(e){let t=0,n=pl(e);if(!this.inverted)for(let o=0;o<n;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[n*3]+t+Fp(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?o:0);if(a>e)break;let d=this.ranges[l+i],c=this.ranges[l+s],u=a+d;if(e<=u){let f=d?e==a?-1:e==u?1:t:t,h=a+o+(f<0?0:c);if(n)return h;let p=e==(t<0?a:u)?null:Lp(l/3,e-a),g=e==a?_a:e==u?Za:Oo;return(t<0?e!=a:e!=u)&&(g|=qa),new as(h,g,p)}o+=c-d}return n?e+o:new as(e+o,0,null)}touches(e,t){let n=0,o=pl(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?n:0);if(a>e)break;let d=this.ranges[l+i],c=a+d;if(e<=c&&l==o*3)return!0;n+=this.ranges[l+s]-d}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],l=s-(this.inverted?i:0),a=s+(this.inverted?0:i),d=this.ranges[o+t],c=this.ranges[o+n];e(l,l+d,a,a+c),i+=c-d}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Mt.empty:new Mt(e<0?[0,-e,0]:[0,0,e])}}Mt.empty=new Mt([]);class fr{constructor(e=[],t,n=0,o=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=o}slice(e=0,t=this.maps.length){return new fr(this.maps,this.mirror,e,t)}copy(){return new fr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let o=e.getMirror(t);this.appendMap(e.maps[t],o!=null&&o<t?n+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e.maps[t].invert(),o!=null&&o>t?n-o-1:void 0)}}invert(){let e=new fr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let o=0;for(let i=this.from;i<this.to;i++){let s=this.maps[i],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this.maps[a].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return n?e:new as(e,o,null)}}const wi=Object.create(null);class ft{getMap(){return Mt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=wi[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in wi)throw new RangeError("Duplicate use of step JSON ID "+e);return wi[e]=t,t.prototype.jsonID=e,t}}class Qe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Qe(e,null)}static fail(e){return new Qe(null,e)}static fromReplace(e,t,n,o){try{return Qe.ok(e.replace(t,n,o))}catch(i){if(i instanceof Bo)return Qe.fail(i.message);throw i}}}function Bs(r,e,t){let n=[];for(let o=0;o<r.childCount;o++){let i=r.child(o);i.content.size&&(i=i.copy(Bs(i.content,e,i))),i.isInline&&(i=e(i,t,o)),n.push(i)}return L.fromArray(n)}class An extends ft{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),i=new G(Bs(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),t.openStart,t.openEnd);return Qe.fromReplace(e,this.from,this.to,i)}invert(){return new nn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new An(t.pos,n.pos,this.mark)}merge(e){return e instanceof An&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new An(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new An(t.from,t.to,e.markFromJSON(t.mark))}}ft.jsonID("addMark",An);class nn extends ft{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new G(Bs(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return Qe.fromReplace(e,this.from,this.to,n)}invert(){return new An(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new nn(t.pos,n.pos,this.mark)}merge(e){return e instanceof nn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new nn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new nn(t.from,t.to,e.markFromJSON(t.mark))}}ft.jsonID("removeMark",nn);class On extends ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Qe.fromReplace(e,this.pos,this.pos+1,new G(L.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(n))return new On(this.pos,t.marks[o]);return new On(this.pos,this.mark)}}return new vr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new On(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new On(t.pos,e.markFromJSON(t.mark))}}ft.jsonID("addNodeMark",On);class vr extends ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Qe.fromReplace(e,this.pos,this.pos+1,new G(L.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new On(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new vr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new vr(t.pos,e.markFromJSON(t.mark))}}ft.jsonID("removeNodeMark",vr);class it extends ft{constructor(e,t,n,o=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=o}apply(e){return this.structure&&ds(e,this.from,this.to)?Qe.fail("Structure replace would overwrite content"):Qe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(e){return new it(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new it(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof it)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?G.empty:new G(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new it(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?G.empty:new G(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new it(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new it(t.from,t.to,G.fromJSON(e,t.slice),!!t.structure)}}ft.jsonID("replace",it);class et extends ft{constructor(e,t,n,o,i,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=s,this.structure=l}apply(e){if(this.structure&&(ds(e,this.from,this.gapFrom)||ds(e,this.gapTo,this.to)))return Qe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Qe.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Qe.fromReplace(e,this.from,this.to,n):Qe.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new et(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||o<t.pos||i>n.pos?null:new et(t.pos,n.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new et(t.from,t.to,t.gapFrom,t.gapTo,G.fromJSON(e,t.slice),t.insert,!!t.structure)}}ft.jsonID("replaceAround",et);function ds(r,e,t){let n=r.resolve(e),o=t-e,i=n.depth;for(;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0){let s=n.node(i).maybeChild(n.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Vp(r,e,t,n){let o=[],i=[],s,l;r.doc.nodesBetween(e,t,(a,d,c)=>{if(!a.isInline)return;let u=a.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){let f=Math.max(d,e),h=Math.min(d+a.nodeSize,t),p=n.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(u[g])?s.to=h:o.push(s=new nn(f,h,u[g])));l&&l.to==f?l.to=h:i.push(l=new An(f,h,n))}}),o.forEach(a=>r.step(a)),i.forEach(a=>r.step(a))}function zp(r,e,t,n){let o=[],i=0;r.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;i++;let a=null;if(n instanceof oi){let d=s.marks,c;for(;c=n.isInSet(d);)(a||(a=[])).push(c),d=c.removeFromSet(d)}else n?n.isInSet(s.marks)&&(a=[n]):a=s.marks;if(a&&a.length){let d=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let u=a[c],f;for(let h=0;h<o.length;h++){let p=o[h];p.step==i-1&&u.eq(o[h].style)&&(f=p)}f?(f.to=d,f.step=i):o.push({style:u,from:Math.max(l,e),to:d,step:i})}}}),o.forEach(s=>r.step(new nn(s.from,s.to,s.style)))}function jp(r,e,t,n=t.contentMatch){let o=r.doc.nodeAt(e),i=[],s=e+1;for(let l=0;l<o.childCount;l++){let a=o.child(l),d=s+a.nodeSize,c=n.matchType(a.type);if(!c)i.push(new it(s,d,G.empty));else{n=c;for(let u=0;u<a.marks.length;u++)t.allowsMarkType(a.marks[u].type)||r.step(new nn(s,d,a.marks[u]));if(a.isText&&!t.spec.code){let u,f=/\r?\n|\r/g,h;for(;u=f.exec(a.text);)h||(h=new G(L.from(t.schema.text(" ",t.allowedMarks(a.marks))),0,0)),i.push(new it(s+u.index,s+u.index+u[0].length,h))}}s=d}if(!n.validEnd){let l=n.fillBefore(L.empty,!0);r.replace(s,s,new G(l,0,0))}for(let l=i.length-1;l>=0;l--)r.step(i[l])}function Up(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function Ar(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let o=r.$from.node(n),i=r.$from.index(n),s=r.$to.indexAfter(n);if(n<r.depth&&o.canReplace(i,s,t))return n;if(n==0||o.type.spec.isolating||!Up(o,i,s))break}return null}function Hp(r,e,t){let{$from:n,$to:o,depth:i}=e,s=n.before(i+1),l=o.after(i+1),a=s,d=l,c=L.empty,u=0;for(let p=i,g=!1;p>t;p--)g||n.index(p)>0?(g=!0,c=L.from(n.node(p).copy(c)),u++):a--;let f=L.empty,h=0;for(let p=i,g=!1;p>t;p--)g||o.after(p+1)<o.end(p)?(g=!0,f=L.from(o.node(p).copy(f)),h++):d++;r.step(new et(a,d,s,l,new G(c.append(f),u,h),c.size-u,!0))}function Ls(r,e,t=null,n=r){let o=Kp(r,e),i=o&&Wp(n,e);return i?o.map(ml).concat({type:e,attrs:t}).concat(i.map(ml)):null}function ml(r){return{type:r,attrs:null}}function Kp(r,e){let{parent:t,startIndex:n,endIndex:o}=r,i=t.contentMatchAt(n).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return t.canReplaceWith(n,o,s)?i:null}function Wp(r,e){let{parent:t,startIndex:n,endIndex:o}=r,i=t.child(n),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let d=n;a&&d<o;d++)a=a.matchType(t.child(d).type);return!a||!a.validEnd?null:s}function Gp(r,e,t){let n=L.empty;for(let s=t.length-1;s>=0;s--){if(n.size){let l=t[s].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=L.from(t[s].type.create(t[s].attrs,n))}let o=e.start,i=e.end;r.step(new et(o,i,o,i,new G(n,0,0),t.length,!0))}function Jp(r,e,t,n,o){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=r.steps.length;r.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(n,o)&&Yp(r.doc,r.mapping.slice(i).map(l),n)){r.clearIncompatible(r.mapping.slice(i).map(l,1),n);let a=r.mapping.slice(i),d=a.map(l,1),c=a.map(l+s.nodeSize,1);return r.step(new et(d,c,d+1,c-1,new G(L.from(n.create(o,null,s.marks)),0,0),1,!0)),!1}})}function Yp(r,e,t){let n=r.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,t)}function Xp(r,e,t,n,o){let i=r.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let s=t.create(n,null,o||i.marks);if(i.isLeaf)return r.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new et(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new G(L.from(s),0,0),1,!0))}function hr(r,e,t=1,n){let o=r.resolve(e),i=o.depth-t,s=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let d=o.depth-1,c=t-2;d>i;d--,c--){let u=o.node(d),f=o.index(d);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(f,u.childCount),p=n&&n[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=n&&n[c]||u;if(!u.canReplace(f+1,u.childCount)||!g.type.validContent(h))return!1}let l=o.indexAfter(i),a=n&&n[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function Qp(r,e,t=1,n){let o=r.doc.resolve(e),i=L.empty,s=L.empty;for(let l=o.depth,a=o.depth-t,d=t-1;l>a;l--,d--){i=L.from(o.node(l).copy(i));let c=n&&n[d];s=L.from(c?c.type.create(c.attrs,s):o.node(l).copy(s))}r.step(new it(e,e,new G(i.append(s),t,t),!0))}function Pn(r,e){let t=r.resolve(e),n=t.index();return ed(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function ed(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function ii(r,e,t=-1){let n=r.resolve(e);for(let o=n.depth;;o--){let i,s,l=n.index(o);if(o==n.depth?(i=n.nodeBefore,s=n.nodeAfter):t>0?(i=n.node(o+1),l++,s=n.node(o).maybeChild(l)):(i=n.node(o).maybeChild(l-1),s=n.node(o+1)),i&&!i.isTextblock&&ed(i,s)&&n.node(o).canReplace(l,l+1))return e;if(o==0)break;e=t<0?n.before(o):n.after(o)}}function Zp(r,e,t){let n=new it(e-t,e+t,G.empty,!0);r.step(n)}function _p(r,e,t){let n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let o=n.depth-1;o>=0;o--){let i=n.index(o);if(n.node(o).canReplaceWith(i,i,t))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let o=n.depth-1;o>=0;o--){let i=n.indexAfter(o);if(n.node(o).canReplaceWith(i,i,t))return n.after(o+1);if(i<n.node(o).childCount)return null}return null}function td(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let o=t.content;for(let i=0;i<t.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let s=n.depth;s>=0;s--){let l=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,a=n.index(s)+(l>0?1:0),d=n.node(s),c=!1;if(i==1)c=d.canReplace(a,a,o);else{let u=d.contentMatchAt(a).findWrapping(o.firstChild.type);c=u&&d.canReplaceWith(a,a,u[0])}if(c)return l==0?n.pos:l<0?n.before(s+1):n.after(s+1)}return null}function Fs(r,e,t=e,n=G.empty){if(e==t&&!n.size)return null;let o=r.resolve(e),i=r.resolve(t);return nd(o,i,n)?new it(e,t,n):new qp(o,i,n).fit()}function nd(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class qp{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=L.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=L.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;let i=this.placed,s=n.depth,l=o.depth;for(;s&&l&&i.childCount==1;)i=i.firstChild.content,s--,l--;let a=new G(i,s,l);return e>-1?new et(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new it(n.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,o=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(o=0),i.type.spec.isolating&&o<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let o,i=null;n?(i=ki(this.unplaced.content,n-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:d}=this.frontier[l],c,u=null;if(t==1&&(s?d.matchType(s.type)||(u=d.fillBefore(L.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:l,parent:i,inject:u};if(t==2&&s&&(c=d.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:l,parent:i,wrap:c};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=ki(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new G(e,t+1,Math.max(n,o.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=ki(e,t);if(o.childCount<=1&&t>0){let i=e.size-t<=t+o.size;this.unplaced=new G($r(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new G($r(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:o,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let s=this.unplaced,l=n?n.content:s.content,a=s.openStart-e,d=0,c=[],{match:u,type:f}=this.frontier[t];if(o){for(let g=0;g<o.childCount;g++)c.push(o.child(g));u=u.matchFragment(o)}let h=l.size+e-(s.content.size-s.openEnd);for(;d<l.childCount;){let g=l.child(d),v=u.matchType(g.type);if(!v)break;d++,(d>1||a==0||g.content.size)&&(u=v,c.push(rd(g.mark(f.allowedMarks(g.marks)),d==1?a:0,d==l.childCount?h:-1)))}let p=d==l.childCount;p||(h=-1),this.placed=Br(this.placed,t,L.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=p?e==0?G.empty:new G($r(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new G($r(s.content,e,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Di(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,o=this.$to.after(n);for(;n>1&&o==this.$to.end(--n);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:o}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Di(e,t,o,n,i);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:d}=this.frontier[l],c=Di(e,l,d,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Br(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let o=e.node(n),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(n));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,t=null,n){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Br(this.placed,this.depth,L.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(L.empty,!0);t.childCount&&(this.placed=Br(this.placed,this.frontier.length,t))}}function $r(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy($r(r.firstChild.content,e-1,t)))}function Br(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(Br(r.lastChild.content,e-1,t)))}function ki(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function rd(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,rd(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(L.empty,!0)))),r.copy(n)}function Di(r,e,t,n,o){let i=r.node(e),s=o?r.indexAfter(e):r.index(e);if(s==i.childCount&&!t.compatibleContent(i.type))return null;let l=n.fillBefore(i.content,!0,s);return l&&!em(t,i.content,s)?l:null}function em(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function tm(r){return r.spec.defining||r.spec.definingForContent}function nm(r,e,t,n){if(!n.size)return r.deleteRange(e,t);let o=r.doc.resolve(e),i=r.doc.resolve(t);if(nd(o,i,n))return r.step(new it(e,t,n));let s=id(o,r.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(o.depth+1);s.unshift(l);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let p=o.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?l=f:o.before(f)==h&&s.splice(1,0,-f)}let a=s.indexOf(l),d=[],c=n.openStart;for(let f=n.content,h=0;;h++){let p=f.firstChild;if(d.push(p),h==n.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=d[f],p=tm(h.type);if(p&&!h.sameMarkup(o.node(Math.abs(l)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let h=(f+c+1)%(n.openStart+1),p=d[h];if(p)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],b=!0;v<0&&(b=!1,v=-v);let S=o.node(v-1),C=o.index(v-1);if(S.canReplaceWith(C,C,p.type,p.marks))return r.replace(o.before(v),b?i.after(v):t,new G(od(n.content,0,n.openStart,h),h,n.openEnd))}}let u=r.steps.length;for(let f=s.length-1;f>=0&&(r.replace(e,t,n),!(r.steps.length>u));f--){let h=s[f];h<0||(e=o.before(h),t=i.after(h))}}function od(r,e,t,n,o){if(e<t){let i=r.firstChild;r=r.replaceChild(0,i.copy(od(i.content,e+1,t,n,i)))}if(e>n){let i=o.contentMatchAt(0),s=i.fillBefore(r).append(r);r=s.append(i.matchFragment(s).fillBefore(L.empty,!0))}return r}function rm(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let o=_p(r.doc,e,n.type);o!=null&&(e=t=o)}r.replaceRange(e,t,new G(L.from(n),0,0))}function om(r,e,t){let n=r.doc.resolve(e),o=r.doc.resolve(t),i=id(n,o);for(let s=0;s<i.length;s++){let l=i[s],a=s==i.length-1;if(a&&l==0||n.node(l).type.contentMatch.validEnd)return r.delete(n.start(l),o.end(l));if(l>0&&(a||n.node(l-1).canReplace(n.index(l-1),o.indexAfter(l-1))))return r.delete(n.before(l),o.after(l))}for(let s=1;s<=n.depth&&s<=o.depth;s++)if(e-n.start(s)==n.depth-s&&t>n.end(s)&&o.end(s)-t!=o.depth-s)return r.delete(n.before(s),t);r.delete(e,t)}function id(r,e){let t=[],n=Math.min(r.depth,e.depth);for(let o=n;o>=0;o--){let i=r.start(o);if(i<r.pos-(r.depth-o)||e.end(o)>e.pos+(e.depth-o)||r.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==r.depth&&o==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&t.push(o)}return t}class pr extends ft{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qe.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return Qe.fromReplace(e,this.pos,this.pos+1,new G(L.from(o),0,t.isLeaf?0:1))}getMap(){return Mt.empty}invert(e){return new pr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new pr(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new pr(t.pos,t.attr,t.value)}}ft.jsonID("attr",pr);class _r extends ft{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Qe.ok(n)}getMap(){return Mt.empty}invert(e){return new _r(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _r(t.attr,t.value)}}ft.jsonID("docAttr",_r);let yr=class extends Error{};yr=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};yr.prototype=Object.create(Error.prototype);yr.prototype.constructor=yr;yr.prototype.name="TransformError";class im{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new yr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=G.empty){let o=Fs(this.doc,e,t,n);return o&&this.step(o),this}replaceWith(e,t,n){return this.replace(e,t,new G(L.from(n),0,0))}delete(e,t){return this.replace(e,t,G.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return nm(this,e,t,n),this}replaceRangeWith(e,t,n){return rm(this,e,t,n),this}deleteRange(e,t){return om(this,e,t),this}lift(e,t){return Hp(this,e,t),this}join(e,t=1){return Zp(this,e,t),this}wrap(e,t){return Gp(this,e,t),this}setBlockType(e,t=e,n,o=null){return Jp(this,e,t,n,o),this}setNodeMarkup(e,t,n=null,o){return Xp(this,e,t,n,o),this}setNodeAttribute(e,t,n){return this.step(new pr(e,t,n)),this}setDocAttribute(e,t){return this.step(new _r(e,t)),this}addNodeMark(e,t){return this.step(new On(e,t)),this}removeNodeMark(e,t){if(!(t instanceof De)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new vr(e,t)),this}split(e,t=1,n){return Qp(this,e,t,n),this}addMark(e,t,n){return Vp(this,e,t,n),this}removeMark(e,t,n){return zp(this,e,t,n),this}clearIncompatible(e,t,n){return jp(this,e,t,n),this}}const Ii=Object.create(null);class be{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new sm(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=G.empty){let n=t.content.lastChild,o=null;for(let l=0;l<t.openEnd;l++)o=n,n=n.lastChild;let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:d}=s[l],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(d.pos),l?G.empty:t),l==0&&yl(e,i,(n?n.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:l}=o[i],a=e.mapping.slice(n),d=a.map(s.pos),c=a.map(l.pos);i?e.deleteRange(d,c):(e.replaceRangeWith(d,c,t),yl(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let o=e.parent.inlineContent?new ge(e):ir(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=t<0?ir(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):ir(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Yt(e.node(0))}static atStart(e){return ir(e,e,0,0,1)||new Yt(e)}static atEnd(e){return ir(e,e,e.content.size,e.childCount,-1)||new Yt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Ii[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Ii)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ii[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ge.between(this.$anchor,this.$head).getBookmark()}}be.prototype.visible=!0;class sm{constructor(e,t){this.$from=e,this.$to=t}}let gl=!1;function vl(r){!gl&&!r.parent.inlineContent&&(gl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class ge extends be{constructor(e,t=e){vl(e),vl(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return be.near(n);let o=e.resolve(t.map(this.anchor));return new ge(o.parent.inlineContent?o:n,n)}replace(e,t=G.empty){if(super.replace(e,t),t==G.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof ge&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new si(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ge(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))}static between(e,t,n){let o=e.pos-t.pos;if((!n||o)&&(n=o>=0?1:-1),!t.parent.inlineContent){let i=be.findFrom(t,n,!0)||be.findFrom(t,-n,!0);if(i)t=i.$head;else return be.near(t,n)}return e.parent.inlineContent||(o==0?e=t:(e=(be.findFrom(e,-n,!0)||be.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new ge(e,t)}}be.jsonID("text",ge);class si{constructor(e,t){this.anchor=e,this.head=t}map(e){return new si(e.map(this.anchor),e.map(this.head))}resolve(e){return ge.between(e.resolve(this.anchor),e.resolve(this.head))}}class re extends be{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:o}=t.mapResult(this.anchor),i=e.resolve(o);return n?be.near(i):new re(i)}content(){return new G(L.from(this.node),0,0)}eq(e){return e instanceof re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Vs(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new re(e.resolve(t.anchor))}static create(e,t){return new re(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}re.prototype.visible=!1;be.jsonID("node",re);class Vs{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new si(n,n):new Vs(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&re.isSelectable(n)?new re(t):be.near(t)}}class Yt extends be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=G.empty){if(t==G.empty){e.delete(0,e.doc.content.size);let n=be.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yt(e)}map(e){return new Yt(e)}eq(e){return e instanceof Yt}getBookmark(){return lm}}be.jsonID("all",Yt);const lm={map(){return this},resolve(r){return new Yt(r)}};function ir(r,e,t,n,o,i=!1){if(e.inlineContent)return ge.create(r,t);for(let s=n-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let l=e.child(s);if(l.isAtom){if(!i&&re.isSelectable(l))return re.create(r,t-(o<0?l.nodeSize:0))}else{let a=ir(r,l,t+o,o<0?l.childCount:0,o,i);if(a)return a}t+=l.nodeSize*o}return null}function yl(r,e,t){let n=r.steps.length-1;if(n<e)return;let o=r.steps[n];if(!(o instanceof it||o instanceof et))return;let i=r.mapping.maps[n],s;i.forEach((l,a,d,c)=>{s==null&&(s=c)}),r.setSelection(be.near(r.doc.resolve(s),t))}const bl=1,mo=2,xl=4;class am extends im{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|bl)&~mo,this.storedMarks=null,this}get selectionSet(){return(this.updated&bl)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=mo,this}ensureMarks(e){return De.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&mo)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~mo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||De.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let s=this.doc.resolve(t);i=n==t?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,i)),this.selection.empty||this.setSelection(be.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=xl,this}get scrolledIntoView(){return(this.updated&xl)>0}}function Sl(r,e){return!e||!r?r:r.bind(e)}class Lr{constructor(e,t,n){this.name=e,this.init=Sl(t.init,n),this.apply=Sl(t.apply,n)}}const dm=[new Lr("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new Lr("selection",{init(r,e){return r.selection||be.atStart(e.doc)},apply(r){return r.selection}}),new Lr("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new Lr("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class Ni{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=dm.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Lr(n.key,n.spec.state,n))})}}class dr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=o?o[s].n:0,d=o?o[s].state:this,c=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,d,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<s?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}o&&(o[s]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new dr(this.config),n=this.config.fields;for(let o=0;o<n.length;o++){let i=n[o];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new am(this)}static create(e){let t=new Ni(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new dr(t);for(let o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n}reconfigure(e){let t=new Ni(this.schema,e.plugins),n=t.fields,o=new dr(t);for(let i=0;i<n.length;i++){let s=n[i].name;o[s]=this.hasOwnProperty(s)?this[s]:n[i].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[n],i=o.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Ni(e.schema,e.plugins),i=new dr(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Gn.fromJSON(e.schema,t.doc);else if(s.name=="selection")i.selection=be.fromJSON(i.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let a=n[l],d=a.spec.state;if(a.key==s.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){i[s.name]=d.fromJSON.call(a,e,t[l],i);return}}i[s.name]=s.init(e,i)}}),i}}function sd(r,e,t){for(let n in r){let o=r[n];o instanceof Function?o=o.bind(e):n=="handleDOMEvents"&&(o=sd(o,e,{})),t[n]=o}return t}class Lt{constructor(e){this.spec=e,this.props={},e.props&&sd(e.props,this,this.props),this.key=e.key?e.key.key:ld("plugin")}getState(e){return e[this.key]}}const Pi=Object.create(null);function ld(r){return r in Pi?r+"$"+ ++Pi[r]:(Pi[r]=0,r+"$")}class Rn{constructor(e="key"){this.key=ld(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const pt=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},qr=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let Cl=null;const un=function(r,e,t){let n=Cl||(Cl=document.createRange());return n.setEnd(r,t??r.nodeValue.length),n.setStart(r,e||0),n},Zn=function(r,e,t,n){return t&&(El(r,e,t,n,-1)||El(r,e,t,n,1))},cm=/^(img|br|input|textarea|hr)$/i;function El(r,e,t,n,o){for(;;){if(r==t&&e==n)return!0;if(e==(o<0?0:en(r))){let i=r.parentNode;if(!i||i.nodeType!=1||zs(r)||cm.test(r.nodeName)||r.contentEditable=="false")return!1;e=pt(r)+(o<0?0:1),r=i}else if(r.nodeType==1){if(r=r.childNodes[e+(o<0?-1:0)],r.contentEditable=="false")return!1;e=o<0?en(r):0}else return!1}}function en(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function um(r,e,t){for(let n=e==0,o=e==en(r);n||o;){if(r==t)return!0;let i=pt(r);if(r=r.parentNode,!r)return!1;n=n&&i==0,o=o&&i==en(r)}}function zs(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const li=function(r){return r.focusNode&&Zn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function zn(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function fm(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hm(r,e,t){if(r.caretPositionFromPoint)try{let n=r.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:n.offset}}catch{}if(r.caretRangeFromPoint){let n=r.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:n.startOffset}}}const sn=typeof navigator<"u"?navigator:null,Al=typeof document<"u"?document:null,$n=sn&&sn.userAgent||"",cs=/Edge\/(\d+)/.exec($n),ad=/MSIE \d/.exec($n),us=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($n),Ct=!!(ad||us||cs),wn=ad?document.documentMode:us?+us[1]:cs?+cs[1]:0,Xt=!Ct&&/gecko\/(\d+)/i.test($n);Xt&&+(/Firefox\/(\d+)/.exec($n)||[0,0])[1];const fs=!Ct&&/Chrome\/(\d+)/.exec($n),dt=!!fs,pm=fs?+fs[1]:0,mt=!Ct&&!!sn&&/Apple Computer/.test(sn.vendor),br=mt&&(/Mobile\/\w+/.test($n)||!!sn&&sn.maxTouchPoints>2),Nt=br||(sn?/Mac/.test(sn.platform):!1),mm=sn?/Win/.test(sn.platform):!1,Wt=/Android \d/.test($n),so=!!Al&&"webkitFontSmoothing"in Al.documentElement.style,gm=so?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function vm(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function cn(r,e){return typeof r=="number"?r:r[e]}function ym(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function Ol(r,e,t){let n=r.someProp("scrollThreshold")||0,o=r.someProp("scrollMargin")||5,i=r.dom.ownerDocument;for(let s=t||r.dom;s;s=qr(s)){if(s.nodeType!=1)continue;let l=s,a=l==i.body,d=a?vm(i):ym(l),c=0,u=0;if(e.top<d.top+cn(n,"top")?u=-(d.top-e.top+cn(o,"top")):e.bottom>d.bottom-cn(n,"bottom")&&(u=e.bottom-e.top>d.bottom-d.top?e.top+cn(o,"top")-d.top:e.bottom-d.bottom+cn(o,"bottom")),e.left<d.left+cn(n,"left")?c=-(d.left-e.left+cn(o,"left")):e.right>d.right-cn(n,"right")&&(c=e.right-d.right+cn(o,"right")),c||u)if(a)i.defaultView.scrollBy(c,u);else{let f=l.scrollLeft,h=l.scrollTop;u&&(l.scrollTop+=u),c&&(l.scrollLeft+=c);let p=l.scrollLeft-f,g=l.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function bm(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,o;for(let i=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=r.root.elementFromPoint(i,s);if(!l||l==r.dom||!r.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){n=l,o=a.top;break}}return{refDOM:n,refTop:o,stack:dd(r.dom)}}function dd(r){let e=[],t=r.ownerDocument;for(let n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=qr(n));return e}function xm({refDOM:r,refTop:e,stack:t}){let n=r?r.getBoundingClientRect().top:0;cd(t,n==0?0:n-e)}function cd(r,e){for(let t=0;t<r.length;t++){let{dom:n,top:o,left:i}=r[t];n.scrollTop!=o+e&&(n.scrollTop=o+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let er=null;function Sm(r){if(r.setActive)return r.setActive();if(er)return r.focus(er);let e=dd(r);r.focus(er==null?{get preventScroll(){return er={preventScroll:!0},!0}}:void 0),er||(er=!1,cd(e,0))}function ud(r,e){let t,n=2e8,o,i=0,s=e.top,l=e.top,a,d;for(let c=r.firstChild,u=0;c;c=c.nextSibling,u++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=un(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=l){s=Math.max(p.bottom,s),l=Math.min(p.top,l);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<n){t=c,n=g,o=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&g&&(i=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,d={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=u+1)}}return!t&&a&&(t=a,o=d,n=0),t&&t.nodeType==3?Cm(t,o):!t||n&&t.nodeType==1?{node:r,offset:i}:ud(t,o)}function Cm(r,e){let t=r.nodeValue.length,n=document.createRange();for(let o=0;o<t;o++){n.setEnd(r,o+1),n.setStart(r,o);let i=yn(n,1);if(i.top!=i.bottom&&js(e,i))return{node:r,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:r,offset:0}}function js(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function Em(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function Am(r,e,t){let{node:n,offset:o}=ud(e,t),i=-1;if(n.nodeType==1&&!n.firstChild){let s=n.getBoundingClientRect();i=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return r.docView.posFromDOM(n,o,i)}function Om(r,e,t,n){let o=-1;for(let i=e,s=!1;i!=r.dom;){let l=r.docView.nearestDesc(i,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent&&!s||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&!s&&(s=!0,a.left>n.left||a.top>n.top?o=l.posBefore:(a.right<n.left||a.bottom<n.top)&&(o=l.posAfter)),!l.contentDOM&&o<0&&!l.node.isText)return(l.node.isBlock?n.top<(a.top+a.bottom)/2:n.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}i=l.dom.parentNode}return o>-1?o:r.docView.posFromDOM(e,t,-1)}function fd(r,e,t){let n=r.childNodes.length;if(n&&t.top<t.bottom)for(let o=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),i=o;;){let s=r.childNodes[i];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let d=l[a];if(js(e,d))return fd(s,e,d)}}if((i=(i+1)%n)==o)break}return r}function Tm(r,e){let t=r.dom.ownerDocument,n,o=0,i=hm(t,e.left,e.top);i&&({node:n,offset:o}=i);let s=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),l;if(!s||!r.dom.contains(s.nodeType!=1?s.parentNode:s)){let d=r.dom.getBoundingClientRect();if(!js(e,d)||(s=fd(r.dom,e,d),!s))return null}if(mt)for(let d=s;n&&d;d=qr(d))d.draggable&&(n=void 0);if(s=Em(s,e),n){if(Xt&&n.nodeType==1&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let c=n.childNodes[o],u;c.nodeName=="IMG"&&(u=c.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let d;so&&o&&n.nodeType==1&&(d=n.childNodes[o-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&o--,n==r.dom&&o==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?l=r.state.doc.content.size:(o==0||n.nodeType!=1||n.childNodes[o-1].nodeName!="BR")&&(l=Om(r,n,o,e))}l==null&&(l=Am(r,s,e));let a=r.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Tl(r){return r.top<r.bottom||r.left<r.right}function yn(r,e){let t=r.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(Tl(n))return n}return Array.prototype.find.call(t,Tl)||r.getBoundingClientRect()}const Mm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function hd(r,e,t){let{node:n,offset:o,atom:i}=r.docView.domFromPos(e,t<0?-1:1),s=so||Xt;if(n.nodeType==3)if(s&&(Mm.test(n.nodeValue)||(t<0?!o:o==n.nodeValue.length))){let a=yn(un(n,o,o),t);if(Xt&&o&&/\s/.test(n.nodeValue[o-1])&&o<n.nodeValue.length){let d=yn(un(n,o-1,o-1),-1);if(d.top==a.top){let c=yn(un(n,o,o+1),-1);if(c.top!=a.top)return Ir(c,c.left<d.left)}}return a}else{let a=o,d=o,c=t<0?1:-1;return t<0&&!o?(d++,c=-1):t>=0&&o==n.nodeValue.length?(a--,c=1):t<0?a--:d++,Ir(yn(un(n,a,d),c),c<0)}if(!r.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(t<0||o==en(n))){let a=n.childNodes[o-1];if(a.nodeType==1)return Ri(a.getBoundingClientRect(),!1)}if(i==null&&o<en(n)){let a=n.childNodes[o];if(a.nodeType==1)return Ri(a.getBoundingClientRect(),!0)}return Ri(n.getBoundingClientRect(),t>=0)}if(i==null&&o&&(t<0||o==en(n))){let a=n.childNodes[o-1],d=a.nodeType==3?un(a,en(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(d)return Ir(yn(d,1),!1)}if(i==null&&o<en(n)){let a=n.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let d=a?a.nodeType==3?un(a,0,s?0:1):a.nodeType==1?a:null:null;if(d)return Ir(yn(d,-1),!0)}return Ir(yn(n.nodeType==3?un(n):n,-t),t>=0)}function Ir(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function Ri(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function pd(r,e,t){let n=r.state,o=r.root.activeElement;n!=e&&r.updateState(e),o!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),o!=r.dom&&o&&o.focus()}}function wm(r,e,t){let n=e.selection,o=t=="up"?n.$from:n.$to;return pd(r,e,()=>{let{node:i}=r.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let l=r.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let s=hd(r,o.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=un(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<a.length;d++){let c=a[d];if(c.bottom>c.top+1&&(t=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const km=/[\u0590-\u08ac]/;function Dm(r,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let o=n.parentOffset,i=!o,s=o==n.parent.content.size,l=r.domSelection();return!km.test(n.parent.textContent)||!l.modify?t=="left"||t=="backward"?i:s:pd(r,e,()=>{let{focusNode:a,focusOffset:d,anchorNode:c,anchorOffset:u}=r.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let h=n.depth?r.docView.domAfterPos(n.before()):r.dom,{focusNode:p,focusOffset:g}=r.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&d==g;try{l.collapse(c,u),a&&(a!=c||d!=u)&&l.extend&&l.extend(a,d)}catch{}return f!=null&&(l.caretBidiLevel=f),v})}let Ml=null,wl=null,kl=!1;function Im(r,e,t){return Ml==e&&wl==t?kl:(Ml=e,wl=t,kl=t=="up"||t=="down"?wm(r,e,t):Dm(r,e,t))}const $t=0,Dl=1,jn=2,ln=3;class lo{constructor(e,t,n,o){this.parent=e,this.children=t,this.dom=n,this.contentDOM=o,this.dirty=$t,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let o=this.children[t];if(o==e)return n;n+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,s;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>pt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!t||i.node))if(n&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))n=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let o=this.children[t],i=n+o.size;if(n==e&&i!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<i)return o.descAt(e-n-o.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,o=0;for(let i=0;n<this.children.length;n++){let s=this.children[n],l=i+s.size;if(l>e||s instanceof gd){o=e-i;break}i=l}if(o)return this.children[n].domFromPos(o-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof md&&i.side>=0;n--);if(t<=0){let i,s=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,s=!1);return i&&t&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?pt(i.dom)+1:0}}else{let i,s=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?pt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=n,l=0;;l++){let a=this.children[l],d=s+a.size;if(o==-1&&e<=d){let c=s+a.border;if(e>=c&&t<=d-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let u=l;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=pt(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(d>t||l==this.children.length-1)){t=d;for(let c=l+1;c<this.children.length;c++){let u=this.children[c];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){i=pt(u.dom);break}t+=u.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=d}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,o=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],g=h+p.size;if(i>h&&s<g)return p.setSelection(e-h-p.border,t-h-p.border,n,o);h=g}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),d=n.getSelection(),c=!1;if((Xt||mt)&&e==t){let{node:f,offset:h}=l;if(f.nodeType==3){if(c=!!(h&&f.nodeValue[h-1]==`
`),c&&h==f.nodeValue.length)for(let p=f,g;p;p=p.parentNode){if(g=p.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:pt(g)+1});break}let v=p.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let p=f.childNodes[h-1];c=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Xt&&d.focusNode&&d.focusNode!=a.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||c&&mt)&&Zn(l.node,l.offset,d.anchorNode,d.anchorOffset)&&Zn(a.node,a.offset,d.focusNode,d.focusOffset))return;let u=!1;if((d.extend||e==t)&&!c){d.collapse(l.node,l.offset);try{e!=t&&d.extend(a.node,a.offset),u=!0}catch{}}if(!u){if(e>t){let h=l;l=a,a=h}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,o=0;o<this.children.length;o++){let i=this.children[o],s=n+i.size;if(n==s?e<=s&&t>=n:e<s&&t>n){let l=n+i.border,a=s-i.border;if(e>=l&&t<=a){this.dirty=e==n||t==s?jn:Dl,e==l&&t==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=ln:i.markDirty(e-l,t-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?jn:ln}n=s}this.dirty=jn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?jn:Dl;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class md extends lo{constructor(e,t,n,o){let i,s=t.type.toDOM;if(typeof s=="function"&&(s=s(n,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==$t&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Nm extends lo{constructor(e,t,n,o){super(e,[],t,null),this.textDOM=n,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _n extends lo{constructor(e,t,n,o){super(e,[],n,o),this.mark=t}static create(e,t,n,o){let i=o.nodeViews[t.type.name],s=i&&i(t,o,n);return(!s||!s.dom)&&(s=tn.renderSpec(document,t.type.spec.toDOM(t,n))),new _n(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&ln||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ln&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=$t){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=$t}}slice(e,t,n){let o=_n.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;t<s&&(i=ms(i,t,s,n)),e>0&&(i=ms(i,0,e,n));for(let l=0;l<i.length;l++)i[l].parent=o;return o.children=i,o}}class kn extends lo{constructor(e,t,n,o,i,s,l,a,d){super(e,[],i,s),this.node=t,this.outerDeco=n,this.innerDeco=o,this.nodeDOM=l}static create(e,t,n,o,i,s){let l=i.nodeViews[t.type.name],a,d=l&&l(t,i,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},n,o),c=d&&d.dom,u=d&&d.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:u}=tn.renderSpec(document,t.type.spec.toDOM(t)));!u&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let f=c;return c=bd(c,n,t),d?a=new Pm(e,t,n,o,c,u||null,f,d,i,s+1):t.isText?new ai(e,t,n,o,c,f,i):new kn(e,t,n,o,c,u||null,f,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,t,n){return this.dirty==$t&&e.eq(this.node)&&ps(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new $m(this,s&&s.node,e);Fm(this.node,this.innerDeco,(d,c,u)=>{d.spec.marks?a.syncToMarks(d.spec.marks,n,e):d.type.side>=0&&!u&&a.syncToMarks(c==this.node.childCount?De.none:this.node.child(c).marks,n,e),a.placeWidget(d,e,o)},(d,c,u,f)=>{a.syncToMarks(d.marks,n,e);let h;a.findNodeMatch(d,c,u,f)||l&&e.state.selection.from>o&&e.state.selection.to<o+d.nodeSize&&(h=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(d,c,u,h,e)||a.updateNextNode(d,c,u,e,f,o)||a.addNode(d,c,u,e,o),o+=d.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==jn)&&(s&&this.protectLocalComposition(e,s),vd(this.contentDOM,this.children,e),br&&Vm(this.dom))}localCompositionInfo(e,t){let{from:n,to:o}=e.state.selection;if(!(e.state.selection instanceof ge)||n<t||o>t+this.node.content.size)return null;let i=e.domSelectionRange(),s=zm(i.focusNode,i.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,a=jm(this.node.content,l,n-t,o-t);return a<0?null:{node:s,pos:a,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:o}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new Nm(this,i,t,o);e.input.compositionNodes.push(s),this.children=ms(this.children,n,n+o.length,e,s)}update(e,t,n,o){return this.dirty==ln||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,o),!0)}updateInner(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=$t}updateOuterDeco(e){if(ps(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=yd(this.dom,this.nodeDOM,hs(this.outerDeco,this.node,t),hs(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Il(r,e,t,n,o){bd(n,e,r);let i=new kn(void 0,r,e,t,n,n,n,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class ai extends kn{constructor(e,t,n,o,i,s,l){super(e,t,n,o,i,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,o){return this.dirty==ln||this.dirty!=$t&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=$t||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=$t,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let o=this.node.cut(e,t),i=document.createTextNode(o.text);return new ai(this.parent,o,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ln)}get domAtom(){return!1}}class gd extends lo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$t&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Pm extends kn{constructor(e,t,n,o,i,s,l,a,d,c){super(e,t,n,o,i,s,l,d,c),this.spec=a}update(e,t,n,o){if(this.dirty==ln)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,o){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function vd(r,e,t){let n=r.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],l=s.dom;if(l.parentNode==r){for(;l!=n;)n=Nl(n),o=!0;n=n.nextSibling}else o=!0,r.insertBefore(l,n);if(s instanceof _n){let a=n?n.previousSibling:r.lastChild;vd(s.contentDOM,s.children,t),n=a?a.nextSibling:r.firstChild}}for(;n;)n=Nl(n),o=!0;o&&t.trackWrites==r&&(t.trackWrites=null)}const Kr=function(r){r&&(this.nodeName=r)};Kr.prototype=Object.create(null);const Un=[new Kr];function hs(r,e,t){if(r.length==0)return Un;let n=t?Un[0]:new Kr,o=[n];for(let i=0;i<r.length;i++){let s=r[i].type.attrs;if(s){s.nodeName&&o.push(n=new Kr(s.nodeName));for(let l in s){let a=s[l];a!=null&&(t&&o.length==1&&o.push(n=new Kr(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+a:l=="style"?n.style=(n.style?n.style+";":"")+a:l!="nodeName"&&(n[l]=a))}}}return o}function yd(r,e,t,n){if(t==Un&&n==Un)return e;let o=e;for(let i=0;i<n.length;i++){let s=n[i],l=t[i];if(i){let a;l&&l.nodeName==s.nodeName&&o!=r&&(a=o.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(o),l=Un[0]),o=a}Rm(o,l||Un[0],s)}return o}function Rm(r,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&r.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)o.indexOf(n[i])==-1&&r.classList.remove(n[i]);for(let i=0;i<o.length;i++)n.indexOf(o[i])==-1&&r.classList.add(o[i]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=n.exec(e.style);)r.style.removeProperty(o[1])}t.style&&(r.style.cssText+=t.style)}}function bd(r,e,t){return yd(r,r,Un,hs(e,t,r.nodeType!=1))}function ps(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function Nl(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class $m{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Bm(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=$t,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let d=this.top.children[a];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=_n.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,n))i=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let d=this.top.children[l];if(d.matchesNode(e,t,n)&&!this.preMatch.matched.has(d)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,o,i){let s=this.top.children[o];return s.dirty==ln&&s.dom==s.contentDOM&&(s.dirty=jn),s.update(e,t,n,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==n)return o}return-1}e=t}}updateNextNode(e,t,n,o,i,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof kn){let d=this.preMatch.matched.get(a);if(d!=null&&d!=i)return!1;let c=a.dom,u,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=ln&&ps(t,a.outerDeco));if(!f&&a.update(e,t,n,o))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(a,e,t,n,o,s)))return this.top.children[this.index]=u,u.contentDOM&&(u.dirty=jn,u.updateChildren(o,s+1),u.dirty=$t),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,o,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let l=kn.create(this.top,t,n,o,i,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,t,n,o,i){let s=kn.create(this.top,e,t,n,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,n){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new md(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof _n;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ai)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mt||dt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let o=new gd(this.top,[],n,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Bm(r,e){let t=e,n=t.children.length,o=r.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(n){let d=t.children[n-1];if(d instanceof _n)t=d,n=d.children.length;else{l=d,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=r.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}function Lm(r,e){return r.type.side-e.type.side}function Fm(r,e,t,n){let o=e.locals(r),i=0;if(o.length==0){for(let d=0;d<r.childCount;d++){let c=r.child(d);n(c,o,e.forChild(i,c),d),i+=c.nodeSize}return}let s=0,l=[],a=null;for(let d=0;;){let c,u;for(;s<o.length&&o[s].to==i;){let v=o[s++];v.widget&&(c?(u||(u=[c])).push(v):c=v)}if(c)if(u){u.sort(Lm);for(let v=0;v<u.length;v++)t(u[v],d,!!a)}else t(c,d,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(d<r.childCount)h=d,f=r.child(d++);else break;for(let v=0;v<l.length;v++)l[v].to<=i&&l.splice(v--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let p=i+f.nodeSize;if(f.isText){let v=p;s<o.length&&o[s].from<v&&(v=o[s].from);for(let b=0;b<l.length;b++)l[b].to<v&&(v=l[b].to);v<p&&(a=f.cut(v-i),f=f.cut(0,v-i),p=v,h=-1)}let g=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();n(f,g,e.forChild(i,f),h),i=p}}function Vm(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function zm(r,e){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0){if(r.childNodes.length>e&&r.childNodes[e].nodeType==3)return r.childNodes[e];r=r.childNodes[e-1],e=en(r)}else if(r.nodeType==1&&e<r.childNodes.length)r=r.childNodes[e],e=0;else return null}}function jm(r,e,t,n){for(let o=0,i=0;o<r.childCount&&i<=n;){let s=r.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<r.childCount;){let d=r.child(o++);if(i+=d.nodeSize,!d.isText)break;a+=d.text}if(i>=t){if(i>=n&&a.slice(n-e.length-l,n-l)==e)return n-e.length;let d=l<n?a.lastIndexOf(e,n-l-1):-1;if(d>=0&&d+e.length+l>=t)return l+d;if(t==n&&a.length>=n+e.length-l&&a.slice(n-l,n-l+e.length)==e)return n}}return-1}function ms(r,e,t,n,o){let i=[];for(let s=0,l=0;s<r.length;s++){let a=r[s],d=l,c=l+=a.size;d>=t||c<=e?i.push(a):(d<e&&i.push(a.slice(0,e-d,n)),o&&(i.push(o),o=void 0),c>t&&i.push(a.slice(t-d,a.size,n)))}return i}function Us(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let o=r.docView.nearestDesc(t.focusNode),i=o&&o.size==0,s=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=n.resolve(s),a,d;if(li(t)){for(a=l;o&&!o.node;)o=o.parent;let c=o.node;if(o&&c.isAtom&&re.isSelectable(c)&&o.parent&&!(c.isInline&&um(t.focusNode,t.focusOffset,o.dom))){let u=o.posBefore;d=new re(s==u?l:n.resolve(u))}}else{let c=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;a=n.resolve(c)}if(!d){let c=e=="pointer"||r.state.selection.head<l.pos&&!i?1:-1;d=Hs(r,a,l,c)}return d}function xd(r){return r.editable?r.hasFocus():Cd(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function fn(r,e=!1){let t=r.state.selection;if(Sd(r,t),!!xd(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&dt){let n=r.domSelectionRange(),o=r.domObserver.currentSelection;if(n.anchorNode&&o.anchorNode&&Zn(n.anchorNode,n.anchorOffset,o.anchorNode,o.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)Hm(r);else{let{anchor:n,head:o}=t,i,s;Pl&&!(t instanceof ge)&&(t.$from.parent.inlineContent||(i=Rl(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=Rl(r,t.to))),r.docView.setSelection(n,o,r.root,e),Pl&&(i&&$l(i),s&&$l(s)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Um(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const Pl=mt||dt&&pm<63;function Rl(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),o=n<t.childNodes.length?t.childNodes[n]:null,i=n?t.childNodes[n-1]:null;if(mt&&o&&o.contentEditable=="false")return $i(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return $i(o);if(i)return $i(i)}}function $i(r){return r.contentEditable="true",mt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function $l(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Um(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!xd(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function Hm(r){let e=r.domSelection(),t=document.createRange(),n=r.cursorWrapper.dom,o=n.nodeName=="IMG";o?t.setEnd(n.parentNode,pt(n)+1):t.setEnd(n,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!o&&!r.state.selection.visible&&Ct&&wn<=11&&(n.disabled=!0,n.disabled=!1)}function Sd(r,e){if(e instanceof re){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(Bl(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else Bl(r)}function Bl(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function Hs(r,e,t,n){return r.someProp("createSelectionBetween",o=>o(r,e,t))||ge.between(e,t,n)}function Ll(r){return r.editable&&!r.hasFocus()?!1:Cd(r)}function Cd(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Km(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return Zn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function gs(r,e){let{$anchor:t,$head:n}=r.selection,o=e>0?t.max(n):t.min(n),i=o.parent.inlineContent?o.depth?r.doc.resolve(e>0?o.after():o.before()):null:o;return i&&be.findFrom(i,e)}function bn(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function Fl(r,e,t){let n=r.state.selection;if(n instanceof ge)if(t.indexOf("s")>-1){let{$head:o}=n,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=r.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return bn(r,new ge(n.$anchor,s))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let o=gs(r.state,e);return o&&o instanceof re?bn(r,o):!1}else if(!(Nt&&t.indexOf("m")>-1)){let o=n.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let l=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=r.docView.descAt(l))&&!s.contentDOM?re.isSelectable(i)?bn(r,new re(e<0?r.state.doc.resolve(o.pos-i.nodeSize):o)):so?bn(r,new ge(r.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof re&&n.node.isInline)return bn(r,new ge(e>0?n.$to:n.$from));{let o=gs(r.state,e);return o?bn(r,o):!1}}}function Uo(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Wr(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function tr(r,e){return e<0?Wm(r):Gm(r)}function Wm(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let o,i,s=!1;for(Xt&&t.nodeType==1&&n<Uo(t)&&Wr(t.childNodes[n],-1)&&(s=!0);;)if(n>0){if(t.nodeType!=1)break;{let l=t.childNodes[n-1];if(Wr(l,-1))o=t,i=--n;else if(l.nodeType==3)t=l,n=t.nodeValue.length;else break}}else{if(Ed(t))break;{let l=t.previousSibling;for(;l&&Wr(l,-1);)o=t.parentNode,i=pt(l),l=l.previousSibling;if(l)t=l,n=Uo(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}s?vs(r,t,n):o&&vs(r,o,i)}function Gm(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let o=Uo(t),i,s;for(;;)if(n<o){if(t.nodeType!=1)break;let l=t.childNodes[n];if(Wr(l,1))i=t,s=++n;else break}else{if(Ed(t))break;{let l=t.nextSibling;for(;l&&Wr(l,1);)i=l.parentNode,s=pt(l)+1,l=l.nextSibling;if(l)t=l,n=0,o=Uo(t);else{if(t=t.parentNode,t==r.dom)break;n=o=0}}}i&&vs(r,i,s)}function Ed(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function Jm(r,e){for(;r&&e==r.childNodes.length&&!zs(r);)e=pt(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function Ym(r,e){for(;r&&!e&&!zs(r);)e=pt(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function vs(r,e,t){if(e.nodeType!=3){let i,s;(s=Jm(e,t))?(e=s,t=0):(i=Ym(e,t))&&(e=i,t=i.nodeValue.length)}let n=r.domSelection();if(li(n)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:o}=r;setTimeout(()=>{r.state==o&&fn(r)},50)}function Vl(r,e){let t=r.state.doc.resolve(e);if(!(dt||mm)&&t.parent.inlineContent){let o=r.coordsAtPos(e);if(e>t.start()){let i=r.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<t.end()){let i=r.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function zl(r,e,t){let n=r.state.selection;if(n instanceof ge&&!n.empty||t.indexOf("s")>-1||Nt&&t.indexOf("m")>-1)return!1;let{$from:o,$to:i}=n;if(!o.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let s=gs(r.state,e);if(s&&s instanceof re)return bn(r,s)}if(!o.parent.inlineContent){let s=e<0?o:i,l=n instanceof Yt?be.near(s,e):be.findFrom(s,e);return l?bn(r,l):!1}return!1}function jl(r,e){if(!(r.state.selection instanceof ge))return!0;let{$head:t,$anchor:n,empty:o}=r.state.selection;if(!t.sameParent(n))return!0;if(!o)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let s=r.state.tr;return e<0?s.delete(t.pos-i.nodeSize,t.pos):s.delete(t.pos,t.pos+i.nodeSize),r.dispatch(s),!0}return!1}function Ul(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function Xm(r){if(!mt||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Ul(r,n,"true"),setTimeout(()=>Ul(r,n,"false"),20)}return!1}function Qm(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function Zm(r,e){let t=e.keyCode,n=Qm(e);if(t==8||Nt&&t==72&&n=="c")return jl(r,-1)||tr(r,-1);if(t==46&&!e.shiftKey||Nt&&t==68&&n=="c")return jl(r,1)||tr(r,1);if(t==13||t==27)return!0;if(t==37||Nt&&t==66&&n=="c"){let o=t==37?Vl(r,r.state.selection.from)=="ltr"?-1:1:-1;return Fl(r,o,n)||tr(r,o)}else if(t==39||Nt&&t==70&&n=="c"){let o=t==39?Vl(r,r.state.selection.from)=="ltr"?1:-1:1;return Fl(r,o,n)||tr(r,o)}else{if(t==38||Nt&&t==80&&n=="c")return zl(r,-1,n)||tr(r,-1);if(t==40||Nt&&t==78&&n=="c")return Xm(r)||zl(r,1,n)||tr(r,1);if(n==(Nt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Ad(r,e){r.someProp("transformCopied",h=>{e=h(e,r)});let t=[],{content:n,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){o--,i--;let h=n.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),n=h.content}let s=r.someProp("clipboardSerializer")||tn.fromSchema(r.state.schema),l=Dd(),a=l.createElement("div");a.appendChild(s.serializeFragment(n,{document:l}));let d=a.firstChild,c,u=0;for(;d&&d.nodeType==1&&(c=kd[d.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),u++}d=a.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${o} ${i}${u?` -${u}`:""} ${JSON.stringify(t)}`);let f=r.someProp("clipboardTextSerializer",h=>h(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f}}function Od(r,e,t,n,o){let i=o.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(n||i||!t);if(a){if(r.someProp("transformPastedText",f=>{e=f(e,i||n,r)}),i)return e?new G(L.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):G.empty;let u=r.someProp("clipboardTextParser",f=>f(e,o,n,r));if(u)l=u;else{let f=o.marks(),{schema:h}=r.state,p=tn.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(p.serializeNode(h.text(g,f)))})}}else r.someProp("transformPastedHTML",u=>{t=u(t,r)}),s=eg(t),so&&tg(s);let d=s&&s.querySelector("[data-pm-slice]"),c=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let u=+c[3];u>0;u--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(r.someProp("clipboardParser")||r.someProp("domParser")||gr.fromSchema(r.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!_m.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=ng(Hl(l,+c[1],+c[2]),c[4]);else if(l=G.maxOpen(qm(l.content,o),!0),l.openStart||l.openEnd){let u=0,f=0;for(let h=l.content.firstChild;u<l.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Hl(l,u,f)}return r.someProp("transformPasted",u=>{l=u(l,r)}),l}const _m=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qm(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),i,s=[];if(r.forEach(l=>{if(!s)return;let a=o.findWrapping(l.type),d;if(!a)return s=null;if(d=s.length&&i.length&&Md(a,i,l,s[s.length-1],0))s[s.length-1]=d;else{s.length&&(s[s.length-1]=wd(s[s.length-1],i.length));let c=Td(l,a);s.push(c),o=o.matchType(c.type),i=a}}),s)return L.from(s)}return r}function Td(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,L.from(r));return r}function Md(r,e,t,n,o){if(o<r.length&&o<e.length&&r[o]==e[o]){let i=Md(r,e,t,n.lastChild,o+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(o==r.length-1?t.type:r[o+1]))return n.copy(n.content.append(L.from(Td(t,r,o+1))))}}function wd(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,wd(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(L.empty,!0);return r.copy(t.append(n))}function ys(r,e,t,n,o,i){let s=e<0?r.firstChild:r.lastChild,l=s.content;return r.childCount>1&&(i=0),o<n-1&&(l=ys(l,e,t,n,o+1,i)),o>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,i<=o).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(L.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,s.copy(l))}function Hl(r,e,t){return e<r.openStart&&(r=new G(ys(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new G(ys(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const kd={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Kl=null;function Dd(){return Kl||(Kl=document.implementation.createHTMLDocument("title"))}function eg(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=Dd().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),o;if((o=n&&kd[n[1].toLowerCase()])&&(r=o.map(i=>"<"+i+">").join("")+r+o.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=r,o)for(let i=0;i<o.length;i++)t=t.querySelector(o[i])||t;return t}function tg(r){let e=r.querySelectorAll(dt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function ng(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:o,openStart:i,openEnd:s}=r;for(let l=n.length-2;l>=0;l-=2){let a=t.nodes[n[l]];if(!a||a.hasRequiredAttrs())break;o=L.from(a.create(n[l+1],o)),i++,s++}return new G(o,i,s)}const gt={},vt={},rg={touchstart:!0,touchmove:!0};class og{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ig(r){for(let e in gt){let t=gt[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=n=>{lg(r,n)&&!Ks(r,n)&&(r.editable||!(n.type in vt))&&t(r,n)},rg[e]?{passive:!0}:void 0)}mt&&r.dom.addEventListener("input",()=>null),bs(r)}function Tn(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function sg(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function bs(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=n=>Ks(r,n))})}function Ks(r,e){return r.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function lg(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function ag(r,e){!Ks(r,e)&&gt[e.type]&&(r.editable||!(e.type in vt))&&gt[e.type](r,e)}vt.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!Nd(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(Wt&&dt&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),br&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",o=>o(r,zn(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||Zm(r,t)?t.preventDefault():Tn(r,"key")};vt.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};vt.keypress=(r,e)=>{let t=e;if(Nd(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||Nt&&t.metaKey)return;if(r.someProp("handleKeyPress",o=>o(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof ge)||!n.$from.sameParent(n.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!r.someProp("handleTextInput",i=>i(r,n.$from.pos,n.$to.pos,o))&&r.dispatch(r.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function di(r){return{left:r.clientX,top:r.clientY}}function dg(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function Ws(r,e,t,n,o){if(n==-1)return!1;let i=r.state.doc.resolve(n);for(let s=i.depth+1;s>0;s--)if(r.someProp(e,l=>s>i.depth?l(r,t,i.nodeAfter,i.before(s),o,!0):l(r,t,i.node(s),i.before(s),o,!1)))return!0;return!1}function mr(r,e,t){r.focused||r.focus();let n=r.state.tr.setSelection(e);t=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}function cg(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&re.isSelectable(n)?(mr(r,new re(t),"pointer"),!0):!1}function ug(r,e){if(e==-1)return!1;let t=r.state.selection,n,o;t instanceof re&&(n=t.node);let i=r.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s);if(re.isSelectable(l)){n&&t.$from.depth>0&&s>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?o=i.before(t.$from.depth):o=i.before(s);break}}return o!=null?(mr(r,re.create(r.state.doc,o),"pointer"),!0):!1}function fg(r,e,t,n,o){return Ws(r,"handleClickOn",e,t,n)||r.someProp("handleClick",i=>i(r,e,n))||(o?ug(r,t):cg(r,t))}function hg(r,e,t,n){return Ws(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",o=>o(r,e,n))}function pg(r,e,t,n){return Ws(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",o=>o(r,e,n))||mg(r,t,n)}function mg(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(mr(r,ge.create(n,0,n.content.size),"pointer"),!0):!1;let o=n.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),l=o.before(i);if(s.inlineContent)mr(r,ge.create(n,l+1,l+1+s.content.size),"pointer");else if(re.isSelectable(s))mr(r,re.create(n,l),"pointer");else continue;return!0}}function Gs(r){return Ho(r)}const Id=Nt?"metaKey":"ctrlKey";gt.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=Gs(r),o=Date.now(),i="singleClick";o-r.input.lastClick.time<500&&dg(t,r.input.lastClick)&&!t[Id]&&(r.input.lastClick.type=="singleClick"?i="doubleClick":r.input.lastClick.type=="doubleClick"&&(i="tripleClick")),r.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:i};let s=r.posAtCoords(di(t));s&&(i=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new gg(r,s,t,!!n)):(i=="doubleClick"?hg:pg)(r,s.pos,s.inside,t)?t.preventDefault():Tn(r,"pointer"))};class gg{constructor(e,t,n,o){this.view=e,this.pos=t,this.event=n,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Id],this.allowDefault=n.shiftKey;let i,s;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);i=c.parent,s=c.depth?c.before():0}const l=o?null:n.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:d}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof re&&d.from<=s&&d.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Tn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>fn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(di(e))),this.updateAllowDefault(e),this.allowDefault||!t?Tn(this.view,"pointer"):fg(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mt&&this.mightDrag&&!this.mightDrag.node.isAtom||dt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(mr(this.view,be.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Tn(this.view,"pointer")}move(e){this.updateAllowDefault(e),Tn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}gt.touchstart=r=>{r.input.lastTouch=Date.now(),Gs(r),Tn(r,"pointer")};gt.touchmove=r=>{r.input.lastTouch=Date.now(),Tn(r,"pointer")};gt.contextmenu=r=>Gs(r);function Nd(r,e){return r.composing?!0:mt&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const vg=Wt?5e3:-1;vt.compositionstart=vt.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),Ho(r,!0),r.markCursor=null;else if(Ho(r),Xt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let o=n.focusNode,i=n.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){r.domSelection().collapse(s,s.nodeValue.length);break}else o=s,i=-1}}r.input.composing=!0}Pd(r,vg)};vt.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,Pd(r,20))};function Pd(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>Ho(r),e))}function Rd(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=yg());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function yg(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function Ho(r,e=!1){if(!(Wt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),Rd(r),e||r.docView&&r.docView.dirty){let t=Us(r);return t&&!t.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(t)):r.updateState(r.state),!0}return!1}}function bg(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),o=document.createRange();o.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const eo=Ct&&wn<15||br&&gm<604;gt.copy=vt.cut=(r,e)=>{let t=e,n=r.state.selection,o=t.type=="cut";if(n.empty)return;let i=eo?null:t.clipboardData,s=n.content(),{dom:l,text:a}=Ad(r,s);i?(t.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):bg(r,l),o&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xg(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function Sg(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let o=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?to(r,n.value,null,o,e):to(r,n.textContent,n.innerHTML,o,e)},50)}function to(r,e,t,n,o){let i=Od(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",a=>a(r,o,i||G.empty)))return!0;if(!i)return!1;let s=xg(i),l=s?r.state.tr.replaceSelectionWith(s,n):r.state.tr.replaceSelection(i);return r.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function $d(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}vt.paste=(r,e)=>{let t=e;if(r.composing&&!Wt)return;let n=eo?null:t.clipboardData,o=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&to(r,$d(n),n.getData("text/html"),o,t)?t.preventDefault():Sg(r,t)};class Bd{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Ld=Nt?"altKey":"ctrlKey";gt.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let o=r.state.selection,i=o.empty?null:r.posAtCoords(di(t)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof re?o.to-1:o.to))){if(n&&n.mightDrag)s=re.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let c=r.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=r.docView&&(s=re.create(r.state.doc,c.posBefore))}}let l=(s||r.state.selection).content(),{dom:a,text:d}=Ad(r,l);t.dataTransfer.clearData(),t.dataTransfer.setData(eo?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",eo||t.dataTransfer.setData("text/plain",d),r.dragging=new Bd(l,!t[Ld],s)};gt.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};vt.dragover=vt.dragenter=(r,e)=>e.preventDefault();vt.drop=(r,e)=>{let t=e,n=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let o=r.posAtCoords(di(t));if(!o)return;let i=r.state.doc.resolve(o.pos),s=n&&n.slice;s?r.someProp("transformPasted",p=>{s=p(s,r)}):s=Od(r,$d(t.dataTransfer),eo?null:t.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&!t[Ld]);if(r.someProp("handleDrop",p=>p(r,t,s||G.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?td(r.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let d=r.state.tr;if(l){let{node:p}=n;p?p.replace(d):d.deleteSelection()}let c=d.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=d.doc;if(u?d.replaceRangeWith(c,c,s.content.firstChild):d.replaceRange(c,c,s),d.doc.eq(f))return;let h=d.doc.resolve(c);if(u&&re.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new re(h));else{let p=d.mapping.map(a);d.mapping.maps[d.mapping.maps.length-1].forEach((g,v,b,S)=>p=S),d.setSelection(Hs(r,h,d.doc.resolve(p)))}r.focus(),r.dispatch(d.setMeta("uiEvent","drop"))};gt.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&fn(r)},20))};gt.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};gt.beforeinput=(r,e)=>{if(dt&&Wt&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",i=>i(r,zn(8,"Backspace")))))return;let{$cursor:o}=r.state.selection;o&&o.pos>0&&r.dispatch(r.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let r in vt)gt[r]=vt[r];function no(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class Ko{constructor(e,t){this.toDOM=e,this.spec=t||Jn,this.side=this.spec.side||0}map(e,t,n,o){let{pos:i,deleted:s}=e.mapResult(t.from+o,this.side<0?-1:1);return s?null:new Rt(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Ko&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&no(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Dn{constructor(e,t){this.attrs=e,this.spec=t||Jn}map(e,t,n,o){let i=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,s=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return i>=s?null:new Rt(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Dn&&no(this.attrs,e.attrs)&&no(this.spec,e.spec)}static is(e){return e.type instanceof Dn}destroy(){}}class Js{constructor(e,t){this.attrs=e,this.spec=t||Jn}map(e,t,n,o){let i=e.mapResult(t.from+o,1);if(i.deleted)return null;let s=e.mapResult(t.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Rt(i.pos-n,s.pos-n,this)}valid(e,t){let{index:n,offset:o}=e.content.findIndex(t.from),i;return o==t.from&&!(i=e.child(n)).isText&&o+i.nodeSize==t.to}eq(e){return this==e||e instanceof Js&&no(this.attrs,e.attrs)&&no(this.spec,e.spec)}destroy(){}}class Rt{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Rt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Rt(e,e,new Ko(t,n))}static inline(e,t,n,o){return new Rt(e,t,new Dn(n,o))}static node(e,t,n,o){return new Rt(e,t,new Js(n,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dn}get widget(){return this.type instanceof Ko}}const sr=[],Jn={};class Ze{constructor(e,t){this.local=e.length?e:sr,this.children=t.length?t:sr}static create(e,t){return t.length?Wo(t,e,0,Jn):at}find(e,t,n){let o=[];return this.findInner(e??0,t??1e9,o,0,n),o}findInner(e,t,n,o,i){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!i||i(l.spec))&&n.push(l.copy(l.from+o,l.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,o+l,i)}}map(e,t,n){return this==at||e.maps.length==0?this:this.mapInner(e,t,0,0,n||Jn)}mapInner(e,t,n,o,i){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,n,o);a&&a.type.valid(t,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?Cg(this.children,s||[],e,t,n,o,i):s?new Ze(s.sort(Yn),sr):at}add(e,t){return t.length?this==at?Ze.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let o,i=0;e.forEach((l,a)=>{let d=a+n,c;if(c=Vd(t,l,d)){for(o||(o=this.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(l,c,d+1):o.splice(i,0,a,a+l.nodeSize,Wo(c,l,d+1,Jn)),i+=3}});let s=Fd(i?zd(t):t,-n);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Ze(s.length?this.local.concat(s).sort(Yn):this.local,o||this.children)}remove(e){return e.length==0||this==at?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,o=this.local;for(let i=0;i<n.length;i+=3){let s,l=n[i]+t,a=n[i+1]+t;for(let c=0,u;c<e.length;c++)(u=e[c])&&u.from>l&&u.to<a&&(e[c]=null,(s||(s=[])).push(u));if(!s)continue;n==this.children&&(n=this.children.slice());let d=n[i+2].removeInner(s,l+1);d!=at?n[i+2]=d:(n.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let l=0;l<o.length;l++)o[l].eq(s,t)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return n==this.children&&o==this.local?this:o.length||n.length?new Ze(o,n):at}forChild(e,t){if(this==at)return this;if(t.isLeaf)return Ze.empty;let n,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let i=e+1,s=i+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>i&&a.type instanceof Dn){let d=Math.max(i,a.from)-i,c=Math.min(s,a.to)-i;d<c&&(o||(o=[])).push(a.copy(d,c))}}if(o){let l=new Ze(o.sort(Yn),sr);return n?new Cn([l,n]):l}return n||at}eq(e){if(this==e)return!0;if(!(e instanceof Ze)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ys(this.localsInner(e))}localsInner(e){if(this==at)return sr;if(e.inlineContent||!this.local.some(Dn.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Dn||t.push(this.local[n]);return t}}Ze.empty=new Ze([],[]);Ze.removeOverlap=Ys;const at=Ze.empty;class Cn{constructor(e){this.members=e}map(e,t){const n=this.members.map(o=>o.map(e,t,Jn));return Cn.from(n)}forChild(e,t){if(t.isLeaf)return Ze.empty;let n=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,t);i!=at&&(i instanceof Cn?n=n.concat(i.members):n.push(i))}return Cn.from(n)}eq(e){if(!(e instanceof Cn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!t)t=i;else{n&&(t=t.slice(),n=!1);for(let s=0;s<i.length;s++)t.push(i[s])}}return t?Ys(n?t:t.sort(Yn)):sr}static from(e){switch(e.length){case 0:return at;case 1:return e[0];default:return new Cn(e.every(t=>t instanceof Ze)?e:e.reduce((t,n)=>t.concat(n instanceof Ze?n:n.members),[]))}}}function Cg(r,e,t,n,o,i,s){let l=r.slice();for(let d=0,c=i;d<t.maps.length;d++){let u=0;t.maps[d].forEach((f,h,p,g)=>{let v=g-p-(h-f);for(let b=0;b<l.length;b+=3){let S=l[b+1];if(S<0||f>S+c-u)continue;let C=l[b]+c-u;h>=C?l[b+1]=f<=C?-2:-1:p>=o&&v&&(l[b]+=v,l[b+1]+=v)}u+=v}),c=t.maps[d].map(c,-1)}let a=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){a=!0,l[d+1]=-1;continue}let c=t.map(r[d]+i),u=c-o;if(u<0||u>=n.content.size){a=!0;continue}let f=t.map(r[d+1]+i,-1),h=f-o,{index:p,offset:g}=n.content.findIndex(u),v=n.maybeChild(p);if(v&&g==u&&g+v.nodeSize==h){let b=l[d+2].mapInner(t,v,c+1,r[d]+i+1,s);b!=at?(l[d]=u,l[d+1]=h,l[d+2]=b):(l[d+1]=-2,a=!0)}else a=!0}if(a){let d=Eg(l,r,e,t,o,i,s),c=Wo(d,n,0,s);e=c.local;for(let u=0;u<l.length;u+=3)l[u+1]<0&&(l.splice(u,3),u-=3);for(let u=0,f=0;u<c.children.length;u+=3){let h=c.children[u];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[u],c.children[u+1],c.children[u+2])}}return new Ze(e.sort(Yn),l)}function Fd(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let o=r[n];t.push(new Rt(o.from+e,o.to+e,o.type))}return t}function Eg(r,e,t,n,o,i,s){function l(a,d){for(let c=0;c<a.local.length;c++){let u=a.local[c].map(n,o,d);u?t.push(u):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+d+1)}for(let a=0;a<r.length;a+=3)r[a+1]==-1&&l(r[a+2],e[a]+i+1);return t}function Vd(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,o=null;for(let i=0,s;i<r.length;i++)(s=r[i])&&s.from>t&&s.to<n&&((o||(o=[])).push(s),r[i]=null);return o}function zd(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function Wo(r,e,t,n){let o=[],i=!1;e.forEach((l,a)=>{let d=Vd(r,l,a+t);if(d){i=!0;let c=Wo(d,l,t+a+1,n);c!=at&&o.push(a,a+l.nodeSize,c)}});let s=Fd(i?zd(r):r,-t).sort(Yn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(n.onRemove&&n.onRemove(s[l].spec),s.splice(l--,1));return s.length||o.length?new Ze(s,o):at}function Yn(r,e){return r.from-e.from||r.to-e.to}function Ys(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let o=t+1;o<e.length;o++){let i=e[o];if(i.from==n.from){i.to!=n.to&&(e==r&&(e=r.slice()),e[o]=i.copy(i.from,n.to),Wl(e,o+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,i.from),Wl(e,o,n.copy(i.from,n.to)));break}}}return e}function Wl(r,e,t){for(;e<r.length&&Yn(t,r[e])>0;)e++;r.splice(e,0,t)}function Bi(r){let e=[];return r.someProp("decorations",t=>{let n=t(r.state);n&&n!=at&&e.push(n)}),r.cursorWrapper&&e.push(Ze.create(r.state.doc,[r.cursorWrapper.deco])),Cn.from(e)}const Ag={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Og=Ct&&wn<=11;class Tg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Mg{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Tg,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let o=0;o<n.length;o++)this.queue.push(n[o]);Ct&&wn<=11&&n.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Og&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ag)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ll(this.view)){if(this.suppressingSelectionUpdates)return fn(this.view);if(Ct&&wn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Zn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let i=e.focusNode;i;i=qr(i))t.add(i);for(let i=e.anchorNode;i;i=qr(i))if(t.has(i)){n=i;break}let o=n&&this.view.docView.nearestDesc(n);if(o&&o.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Ll(e)&&!this.ignoreSelectionChange(n),i=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let u=this.registerMutation(t[c],a);u&&(i=i<0?u.from:Math.min(u.from,i),s=s<0?u.to:Math.max(u.to,s),u.typeOver&&(l=!0))}if(Xt&&a.length>1){let c=a.filter(u=>u.nodeName=="BR");if(c.length==2){let u=c[0],f=c[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}}let d=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&li(n)&&(d=Us(e))&&d.eq(be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,fn(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),wg(e)),this.handleDOMChange(i,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||fn(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)t.push(e.addedNodes[c]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Ct&&wn<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:u,nextSibling:f}=e.addedNodes[c];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let s=o&&o.parentNode==e.target?pt(o)+1:0,l=n.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?pt(i):e.target.childNodes.length,d=n.localPosFromDOM(e.target,a,1);return{from:l,to:d}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Gl=new WeakMap,Jl=!1;function wg(r){if(!Gl.has(r)&&(Gl.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=Xt,Jl)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Jl=!0}}function kg(r){let e;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",t,!0);let n=e.startContainer,o=e.startOffset,i=e.endContainer,s=e.endOffset,l=r.domAtPos(r.state.selection.anchor);return Zn(l.node,l.offset,i,s)&&([n,o,i,s]=[i,s,n,o]),{anchorNode:n,anchorOffset:o,focusNode:i,focusOffset:s}}function Dg(r,e,t){let{node:n,fromOffset:o,toOffset:i,from:s,to:l}=r.docView.parseRange(e,t),a=r.domSelectionRange(),d,c=a.anchorNode;if(c&&r.dom.contains(c.nodeType==1?c:c.parentNode)&&(d=[{node:c,offset:a.anchorOffset}],li(a)||d.push({node:a.focusNode,offset:a.focusOffset})),dt&&r.input.lastKeyCode===8)for(let v=i;v>o;v--){let b=n.childNodes[v-1],S=b.pmViewDesc;if(b.nodeName=="BR"&&!S){i=v;break}if(!S||S.size)break}let u=r.state.doc,f=r.someProp("domParser")||gr.fromSchema(r.state.schema),h=u.resolve(s),p=null,g=f.parse(n,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Ig,context:h});if(d&&d[0].pos!=null){let v=d[0].pos,b=d[1]&&d[1].pos;b==null&&(b=v),p={anchor:v+s,head:b+s}}return{doc:g,sel:p,from:s,to:l}}function Ig(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(mt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||mt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Ng=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Pg(r,e,t,n,o){let i=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let k=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,V=Us(r,k);if(V&&!r.state.selection.eq(V)){if(dt&&Wt&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",z=>z(r,zn(13,"Enter"))))return;let B=r.state.tr.setSelection(V);k=="pointer"?B.setMeta("pointer",!0):k=="key"&&B.scrollIntoView(),i&&B.setMeta("composition",i),r.dispatch(B)}return}let s=r.state.doc.resolve(e),l=s.sharedDepth(t);e=s.before(l+1),t=r.state.doc.resolve(t).after(l+1);let a=r.state.selection,d=Dg(r,e,t),c=r.state.doc,u=c.slice(d.from,d.to),f,h;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(f=r.state.selection.to,h="end"):(f=r.state.selection.from,h="start"),r.input.lastKeyCode=null;let p=Bg(u.content,d.doc.content,d.from,f,h);if((br&&r.input.lastIOSEnter>Date.now()-225||Wt)&&o.some(k=>k.nodeType==1&&!Ng.test(k.nodeName))&&(!p||p.endA>=p.endB)&&r.someProp("handleKeyDown",k=>k(r,zn(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!p)if(n&&a instanceof ge&&!a.empty&&a.$head.sameParent(a.$anchor)&&!r.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(d.sel){let k=Yl(r,r.state.doc,d.sel);if(k&&!k.eq(r.state.selection)){let V=r.state.tr.setSelection(k);i&&V.setMeta("composition",i),r.dispatch(V)}}return}if(dt&&r.cursorWrapper&&d.sel&&d.sel.anchor==r.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let k=p.endB-p.start;d.sel={anchor:d.sel.anchor+k,head:d.sel.anchor+k}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&p.start==p.endB&&r.state.selection instanceof ge&&(p.start>r.state.selection.from&&p.start<=r.state.selection.from+2&&r.state.selection.from>=d.from?p.start=r.state.selection.from:p.endA<r.state.selection.to&&p.endA>=r.state.selection.to-2&&r.state.selection.to<=d.to&&(p.endB+=r.state.selection.to-p.endA,p.endA=r.state.selection.to)),Ct&&wn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>d.from&&d.doc.textBetween(p.start-d.from-1,p.start-d.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let g=d.doc.resolveNoCache(p.start-d.from),v=d.doc.resolveNoCache(p.endB-d.from),b=c.resolve(p.start),S=g.sameParent(v)&&g.parent.inlineContent&&b.end()>=p.endA,C;if((br&&r.input.lastIOSEnter>Date.now()-225&&(!S||o.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!S&&g.pos<d.doc.content.size&&!g.sameParent(v)&&(C=be.findFrom(d.doc.resolve(g.pos+1),1,!0))&&C.head==v.pos)&&r.someProp("handleKeyDown",k=>k(r,zn(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>p.start&&$g(c,p.start,p.endA,g,v)&&r.someProp("handleKeyDown",k=>k(r,zn(8,"Backspace")))){Wt&&dt&&r.domObserver.suppressSelectionUpdates();return}dt&&Wt&&p.endB==p.start&&(r.input.lastAndroidDelete=Date.now()),Wt&&!S&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==p.endA&&(p.endB-=2,v=d.doc.resolveNoCache(p.endB-d.from),setTimeout(()=>{r.someProp("handleKeyDown",function(k){return k(r,zn(13,"Enter"))})},20));let A=p.start,O=p.endA,D,U,K;if(S){if(g.pos==v.pos)Ct&&wn<=11&&g.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>fn(r),20)),D=r.state.tr.delete(A,O),U=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(K=Rg(g.parent.content.cut(g.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))D=r.state.tr,K.type=="add"?D.addMark(A,O,K.mark):D.removeMark(A,O,K.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let k=g.parent.textBetween(g.parentOffset,v.parentOffset);if(r.someProp("handleTextInput",V=>V(r,A,O,k)))return;D=r.state.tr.insertText(k,A,O)}}if(D||(D=r.state.tr.replace(A,O,d.doc.slice(p.start-d.from,p.endB-d.from))),d.sel){let k=Yl(r,D.doc,d.sel);k&&!(dt&&Wt&&r.composing&&k.empty&&(p.start!=p.endB||r.input.lastAndroidDelete<Date.now()-100)&&(k.head==A||k.head==D.mapping.map(O)-1)||Ct&&k.empty&&k.head==A)&&D.setSelection(k)}U&&D.ensureMarks(U),i&&D.setMeta("composition",i),r.dispatch(D.scrollIntoView())}function Yl(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Hs(r,e.resolve(t.anchor),e.resolve(t.head))}function Rg(r,e){let t=r.firstChild.marks,n=e.firstChild.marks,o=t,i=n,s,l,a;for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);for(let c=0;c<t.length;c++)i=t[c].removeFromSet(i);if(o.length==1&&i.length==0)l=o[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(o.length==0&&i.length==1)l=i[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let d=[];for(let c=0;c<e.childCount;c++)d.push(a(e.child(c)));if(L.from(d).eq(r))return{mark:l,type:s}}function $g(r,e,t,n,o){if(!n.parent.isTextblock||t-e<=o.pos-n.pos||Li(n,!0,!1)<o.pos)return!1;let i=r.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=r.resolve(Li(i,!0,!0));return!s.parent.isTextblock||s.pos>t||Li(s,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function Li(r,e,t){let n=r.depth,o=e?r.end():r.pos;for(;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,o++,e=!1;if(t){let i=r.node(n).maybeChild(r.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function Bg(r,e,t,n,o){let i=r.findDiffStart(e,t);if(i==null)return null;let{a:s,b:l}=r.findDiffEnd(e,t+r.size,t+e.size);if(o=="end"){let a=Math.max(0,i-Math.min(s,l));n-=s+a-i}if(s<i&&r.size<e.size){let a=n<=i&&n>=s?i-n:0;i-=a,i&&i<e.size&&Xl(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-s),s=i}else if(l<i){let a=n<=i&&n>=l?i-n:0;i-=a,i&&i<r.size&&Xl(r.textBetween(i-1,i+1))&&(i+=a?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}function Xl(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Lg{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new og,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ea),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_l(this),Zl(this),this.nodeViews=ql(this),this.docView=Il(this.state.doc,Ql(this),Bi(this),this.dom,this),this.domObserver=new Mg(this,(n,o,i,s)=>Pg(this,n,o,i,s)),this.domObserver.start(),ig(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bs(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ea),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Rd(this),s=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=ql(this);Vg(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&bs(this),this.editable=_l(this),Zl(this);let a=Bi(this),d=Ql(this),c=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,d,a);(u||!e.selection.eq(o.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&bm(this);if(s){this.domObserver.stop();let h=u&&(Ct||dt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&Fg(o.selection,e.selection);if(u){let p=dt?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,d,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Il(e.doc,d,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Km(this))?fn(this,h):(Sd(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((n=this.dragging)===null||n===void 0)&&n.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&xm(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof re){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ol(this,t.getBoundingClientRect(),e)}else Ol(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,o=-1;if(this.state.doc.nodeAt(n.from)==n.node)o=n.from;else{let i=n.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(o=i)}this.dragging=new Bd(e.slice,e.move,o<0?void 0:re.create(this.state.doc,o))}someProp(e,t){let n=this._props&&this._props[e],o;if(n!=null&&(o=t?t(n):n))return o;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(o=t?t(l):l))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let l=i[s].props[e];if(l!=null&&(o=t?t(l):l))return o}}hasFocus(){if(Ct){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Sm(this.dom),fn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Tm(this,e)}coordsAtPos(e,t=1){return hd(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let o=this.docView.posFromDOM(e,t,n);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return Im(this,t||this.state,e)}pasteHTML(e,t){return to(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return to(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(sg(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Bi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return ag(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return mt&&this.root.nodeType===11&&fm(this.dom.ownerDocument)==this.dom?kg(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Ql(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[Rt.node(0,r.state.doc.content.size,e)]}function Zl(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:Rt.widget(r.state.selection.head,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function _l(r){return!r.someProp("editable",e=>e(r.state)===!1)}function Fg(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function ql(r){let e=Object.create(null);function t(n){for(let o in n)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=n[o])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function Vg(r,e){let t=0,n=0;for(let o in r){if(r[o]!=e[o])return!0;t++}for(let o in e)n++;return t!=n}function ea(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Nn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Go={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},zg=typeof navigator<"u"&&/Mac/.test(navigator.platform),jg=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var st=0;st<10;st++)Nn[48+st]=Nn[96+st]=String(st);for(var st=1;st<=24;st++)Nn[st+111]="F"+st;for(var st=65;st<=90;st++)Nn[st]=String.fromCharCode(st+32),Go[st]=String.fromCharCode(st);for(var Fi in Nn)Go.hasOwnProperty(Fi)||(Go[Fi]=Nn[Fi]);function Ug(r){var e=zg&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||jg&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Go:Nn)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Hg=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Kg(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,o,i,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))Hg?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+a)}return n&&(t="Alt-"+t),o&&(t="Ctrl-"+t),s&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function Wg(r){let e=Object.create(null);for(let t in r)e[Kg(t)]=r[t];return e}function Vi(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function Gg(r){return new Lt({props:{handleKeyDown:jd(r)}})}function jd(r){let e=Wg(r);return function(t,n){let o=Ug(n),i,s=e[Vi(o,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(n.shiftKey){let l=e[Vi(o,n,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=Nn[n.keyCode])&&i!=o){let l=e[Vi(i,n)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const Jg=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function Yg(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const Xg=(r,e,t)=>{let n=Yg(r,t);if(!n)return!1;let o=Ud(n);if(!o){let s=n.blockRange(),l=s&&Ar(s);return l==null?!1:(e&&e(r.tr.lift(s,l).scrollIntoView()),!0)}let i=o.nodeBefore;if(!i.type.spec.isolating&&Wd(r,o,e))return!0;if(n.parent.content.size==0&&(xr(i,"end")||re.isSelectable(i))){let s=Fs(r.doc,n.before(),n.after(),G.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=r.tr.step(s);l.setSelection(xr(i,"end")?be.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):re.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}}return i.isAtom&&o.depth==n.depth-1?(e&&e(r.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1};function xr(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const Qg=(r,e,t)=>{let{$head:n,empty:o}=r.selection,i=n;if(!o)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;i=Ud(n)}let s=i&&i.nodeBefore;return!s||!re.isSelectable(s)?!1:(e&&e(r.tr.setSelection(re.create(r.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function Ud(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function Zg(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const _g=(r,e,t)=>{let n=Zg(r,t);if(!n)return!1;let o=Hd(n);if(!o)return!1;let i=o.nodeAfter;if(Wd(r,o,e))return!0;if(n.parent.content.size==0&&(xr(i,"start")||re.isSelectable(i))){let s=Fs(r.doc,n.before(),n.after(),G.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=r.tr.step(s);l.setSelection(xr(i,"start")?be.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):re.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&o.depth==n.depth-1?(e&&e(r.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},qg=(r,e,t)=>{let{$head:n,empty:o}=r.selection,i=n;if(!o)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;i=Hd(n)}let s=i&&i.nodeAfter;return!s||!re.isSelectable(s)?!1:(e&&e(r.tr.setSelection(re.create(r.doc,i.pos)).scrollIntoView()),!0)};function Hd(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const ev=(r,e)=>{let t=r.selection,n=t instanceof re,o;if(n){if(t.node.isTextblock||!Pn(r.doc,t.from))return!1;o=t.from}else if(o=ii(r.doc,t.from,-1),o==null)return!1;if(e){let i=r.tr.join(o);n&&i.setSelection(re.create(i.doc,o-r.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},tv=(r,e)=>{let t=r.selection,n;if(t instanceof re){if(t.node.isTextblock||!Pn(r.doc,t.to))return!1;n=t.to}else if(n=ii(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},nv=(r,e)=>{let{$from:t,$to:n}=r.selection,o=t.blockRange(n),i=o&&Ar(o);return i==null?!1:(e&&e(r.tr.lift(o,i).scrollIntoView()),!0)},rv=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function Kd(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const ov=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let o=t.node(-1),i=t.indexAfter(-1),s=Kd(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let l=t.after(),a=r.tr.replaceWith(l,l,s.createAndFill());a.setSelection(be.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},iv=(r,e)=>{let t=r.selection,{$from:n,$to:o}=t;if(t instanceof Yt||n.parent.inlineContent||o.parent.inlineContent)return!1;let i=Kd(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!n.parentOffset&&o.index()<o.parent.childCount?n:o).pos,l=r.tr.insert(s,i.createAndFill());l.setSelection(ge.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},sv=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(hr(r.doc,i))return e&&e(r.tr.split(i).scrollIntoView()),!0}let n=t.blockRange(),o=n&&Ar(n);return o==null?!1:(e&&e(r.tr.lift(n,o).scrollIntoView()),!0)},lv=(r,e)=>{let{$from:t,to:n}=r.selection,o,i=t.sharedDepth(n);return i==0?!1:(o=t.before(i),e&&e(r.tr.setSelection(re.create(r.doc,o))),!0)};function av(r,e,t){let n=e.nodeBefore,o=e.nodeAfter,i=e.index();return!n||!o||!n.type.compatibleContent(o.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||Pn(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),!0)}function Wd(r,e,t){let n=e.nodeBefore,o=e.nodeAfter,i,s;if(n.type.spec.isolating||o.type.spec.isolating)return!1;if(av(r,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(i=(s=n.contentMatchAt(n.childCount)).findWrapping(o.type))&&s.matchType(i[0]||o.type).validEnd){if(t){let u=e.pos+o.nodeSize,f=L.empty;for(let g=i.length-1;g>=0;g--)f=L.from(i[g].create(null,f));f=L.from(n.copy(f));let h=r.tr.step(new et(e.pos-1,u,e.pos,u,new G(f,1,0),i.length,!0)),p=u+2*i.length;Pn(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let a=be.findFrom(e,1),d=a&&a.$from.blockRange(a.$to),c=d&&Ar(d);if(c!=null&&c>=e.depth)return t&&t(r.tr.lift(d,c).scrollIntoView()),!0;if(l&&xr(o,"start",!0)&&xr(n,"end")){let u=n,f=[];for(;f.push(u),!u.isTextblock;)u=u.lastChild;let h=o,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(u.canReplace(u.childCount,u.childCount,h.content)){if(t){let g=L.empty;for(let b=f.length-1;b>=0;b--)g=L.from(f[b].copy(g));let v=r.tr.step(new et(e.pos-f.length,e.pos+o.nodeSize,e.pos+p,e.pos+o.nodeSize-p,new G(g,f.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function Gd(r){return function(e,t){let n=e.selection,o=r<0?n.$from:n.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(t&&t(e.tr.setSelection(ge.create(e.doc,r<0?o.start(i):o.end(i)))),!0):!1}}const dv=Gd(-1),cv=Gd(1);function uv(r,e=null){return function(t,n){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),l=s&&Ls(s,r,e);return l?(n&&n(t.tr.wrap(s,l).scrollIntoView()),!0):!1}}function ta(r,e=null){return function(t,n){let o=!1;for(let i=0;i<t.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:l}}=t.selection.ranges[i];t.doc.nodesBetween(s,l,(a,d)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(r,e)))if(a.type==r)o=!0;else{let c=t.doc.resolve(d),u=c.index();o=c.parent.canReplaceWith(u,u+1,r)}})}if(!o)return!1;if(n){let i=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];i.setBlockType(l,a,r,e)}n(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function fv(r,e=null){return function(t,n){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(r)&&s.startIndex==0){if(o.index(s.depth-1)==0)return!1;let c=t.doc.resolve(s.start-2);a=new Fo(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new Fo(o,t.doc.resolve(i.end(s.depth)),s.depth)),l=!0}let d=Ls(a,r,e,s);return d?(n&&n(hv(t.tr,s,d,l,r).scrollIntoView()),!0):!1}}function hv(r,e,t,n,o){let i=L.empty;for(let c=t.length-1;c>=0;c--)i=L.from(t[c].type.create(t[c].attrs,i));r.step(new et(e.start-(n?2:0),e.end,e.start,e.end,new G(i,0,0),t.length,!0));let s=0;for(let c=0;c<t.length;c++)t[c].type==o&&(s=c+1);let l=t.length-s,a=e.start+t.length-(n?2:0),d=e.parent;for(let c=e.startIndex,u=e.endIndex,f=!0;c<u;c++,f=!1)!f&&hr(r.doc,a,l)&&(r.split(a,l),a+=2*l),a+=d.child(c).nodeSize;return r}function pv(r){return function(e,t){let{$from:n,$to:o}=e.selection,i=n.blockRange(o,s=>s.childCount>0&&s.firstChild.type==r);return i?t?n.node(i.depth-1).type==r?mv(e,t,r,i):gv(e,t,i):!0:!1}}function mv(r,e,t,n){let o=r.tr,i=n.end,s=n.$to.end(n.depth);i<s&&(o.step(new et(i-1,s,i,s,new G(L.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new Fo(o.doc.resolve(n.$from.pos),o.doc.resolve(s),n.depth));const l=Ar(n);if(l==null)return!1;o.lift(n,l);let a=o.mapping.map(i,-1)-1;return Pn(o.doc,a)&&o.join(a),e(o.scrollIntoView()),!0}function gv(r,e,t){let n=r.tr,o=t.parent;for(let h=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)h-=o.child(p).nodeSize,n.delete(h-1,h+1);let i=n.doc.resolve(t.start),s=i.nodeAfter;if(n.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==o.childCount,d=i.node(-1),c=i.index(-1);if(!d.canReplace(c+(l?0:1),c+1,s.content.append(a?L.empty:L.from(o))))return!1;let u=i.pos,f=u+s.nodeSize;return n.step(new et(u-(l?1:0),f+(a?1:0),u+1,f-1,new G((l?L.empty:L.from(o.copy(L.empty))).append(a?L.empty:L.from(o.copy(L.empty))),l?0:1,a?0:1),l?0:1)),e(n.scrollIntoView()),!0}function vv(r){return function(e,t){let{$from:n,$to:o}=e.selection,i=n.blockRange(o,d=>d.childCount>0&&d.firstChild.type==r);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let l=i.parent,a=l.child(s-1);if(a.type!=r)return!1;if(t){let d=a.lastChild&&a.lastChild.type==l.type,c=L.from(d?r.create():null),u=new G(L.from(r.create(null,L.from(l.type.create(null,c)))),d?3:1,0),f=i.start,h=i.end;t(e.tr.step(new et(f-(d?3:1),h,f,h,u,1,!0)).scrollIntoView())}return!0}}function ci(r){const{state:e,transaction:t}=r;let{selection:n}=t,{doc:o}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return o},get tr(){return n=t.selection,o=t.doc,i=t.storedMarks,t}}}class ui{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:o}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const u=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:o,state:i}=this,{view:s}=o,l=[],a=!!e,d=e||i.tr,c=()=>(!a&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(d),l.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,h])=>[f,(...g)=>{const v=this.buildProps(d,t),b=h(...g)(v);return l.push(b),u}])),run:c};return u}createCan(e){const{rawCommands:t,state:n}=this,o=!1,i=e||n.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(t).map(([a,d])=>[a,(...c)=>d(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,t=!0){const{rawCommands:n,editor:o,state:i}=this,{view:s}=o,l={tr:e,editor:o,view:s,state:ci({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,d])=>[a,(...c)=>d(...c)(l)]))}};return l}}class yv{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(o=>o.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(o=>o!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function X(r,e,t){return r.config[e]===void 0&&r.parent?X(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?X(r.parent,e,t):null}):r.config[e]}function fi(r){const e=r.filter(o=>o.type==="extension"),t=r.filter(o=>o.type==="node"),n=r.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function Jd(r){const e=[],{nodeExtensions:t,markExtensions:n}=fi(r),o=[...t,...n],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=X(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(u=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:u,name:f,attribute:{...i,...h}})})})})}),o.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=X(s,"addAttributes",l);if(!a)return;const d=a();Object.entries(d).forEach(([c,u])=>{const f={...i,...u};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function nt(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function _e(...r){return r.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([o,i])=>{if(!n[o]){n[o]=i;return}if(o==="class"){const l=i?i.split(" "):[],a=n[o]?n[o].split(" "):[],d=l.filter(c=>!a.includes(c));n[o]=[...a,...d].join(" ")}else o==="style"?n[o]=[n[o],i].join("; "):n[o]=i}),n},{})}function xs(r,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>_e(t,n),{})}function Yd(r){return typeof r=="function"}function ye(r,e=void 0,...t){return Yd(r)?e?r.bind(e)(...t):r(...t):r}function bv(r={}){return Object.keys(r).length===0&&r.constructor===Object}function xv(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function na(r,e){return r.style?r:{...r,getAttrs:t=>{const n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;const o=e.reduce((i,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(t):xv(t.getAttribute(s.name));return l==null?i:{...i,[s.name]:l}},{});return{...n,...o}}}}function ra(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&bv(t)?!1:t!=null))}function Sv(r,e){var t;const n=Jd(r),{nodeExtensions:o,markExtensions:i}=fi(r),s=(t=o.find(d=>X(d,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(o.map(d=>{const c=n.filter(b=>b.type===d.name),u={name:d.name,options:d.options,storage:d.storage,editor:e},f=r.reduce((b,S)=>{const C=X(S,"extendNodeSchema",u);return{...b,...C?C(d):{}}},{}),h=ra({...f,content:ye(X(d,"content",u)),marks:ye(X(d,"marks",u)),group:ye(X(d,"group",u)),inline:ye(X(d,"inline",u)),atom:ye(X(d,"atom",u)),selectable:ye(X(d,"selectable",u)),draggable:ye(X(d,"draggable",u)),code:ye(X(d,"code",u)),defining:ye(X(d,"defining",u)),isolating:ye(X(d,"isolating",u)),attrs:Object.fromEntries(c.map(b=>{var S;return[b.name,{default:(S=b==null?void 0:b.attribute)===null||S===void 0?void 0:S.default}]}))}),p=ye(X(d,"parseHTML",u));p&&(h.parseDOM=p.map(b=>na(b,c)));const g=X(d,"renderHTML",u);g&&(h.toDOM=b=>g({node:b,HTMLAttributes:xs(b,c)}));const v=X(d,"renderText",u);return v&&(h.toText=v),[d.name,h]})),a=Object.fromEntries(i.map(d=>{const c=n.filter(v=>v.type===d.name),u={name:d.name,options:d.options,storage:d.storage,editor:e},f=r.reduce((v,b)=>{const S=X(b,"extendMarkSchema",u);return{...v,...S?S(d):{}}},{}),h=ra({...f,inclusive:ye(X(d,"inclusive",u)),excludes:ye(X(d,"excludes",u)),group:ye(X(d,"group",u)),spanning:ye(X(d,"spanning",u)),code:ye(X(d,"code",u)),attrs:Object.fromEntries(c.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),p=ye(X(d,"parseHTML",u));p&&(h.parseDOM=p.map(v=>na(v,c)));const g=X(d,"renderHTML",u);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:xs(v,c)})),[d.name,h]}));return new Dp({topNode:s,nodes:l,marks:a})}function zi(r,e){return e.nodes[r]||e.marks[r]||null}function oa(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}const Cv=(r,e=500)=>{let t="";const n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(o,i,s,l)=>{var a,d;const c=((d=(a=o.type.spec).toText)===null||d===void 0?void 0:d.call(a,{node:o,pos:i,parent:s,index:l}))||o.textContent||"%leaf%";t+=c.slice(0,Math.max(0,n-i))}),t};function Xs(r){return Object.prototype.toString.call(r)==="[object RegExp]"}class hi{constructor(e){this.find=e.find,this.handler=e.handler}}const Ev=(r,e)=>{if(Xs(e))return e.exec(r);const t=e(r);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function ji(r){var e;const{editor:t,from:n,to:o,text:i,rules:s,plugin:l}=r,{view:a}=t;if(a.composing)return!1;const d=a.state.doc.resolve(n);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const u=Cv(d)+i;return s.forEach(f=>{if(c)return;const h=Ev(u,f.find);if(!h)return;const p=a.state.tr,g=ci({state:a.state,transaction:p}),v={from:n-(h[0].length-i.length),to:o},{commands:b,chain:S,can:C}=new ui({editor:t,state:g});f.handler({state:g,range:v,match:h,commands:b,chain:S,can:C})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:n,to:o,text:i}),a.dispatch(p),c=!0)}),c}function Av(r){const{editor:e,rules:t}=r,n=new Lt({state:{init(){return null},apply(o,i){const s=o.getMeta(n);return s||(o.selectionSet||o.docChanged?null:i)}},props:{handleTextInput(o,i,s,l){return ji({editor:e,from:i,to:s,text:l,rules:t,plugin:n})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&ji({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?ji({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function Ov(r){return typeof r=="number"}class Tv{constructor(e){this.find=e.find,this.handler=e.handler}}const Mv=(r,e)=>{if(Xs(e))return[...r.matchAll(e)];const t=e(r);return t?t.map(n=>{const o=[n.text];return o.index=n.index,o.input=r,o.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(n.replaceWith)),o}):[]};function wv(r){const{editor:e,state:t,from:n,to:o,rule:i,pasteEvent:s,dropEvent:l}=r,{commands:a,chain:d,can:c}=new ui({editor:e,state:t}),u=[];return t.doc.nodesBetween(n,o,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(n,p),v=Math.min(o,p+h.content.size),b=h.textBetween(g-p,v-p,void 0,"￼");Mv(b,i.find).forEach(C=>{if(C.index===void 0)return;const A=g+C.index+1,O=A+C[0].length,D={from:t.tr.mapping.map(A),to:t.tr.mapping.map(O)},U=i.handler({state:t,range:D,match:C,commands:a,chain:d,can:c,pasteEvent:s,dropEvent:l});u.push(U)})}),u.every(h=>h!==null)}function kv(r){const{editor:e,rules:t}=r;let n=null,o=!1,i=!1,s=new ClipboardEvent("paste"),l=new DragEvent("drop");return t.map(d=>new Lt({view(c){const u=f=>{var h;n=!((h=c.dom.parentElement)===null||h===void 0)&&h.contains(f.target)?c.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:(c,u)=>(i=n===c.dom.parentElement,l=u,!1),paste:(c,u)=>{var f;const h=(f=u.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return s=u,o=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(c,u,f)=>{const h=c[0],p=h.getMeta("uiEvent")==="paste"&&!o,g=h.getMeta("uiEvent")==="drop"&&!i;if(!p&&!g)return;const v=u.doc.content.findDiffStart(f.doc.content),b=u.doc.content.findDiffEnd(f.doc.content);if(!Ov(v)||!b||v===b.b)return;const S=f.tr,C=ci({state:f,transaction:S});if(!(!wv({editor:e,state:C,from:Math.max(v-1,0),to:b.b-1,rule:d,pasteEvent:s,dropEvent:l})||!S.steps.length))return l=new DragEvent("drop"),s=new ClipboardEvent("paste"),S}}))}function Dv(r){const e=r.filter((t,n)=>r.indexOf(t)!==n);return[...new Set(e)]}class cr{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=cr.resolve(e),this.schema=Sv(this.extensions,t),this.extensions.forEach(n=>{var o;this.editor.extensionStorage[n.name]=n.storage;const i={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:zi(n.name,this.schema)};n.type==="mark"&&(!((o=ye(X(n,"keepOnSplit",i)))!==null&&o!==void 0)||o)&&this.splittableMarks.push(n.name);const s=X(n,"onBeforeCreate",i);s&&this.editor.on("beforeCreate",s);const l=X(n,"onCreate",i);l&&this.editor.on("create",l);const a=X(n,"onUpdate",i);a&&this.editor.on("update",a);const d=X(n,"onSelectionUpdate",i);d&&this.editor.on("selectionUpdate",d);const c=X(n,"onTransaction",i);c&&this.editor.on("transaction",c);const u=X(n,"onFocus",i);u&&this.editor.on("focus",u);const f=X(n,"onBlur",i);f&&this.editor.on("blur",f);const h=X(n,"onDestroy",i);h&&this.editor.on("destroy",h)})}static resolve(e){const t=cr.sort(cr.flatten(e)),n=Dv(t.map(o=>o.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},o=X(t,"addExtensions",n);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((n,o)=>{const i=X(n,"priority")||100,s=X(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:zi(t.name,this.schema)},o=X(t,"addCommands",n);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=cr.sort([...this.extensions].reverse()),n=[],o=[],i=t.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:zi(s.name,this.schema)},a=[],d=X(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>an.handleExit({editor:e,mark:s})),d){const g=Object.fromEntries(Object.entries(d()).map(([v,b])=>[v,()=>b({editor:e})]));c={...c,...g}}const u=Gg(c);a.push(u);const f=X(s,"addInputRules",l);oa(s,e.options.enableInputRules)&&f&&n.push(...f());const h=X(s,"addPasteRules",l);oa(s,e.options.enablePasteRules)&&h&&o.push(...h());const p=X(s,"addProseMirrorPlugins",l);if(p){const g=p();a.push(...g)}return a}).flat();return[Av({editor:e,rules:n}),...kv({editor:e,rules:o}),...i]}get attributes(){return Jd(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=fi(this.extensions);return Object.fromEntries(t.filter(n=>!!X(n,"addNodeView")).map(n=>{const o=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:e,type:nt(n.name,this.schema)},s=X(n,"addNodeView",i);if(!s)return[];const l=(a,d,c,u)=>{const f=xs(a,o);return s()({editor:e,node:a,getPos:c,decorations:u,HTMLAttributes:f,extension:n})};return[n.name,l]}))}}function Iv(r){return Object.prototype.toString.call(r).slice(8,-1)}function Ui(r){return Iv(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function pi(r,e){const t={...r};return Ui(r)&&Ui(e)&&Object.keys(e).forEach(n=>{Ui(e[n])?n in r?t[n]=pi(r[n],e[n]):Object.assign(t,{[n]:e[n]}):Object.assign(t,{[n]:e[n]})}),t}class wt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(X(this,"addOptions",{name:this.name}))),this.storage=ye(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new wt(e)}configure(e={}){const t=this.extend();return t.options=pi(this.options,e),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new wt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(X(t,"addOptions",{name:t.name})),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}}function Xd(r,e,t){const{from:n,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=t||{};let l="",a=!0;return r.nodesBetween(n,o,(d,c,u,f)=>{var h;const p=s==null?void 0:s[d.type.name];p?(d.isBlock&&!a&&(l+=i,a=!0),u&&(l+=p({node:d,pos:c,parent:u,index:f,range:e}))):d.isText?(l+=(h=d==null?void 0:d.text)===null||h===void 0?void 0:h.slice(Math.max(n,c)-c,o-c),a=!1):d.isBlock&&!a&&(l+=i,a=!0)}),l}function Qd(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Nv=wt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Lt({key:new Rn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(c=>c.$from.pos)),l=Math.max(...i.map(c=>c.$to.pos)),a=Qd(t);return Xd(n,{from:s,to:l},{textSerializers:a})}}})]}}),Pv=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Rv=(r=!1)=>({commands:e})=>e.setContent("",r),$v=()=>({state:r,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:o}=n;return t&&o.forEach(({$from:i,$to:s})=>{r.doc.nodesBetween(i.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:d,mapping:c}=e,u=d.resolve(c.map(a)),f=d.resolve(c.map(a+l.nodeSize)),h=u.blockRange(f);if(!h)return;const p=Ar(h);if(l.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},Bv=r=>e=>r(e),Lv=()=>({state:r,dispatch:e})=>iv(r,e),Fv=(r,e)=>({editor:t,tr:n})=>{const{state:o}=t,i=o.doc.slice(r.from,r.to);n.deleteRange(r.from,r.to);const s=n.mapping.map(e);return n.insert(s,i.content),n.setSelection(new ge(n.doc.resolve(s-1))),!0},Vv=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;const o=r.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===n.type){if(e){const l=o.before(i),a=o.after(i);r.delete(l,a).scrollIntoView()}return!0}return!1},zv=r=>({tr:e,state:t,dispatch:n})=>{const o=nt(r,t.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(n){const a=i.before(s),d=i.after(s);e.delete(a,d).scrollIntoView()}return!0}return!1},jv=r=>({tr:e,dispatch:t})=>{const{from:n,to:o}=r;return t&&e.delete(n,o),!0},Uv=()=>({state:r,dispatch:e})=>Jg(r,e),Hv=()=>({commands:r})=>r.keyboardShortcut("Enter"),Kv=()=>({state:r,dispatch:e})=>ov(r,e);function Jo(r,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(o=>t.strict?e[o]===r[o]:Xs(e[o])?e[o].test(r[o]):e[o]===r[o]):!0}function Ss(r,e,t={}){return r.find(n=>n.type===e&&Jo(n.attrs,t))}function Wv(r,e,t={}){return!!Ss(r,e,t)}function Qs(r,e,t={}){if(!r||!e)return;let n=r.parent.childAfter(r.parentOffset);if(r.parentOffset===n.offset&&n.offset!==0&&(n=r.parent.childBefore(r.parentOffset)),!n.node)return;const o=Ss([...n.node.marks],e,t);if(!o)return;let i=n.index,s=r.start()+n.offset,l=i+1,a=s+n.node.nodeSize;for(Ss([...n.node.marks],e,t);i>0&&o.isInSet(r.parent.child(i-1).marks);)i-=1,s-=r.parent.child(i).nodeSize;for(;l<r.parent.childCount&&Wv([...r.parent.child(l).marks],e,t);)a+=r.parent.child(l).nodeSize,l+=1;return{from:s,to:a}}function Bn(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}const Gv=(r,e={})=>({tr:t,state:n,dispatch:o})=>{const i=Bn(r,n.schema),{doc:s,selection:l}=t,{$from:a,from:d,to:c}=l;if(o){const u=Qs(a,i,e);if(u&&u.from<=d&&u.to>=c){const f=ge.create(s,u.from,u.to);t.setSelection(f)}}return!0},Jv=r=>e=>{const t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function Zd(r){return r instanceof ge}function Hn(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function _d(r,e=null){if(!e)return null;const t=be.atStart(r),n=be.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;const o=t.from,i=n.to;return e==="all"?ge.create(r,Hn(0,o,i),Hn(r.content.size,o,i)):ge.create(r,Hn(e,o,i),Hn(e,o,i))}function Zs(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Yv=(r=null,e={})=>({editor:t,view:n,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{Zs()&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(i&&r===null&&!Zd(t.state.selection))return s(),!0;const l=_d(o.doc,r)||t.state.selection,a=t.state.selection.eq(l);return i&&(a||o.setSelection(l),a&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},Xv=(r,e)=>t=>r.every((n,o)=>e(n,{...t,index:o})),Qv=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e);function ia(r){const e=`<body>${r}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Yo(r,e,t){if(t={slice:!0,parseOptions:{},...t},typeof r=="object"&&r!==null)try{return Array.isArray(r)&&r.length>0?L.fromArray(r.map(n=>e.nodeFromJSON(n))):e.nodeFromJSON(r)}catch(n){return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",n),Yo("",e,t)}if(typeof r=="string"){const n=gr.fromSchema(e);return t.slice?n.parseSlice(ia(r),t.parseOptions).content:n.parse(ia(r),t.parseOptions)}return Yo("",e,t)}function Zv(r,e,t){const n=r.steps.length-1;if(n<e)return;const o=r.steps[n];if(!(o instanceof it||o instanceof et))return;const i=r.mapping.maps[n];let s=0;i.forEach((l,a,d,c)=>{s===0&&(s=c)}),r.setSelection(be.near(r.doc.resolve(s),t))}const _v=r=>r.toString().startsWith("<"),qv=(r,e,t)=>({tr:n,dispatch:o,editor:i})=>{if(o){t={parseOptions:{},updateSelection:!0,...t};const s=Yo(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(s.toString()==="<>")return!0;let{from:l,to:a}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},d=!0,c=!0;if((_v(s)?s:[s]).forEach(f=>{f.check(),d=d?f.isText&&f.marks.length===0:!1,c=c?f.isBlock:!1}),l===a&&c){const{parent:f}=n.doc.resolve(l);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(l-=1,a+=1)}d?Array.isArray(e)?n.insertText(e.map(f=>f.text||"").join(""),l,a):typeof e=="object"&&e&&e.text?n.insertText(e.text,l,a):n.insertText(e,l,a):n.replaceWith(l,a,s),t.updateSelection&&Zv(n,n.steps.length-1,-1)}return!0},ey=()=>({state:r,dispatch:e})=>ev(r,e),ty=()=>({state:r,dispatch:e})=>tv(r,e),ny=()=>({state:r,dispatch:e})=>Xg(r,e),ry=()=>({state:r,dispatch:e})=>_g(r,e),oy=()=>({tr:r,state:e,dispatch:t})=>{try{const n=ii(e.doc,e.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},iy=()=>({state:r,dispatch:e,tr:t})=>{try{const n=ii(r.doc,r.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}};function _s(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function sy(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,o,i,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))Zs()||_s()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return n&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const ly=r=>({editor:e,view:t,tr:n,dispatch:o})=>{const i=sy(r).split(/-(?!$)/),s=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,l))});return a==null||a.steps.forEach(d=>{const c=d.map(n.mapping);c&&o&&n.maybeStep(c)}),!0};function ro(r,e,t={}){const{from:n,to:o,empty:i}=r.selection,s=e?nt(e,r.schema):null,l=[];r.doc.nodesBetween(n,o,(u,f)=>{if(u.isText)return;const h=Math.max(n,f),p=Math.min(o,f+u.nodeSize);l.push({node:u,from:h,to:p})});const a=o-n,d=l.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>Jo(u.node.attrs,t,{strict:!1}));return i?!!d.length:d.reduce((u,f)=>u+f.to-f.from,0)>=a}const ay=(r,e={})=>({state:t,dispatch:n})=>{const o=nt(r,t.schema);return ro(t,o,e)?nv(t,n):!1},dy=()=>({state:r,dispatch:e})=>sv(r,e),cy=r=>({state:e,dispatch:t})=>{const n=nt(r,e.schema);return pv(n)(e,t)},uy=()=>({state:r,dispatch:e})=>rv(r,e);function mi(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function sa(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,o)=>(t.includes(o)||(n[o]=r[o]),n),{})}const fy=(r,e)=>({tr:t,state:n,dispatch:o})=>{let i=null,s=null;const l=mi(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(i=nt(r,n.schema)),l==="mark"&&(s=Bn(r,n.schema)),o&&t.selection.ranges.forEach(a=>{n.doc.nodesBetween(a.$from.pos,a.$to.pos,(d,c)=>{i&&i===d.type&&t.setNodeMarkup(c,void 0,sa(d.attrs,e)),s&&d.marks.length&&d.marks.forEach(u=>{s===u.type&&t.addMark(c,c+d.nodeSize,s.create(sa(u.attrs,e)))})})}),!0):!1},hy=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),py=()=>({tr:r,commands:e})=>e.setTextSelection({from:0,to:r.doc.content.size}),my=()=>({state:r,dispatch:e})=>Qg(r,e),gy=()=>({state:r,dispatch:e})=>qg(r,e),vy=()=>({state:r,dispatch:e})=>lv(r,e),yy=()=>({state:r,dispatch:e})=>cv(r,e),by=()=>({state:r,dispatch:e})=>dv(r,e);function qd(r,e,t={}){return Yo(r,e,{slice:!1,parseOptions:t})}const xy=(r,e=!1,t={})=>({tr:n,editor:o,dispatch:i})=>{const{doc:s}=n,l=qd(r,o.schema,t);return i&&n.replaceWith(0,s.content.size,l).setMeta("preventUpdate",!e),!0};function gi(r,e){const t=Bn(e,r.schema),{from:n,to:o,empty:i}=r.selection,s=[];i?(r.storedMarks&&s.push(...r.storedMarks),s.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,o,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function Sy(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Cy(r,e){for(let t=r.depth;t>0;t-=1){const n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function qs(r){return e=>Cy(e.$from,r)}function Ey(r,e){const t=tn.fromSchema(e).serializeFragment(r),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}function Ay(r,e){const t={from:0,to:r.content.size};return Xd(r,t,e)}function Oy(r,e){const t=nt(e,r.schema),{from:n,to:o}=r.selection,i=[];r.doc.nodesBetween(n,o,l=>{i.push(l)});const s=i.reverse().find(l=>l.type.name===t.name);return s?{...s.attrs}:{}}function Ty(r,e){const t=mi(typeof e=="string"?e:e.name,r.schema);return t==="node"?Oy(r,e):t==="mark"?gi(r,e):{}}function ec(r,e,t){const n=[];return r===e?t.resolve(r).marks().forEach(o=>{const i=t.resolve(r-1),s=Qs(i,o.type);s&&n.push({mark:o,...s})}):t.nodesBetween(r,e,(o,i)=>{n.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),n}function To(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const o=r.find(i=>i.type===e&&i.name===n);return o?o.attribute.keepOnSplit:!1}))}function Cs(r,e,t={}){const{empty:n,ranges:o}=r.selection,i=e?Bn(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(u=>i?i.name===u.type.name:!0).find(u=>Jo(u.attrs,t,{strict:!1}));let s=0;const l=[];if(o.forEach(({$from:u,$to:f})=>{const h=u.pos,p=f.pos;r.doc.nodesBetween(h,p,(g,v)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(h,v),S=Math.min(p,v+g.nodeSize),C=S-b;s+=C,l.push(...g.marks.map(A=>({mark:A,from:b,to:S})))})}),s===0)return!1;const a=l.filter(u=>i?i.name===u.mark.type.name:!0).filter(u=>Jo(u.mark.attrs,t,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),d=l.filter(u=>i?u.mark.type!==i&&u.mark.type.excludes(i):!0).reduce((u,f)=>u+f.to-f.from,0);return(a>0?a+d:a)>=s}function My(r,e,t={}){if(!e)return ro(r,null,t)||Cs(r,null,t);const n=mi(e,r.schema);return n==="node"?ro(r,e,t):n==="mark"?Cs(r,e,t):!1}function la(r,e){const{nodeExtensions:t}=fi(e),n=t.find(s=>s.name===r);if(!n)return!1;const o={name:n.name,options:n.options,storage:n.storage},i=ye(X(n,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function wy(r){var e;const t=(e=r.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),n=r.toJSON();return JSON.stringify(t)===JSON.stringify(n)}function ky(r,e,t){var n;const{selection:o}=e;let i=null;if(Zd(o)&&(i=o.$cursor),i){const l=(n=r.storedMarks)!==null&&n!==void 0?n:i.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:s}=o;return s.some(({$from:l,$to:a})=>{let d=l.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(l.pos,a.pos,(c,u,f)=>{if(d)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(t));d=h&&p}return!d}),d})}const Dy=(r,e={})=>({tr:t,state:n,dispatch:o})=>{const{selection:i}=t,{empty:s,ranges:l}=i,a=Bn(r,n.schema);if(o)if(s){const d=gi(n,a);t.addStoredMark(a.create({...d,...e}))}else l.forEach(d=>{const c=d.$from.pos,u=d.$to.pos;n.doc.nodesBetween(c,u,(f,h)=>{const p=Math.max(h,c),g=Math.min(h+f.nodeSize,u);f.marks.find(b=>b.type===a)?f.marks.forEach(b=>{a===b.type&&t.addMark(p,g,a.create({...b.attrs,...e}))}):t.addMark(p,g,a.create(e))})});return ky(n,t,a)},Iy=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),Ny=(r,e={})=>({state:t,dispatch:n,chain:o})=>{const i=nt(r,t.schema);return i.isTextblock?o().command(({commands:s})=>ta(i,e)(t)?!0:s.clearNodes()).command(({state:s})=>ta(i,e)(s,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Py=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,o=Hn(r,0,n.content.size),i=re.create(n,o);e.setSelection(i)}return!0},Ry=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:o,to:i}=typeof r=="number"?{from:r,to:r}:r,s=ge.atStart(n).from,l=ge.atEnd(n).to,a=Hn(o,s,l),d=Hn(i,s,l),c=ge.create(n,a,d);e.setSelection(c)}return!0},$y=r=>({state:e,dispatch:t})=>{const n=nt(r,e.schema);return vv(n)(e,t)};function aa(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const n=t.filter(o=>e==null?void 0:e.includes(o.type.name));r.tr.ensureMarks(n)}}const By=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:o})=>{const{selection:i,doc:s}=e,{$from:l,$to:a}=i,d=o.extensionManager.attributes,c=To(d,l.node().type.name,l.node().attrs);if(i instanceof re&&i.node.isBlock)return!l.parentOffset||!hr(s,l.pos)?!1:(n&&(r&&aa(t,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(n){const u=a.parentOffset===a.parent.content.size;i instanceof ge&&e.deleteSelection();const f=l.depth===0?void 0:Sy(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=u&&f?[{type:f,attrs:c}]:void 0,p=hr(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&hr(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),p&&(e.split(e.mapping.map(l.pos),1,h),f&&!u&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}r&&aa(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Ly=r=>({tr:e,state:t,dispatch:n,editor:o})=>{var i;const s=nt(r,t.schema),{$from:l,$to:a}=t.selection,d=t.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(a))return!1;const c=l.node(-1);if(c.type!==s)return!1;const u=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==s||l.index(-2)!==l.node(-2).childCount-1)return!1;if(n){let v=L.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let U=l.depth-b;U>=l.depth-3;U-=1)v=L.from(l.node(U).copy(v));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C=To(u,l.node().type.name,l.node().attrs),A=((i=s.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(C))||void 0;v=v.append(L.from(s.createAndFill(null,A)||void 0));const O=l.before(l.depth-(b-1));e.replace(O,l.after(-S),new G(v,4-b,0));let D=-1;e.doc.nodesBetween(O,e.doc.content.size,(U,K)=>{if(D>-1)return!1;U.isTextblock&&U.content.size===0&&(D=K+1)}),D>-1&&e.setSelection(ge.near(e.doc.resolve(D))),e.scrollIntoView()}return!0}const f=a.pos===l.end()?c.contentMatchAt(0).defaultType:null,h=To(u,c.type.name,c.attrs),p=To(u,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const g=f?[{type:s,attrs:h},{type:f,attrs:p}]:[{type:s,attrs:h}];if(!hr(e.doc,l.pos,2))return!1;if(n){const{selection:v,storedMarks:b}=t,{splittableMarks:S}=o.extensionManager,C=b||v.$to.parentOffset&&v.$from.marks();if(e.split(l.pos,2,g).scrollIntoView(),!C||!n)return!0;const A=C.filter(O=>S.includes(O.type.name));e.ensureMarks(A)}return!0},Hi=(r,e)=>{const t=qs(s=>s.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const o=r.doc.nodeAt(n);return t.node.type===(o==null?void 0:o.type)&&Pn(r.doc,t.pos)&&r.join(t.pos),!0},Ki=(r,e)=>{const t=qs(s=>s.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const o=r.doc.nodeAt(n);return t.node.type===(o==null?void 0:o.type)&&Pn(r.doc,n)&&r.join(n),!0},Fy=(r,e,t,n={})=>({editor:o,tr:i,state:s,dispatch:l,chain:a,commands:d,can:c})=>{const{extensions:u,splittableMarks:f}=o.extensionManager,h=nt(r,s.schema),p=nt(e,s.schema),{selection:g,storedMarks:v}=s,{$from:b,$to:S}=g,C=b.blockRange(S),A=v||g.$to.parentOffset&&g.$from.marks();if(!C)return!1;const O=qs(D=>la(D.type.name,u))(g);if(C.depth>=1&&O&&C.depth-O.depth<=1){if(O.node.type===h)return d.liftListItem(p);if(la(O.node.type.name,u)&&h.validContent(O.node.content)&&l)return a().command(()=>(i.setNodeMarkup(O.pos,h),!0)).command(()=>Hi(i,h)).command(()=>Ki(i,h)).run()}return!t||!A||!l?a().command(()=>c().wrapInList(h,n)?!0:d.clearNodes()).wrapInList(h,n).command(()=>Hi(i,h)).command(()=>Ki(i,h)).run():a().command(()=>{const D=c().wrapInList(h,n),U=A.filter(K=>f.includes(K.type.name));return i.ensureMarks(U),D?!0:d.clearNodes()}).wrapInList(h,n).command(()=>Hi(i,h)).command(()=>Ki(i,h)).run()},Vy=(r,e={},t={})=>({state:n,commands:o})=>{const{extendEmptyMarkRange:i=!1}=t,s=Bn(r,n.schema);return Cs(n,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},zy=(r,e,t={})=>({state:n,commands:o})=>{const i=nt(r,n.schema),s=nt(e,n.schema);return ro(n,i,t)?o.setNode(s):o.setNode(i,t)},jy=(r,e={})=>({state:t,commands:n})=>{const o=nt(r,t.schema);return ro(t,o,e)?n.lift(o):n.wrapIn(o,e)},Uy=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let n=0;n<t.length;n+=1){const o=t[n];let i;if(o.spec.isInputRules&&(i=o.getState(r))){if(e){const s=r.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,r.schema.text(i.text,a))}else s.delete(i.from,i.to)}return!0}}return!1},Hy=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:n,ranges:o}=t;return n||e&&o.forEach(i=>{r.removeMark(i.$from.pos,i.$to.pos)}),!0},Ky=(r,e={})=>({tr:t,state:n,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=t,a=Bn(r,n.schema),{$from:d,empty:c,ranges:u}=l;if(!o)return!0;if(c&&s){let{from:f,to:h}=l;const p=(i=d.marks().find(v=>v.type===a))===null||i===void 0?void 0:i.attrs,g=Qs(d,a,p);g&&(f=g.from,h=g.to),t.removeMark(f,h,a)}else u.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,a)});return t.removeStoredMark(a),!0},Wy=(r,e={})=>({tr:t,state:n,dispatch:o})=>{let i=null,s=null;const l=mi(typeof r=="string"?r:r.name,n.schema);return l?(l==="node"&&(i=nt(r,n.schema)),l==="mark"&&(s=Bn(r,n.schema)),o&&t.selection.ranges.forEach(a=>{const d=a.$from.pos,c=a.$to.pos;n.doc.nodesBetween(d,c,(u,f)=>{i&&i===u.type&&t.setNodeMarkup(f,void 0,{...u.attrs,...e}),s&&u.marks.length&&u.marks.forEach(h=>{if(s===h.type){const p=Math.max(f,d),g=Math.min(f+u.nodeSize,c);t.addMark(p,g,s.create({...h.attrs,...e}))}})})}),!0):!1},Gy=(r,e={})=>({state:t,dispatch:n})=>{const o=nt(r,t.schema);return uv(o,e)(t,n)},Jy=(r,e={})=>({state:t,dispatch:n})=>{const o=nt(r,t.schema);return fv(o,e)(t,n)};var Yy=Object.freeze({__proto__:null,blur:Pv,clearContent:Rv,clearNodes:$v,command:Bv,createParagraphNear:Lv,cut:Fv,deleteCurrentNode:Vv,deleteNode:zv,deleteRange:jv,deleteSelection:Uv,enter:Hv,exitCode:Kv,extendMarkRange:Gv,first:Jv,focus:Yv,forEach:Xv,insertContent:Qv,insertContentAt:qv,joinUp:ey,joinDown:ty,joinBackward:ny,joinForward:ry,joinItemBackward:oy,joinItemForward:iy,keyboardShortcut:ly,lift:ay,liftEmptyBlock:dy,liftListItem:cy,newlineInCode:uy,resetAttributes:fy,scrollIntoView:hy,selectAll:py,selectNodeBackward:my,selectNodeForward:gy,selectParentNode:vy,selectTextblockEnd:yy,selectTextblockStart:by,setContent:xy,setMark:Dy,setMeta:Iy,setNode:Ny,setNodeSelection:Py,setTextSelection:Ry,sinkListItem:$y,splitBlock:By,splitListItem:Ly,toggleList:Fy,toggleMark:Vy,toggleNode:zy,toggleWrap:jy,undoInputRule:Uy,unsetAllMarks:Hy,unsetMark:Ky,updateAttributes:Wy,wrapIn:Gy,wrapInList:Jy});const Xy=wt.create({name:"commands",addCommands(){return{...Yy}}}),Qy=wt.create({name:"editable",addProseMirrorPlugins(){return[new Lt({key:new Rn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Zy=wt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new Lt({key:new Rn("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),_y=wt.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:d}=l,{empty:c,$anchor:u}=a,{pos:f,parent:h}=u,p=u.parent.isTextblock?l.doc.resolve(f-1):u,g=p.parent.type.spec.isolating,v=u.pos-u.parentOffset,b=g&&p.parent.childCount===1?v===u.pos:be.atStart(d).from===f;return!c||!b||!h.type.isTextblock||h.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...n},i={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Zs()||_s()?i:o},addProseMirrorPlugins(){return[new Lt({key:new Rn("clearDocument"),appendTransaction:(r,e,t)=>{if(!(r.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:o,from:i,to:s}=e.selection,l=be.atStart(e.doc).from,a=be.atEnd(e.doc).to;if(o||!(i===l&&s===a)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const u=t.tr,f=ci({state:t,transaction:u}),{commands:h}=new ui({editor:this.editor,state:f});if(h.clearNodes(),!!u.steps.length)return u}})]}}),qy=wt.create({name:"tabindex",addProseMirrorPlugins(){return[new Lt({key:new Rn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var e1=Object.freeze({__proto__:null,ClipboardTextSerializer:Nv,Commands:Xy,Editable:Qy,FocusEvents:Zy,Keymap:_y,Tabindex:qy});const t1=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function n1(r,e,t){const n=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(n!==null)return n;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),o.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(o),o}let r1=class extends yv{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=n1(t1,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=Yd(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:n});this.view.updateState(o)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(o=>!o.key.startsWith(t))});this.view.updateState(n)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(e1):[],...this.options.extensions].filter(n=>["extension","node","mark"].includes(n==null?void 0:n.type));this.extensionManager=new cr(t,this)}createCommandManager(){this.commandManager=new ui({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=qd(this.options.content,this.schema,this.options.parseOptions),t=_d(e,this.options.autofocus);this.view=new Lg(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:dr.create({doc:e,selection:t||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Ty(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return My(this.state,n,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ey(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Ay(this.state.doc,{blockSeparator:t,textSerializers:{...Qd(this.schema),...n}})}get isEmpty(){return wy(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}};function Sr(r){return new hi({find:r.find,handler:({state:e,range:t,match:n})=>{const o=ye(r.getAttributes,void 0,n);if(o===!1||o===null)return null;const{tr:i}=e,s=n[n.length-1],l=n[0];if(s){const a=l.search(/\S/),d=t.from+l.indexOf(s),c=d+s.length;if(ec(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===r.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;c<t.to&&i.delete(c,t.to),d>t.from&&i.delete(t.from+a,d);const f=t.from+a+s.length;i.addMark(t.from+a,f,r.type.create(o||{})),i.removeStoredMark(r.type)}}})}function o1(r){return new hi({find:r.find,handler:({state:e,range:t,match:n})=>{const o=ye(r.getAttributes,void 0,n)||{},{tr:i}=e,s=t.from;let l=t.to;const a=r.type.create(o);if(n[1]){const d=n[0].lastIndexOf(n[1]);let c=s+d;c>l?c=l:l=c+n[1].length;const u=n[0][n[0].length-1];i.insertText(u,s+n[0].length-1),i.replaceWith(c,l,a)}else n[0]&&i.insert(s-1,r.type.create(o)).delete(i.mapping.map(s),i.mapping.map(l));i.scrollIntoView()}})}function Es(r){return new hi({find:r.find,handler:({state:e,range:t,match:n})=>{const o=e.doc.resolve(t.from),i=ye(r.getAttributes,void 0,n)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,i)}})}function oo(r){return new hi({find:r.find,handler:({state:e,range:t,match:n,chain:o})=>{const i=ye(r.getAttributes,void 0,n)||{},s=e.tr.delete(t.from,t.to),a=s.doc.resolve(t.from).blockRange(),d=a&&Ls(a,r.type,i);if(!d)return null;if(s.wrap(a,d),r.keepMarks&&r.editor){const{selection:u,storedMarks:f}=e,{splittableMarks:h}=r.editor.extensionManager,p=f||u.$to.parentOffset&&u.$from.marks();if(p){const g=p.filter(v=>h.includes(v.type.name));s.ensureMarks(g)}}if(r.keepAttributes){const u=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,i).run()}const c=s.doc.resolve(t.from-1).nodeBefore;c&&c.type===r.type&&Pn(s.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,c))&&s.join(t.from-1)}})}class an{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(X(this,"addOptions",{name:this.name}))),this.storage=ye(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new an(e)}configure(e={}){const t=this.extend();return t.options=pi(this.options,e),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new an(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(X(t,"addOptions",{name:t.name})),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const a=s.find(d=>(d==null?void 0:d.type.name)===t.name);return a&&n.removeStoredMark(a),n.insertText(" ",o.pos),e.view.dispatch(n),!0}return!1}}class ut{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(X(this,"addOptions",{name:this.name}))),this.storage=ye(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ut(e)}configure(e={}){const t=this.extend();return t.options=pi(this.options,e),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new ut(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(X(t,"addOptions",{name:t.name})),t.storage=ye(X(t,"addStorage",{name:t.name,options:t.options})),t}}function Cr(r){return new Tv({find:r.find,handler:({state:e,range:t,match:n,pasteEvent:o})=>{const i=ye(r.getAttributes,void 0,n,o);if(i===!1||i===null)return null;const{tr:s}=e,l=n[n.length-1],a=n[0];let d=t.to;if(l){const c=a.search(/\S/),u=t.from+a.indexOf(l),f=u+l.length;if(ec(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===r.type&&v!==p.mark.type)).filter(p=>p.to>u).length)return null;f<t.to&&s.delete(f,t.to),u>t.from&&s.delete(t.from+c,u),d=t.from+c+l.length,s.addMark(t.from+c,d,r.type.create(i||{})),s.removeStoredMark(r.type)}}})}function da(r){return Ec((e,t)=>({get(){return e(),r},set(n){r=n,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class i1 extends r1{constructor(e={}){return super(e),this.vueRenderers=bc(new Map),this.contentComponent=null,this.reactiveState=da(this.view.state),this.reactiveExtensionStorage=da(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),xc(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const s1=Qt({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(r){const e=ke(),t=Ac();return Sc(()=>{const n=r.editor;n&&n.options.element&&e.value&&ka(()=>{if(!e.value||!n.options.element.firstChild)return;const o=y(e.value);e.value.append(...n.options.element.childNodes),n.contentComponent=t.ctx._,n.setOptions({element:o}),n.createNodeViews()})}),Cc(()=>{const n=r.editor;if(!n||(n.isDestroyed||n.view.setProps({nodeViews:{}}),n.contentComponent=null,!n.options.element.firstChild))return;const o=document.createElement("div");o.append(...n.options.element.childNodes),n.setOptions({element:o})}),{rootEl:e}},render(){const r=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const t=Si(ti,{to:e.teleportElement,key:e.id},Si(e.component,{ref:e.id,...e.props}));r.push(t)}),Si("div",{ref:e=>{this.rootEl=e}},...r)}}),l1=/^\s*>\s$/,a1=ut.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return["blockquote",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[oo({find:l1,type:this.type})]}}),d1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,c1=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,u1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,f1=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,h1=an.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Sr({find:d1,type:this.type}),Sr({find:u1,type:this.type})]},addPasteRules(){return[Cr({find:c1,type:this.type}),Cr({find:f1,type:this.type})]}}),p1=ut.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",_e(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ca=an.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:r,commands:e})=>{const t=gi(r,this.type);return Object.entries(t).some(([,o])=>!!o)?!0:e.unsetMark(this.name)}}}}),ua=/^\s*([-+*])\s$/,m1=ut.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(p1.name,this.editor.getAttributes(ca.name)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=oo({find:ua,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=oo({find:ua,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ca.name),editor:this.editor})),[r]}}),g1=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,v1=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,y1=an.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Sr({find:g1,type:this.type})]},addPasteRules(){return[Cr({find:v1,type:this.type})]}}),b1=/^```([a-z]+)?[\s\n]$/,x1=/^~~~([a-z]+)?[\s\n]$/,S1=ut.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=r.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",_e(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:n,empty:o}=t;if(!o||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!i||!s?!1:r.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:n}=e,{$from:o,empty:i}=t;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const l=o.after();return l===void 0||n.nodeAt(l)?!1:r.commands.exitCode()}}},addInputRules(){return[Es({find:b1,type:this.type,getAttributes:r=>({language:r[1]})}),Es({find:x1,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new Lt({key:new Rn("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),o=n?JSON.parse(n):void 0,i=o==null?void 0:o.mode;if(!t||!i)return!1;const{tr:s}=r.state;return s.replaceSelectionWith(this.type.create({language:i})),s.setSelection(ge.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(t.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),r.dispatch(s),!0}}})]}}),C1=ut.create({name:"doc",topNode:!0,content:"block+"});function E1(r={}){return new Lt({view(e){return new A1(e,r)}})}class A1{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n;if(t){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let d=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(d){let c=d.getBoundingClientRect(),u=l?c.bottom:c.top;l&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:c.left,right:c.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!n){let l=this.editorView.coordsAtPos(this.cursorPos);n={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let l=o.getBoundingClientRect();i=l.left-o.scrollLeft,s=l.top-o.scrollTop}this.element.style.left=n.left-i+"px",this.element.style.top=n.top-s+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=n&&n.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!i){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=td(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const O1=wt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[E1(this.options)]}});class Je extends be{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return Je.valid(n)?new Je(n):be.near(n)}content(){return G.empty}eq(e){return e instanceof Je&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Je(e.resolve(t.pos))}getBookmark(){return new el(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!T1(e)||!M1(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&Je.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){i=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=t;let a=e.doc.resolve(o);if(Je.valid(a))return a}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!re.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*t),n=!1;continue e}break}i=s,o+=t;let l=e.doc.resolve(o);if(Je.valid(l))return l}return null}}}Je.prototype.visible=!1;Je.findFrom=Je.findGapCursorFrom;be.jsonID("gapcursor",Je);class el{constructor(e){this.pos=e}map(e){return new el(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Je.valid(t)?new Je(t):be.near(t)}}function T1(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let o=n.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function M1(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let o=n.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function w1(){return new Lt({props:{decorations:N1,createSelectionBetween(r,e,t){return e.pos==t.pos&&Je.valid(t)?new Je(t):null},handleClick:D1,handleKeyDown:k1,handleDOMEvents:{beforeinput:I1}}})}const k1=jd({ArrowLeft:go("horiz",-1),ArrowRight:go("horiz",1),ArrowUp:go("vert",-1),ArrowDown:go("vert",1)});function go(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,o,i){let s=n.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof ge){if(!i.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=n.doc.resolve(e>0?l.after():l.before())}let d=Je.findGapCursorFrom(l,e,a);return d?(o&&o(n.tr.setSelection(new Je(d))),!0):!1}}function D1(r,e,t){if(!r||!r.editable)return!1;let n=r.state.doc.resolve(e);if(!Je.valid(n))return!1;let o=r.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&re.isSelectable(r.state.doc.nodeAt(o.inside))?!1:(r.dispatch(r.state.tr.setSelection(new Je(n))),!0)}function I1(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof Je))return!1;let{$from:t}=r.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;let o=L.empty;for(let s=n.length-1;s>=0;s--)o=L.from(n[s].createAndFill(null,o));let i=r.state.tr.replace(t.pos,t.pos,new G(o,0,0));return i.setSelection(ge.near(i.doc.resolve(t.pos+1))),r.dispatch(i),!1}function N1(r){if(!(r.selection instanceof Je))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ze.create(r.doc,[Rt.widget(r.selection.head,e,{key:"gapcursor"})])}const P1=wt.create({name:"gapCursor",addProseMirrorPlugins(){return[w1()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=ye(X(r,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),R1=ut.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",_e(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:o,storedMarks:i}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=n.extensionManager,a=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:c})=>{if(c&&a&&s){const u=a.filter(f=>l.includes(f.type.name));d.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$1=ut.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>Es({find:new RegExp(`^(#{1,${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}});var Xo=200,tt=function(){};tt.prototype.append=function(e){return e.length?(e=tt.from(e),!this.length&&e||e.length<Xo&&this.leafAppend(e)||this.length<Xo&&e.leafPrepend(this)||this.appendInner(e)):this};tt.prototype.prepend=function(e){return e.length?tt.from(e).append(this):this};tt.prototype.appendInner=function(e){return new B1(this,e)};tt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?tt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};tt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};tt.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};tt.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},t,n),o};tt.from=function(e){return e instanceof tt?e:e&&e.length?new tc(e):tt.empty};var tc=function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,l){for(var a=i;a<s;a++)if(o(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,l){for(var a=i-1;a>=s;a--)if(o(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Xo)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Xo)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(tt);tt.empty=new tc([]);var B1=function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,o,i,s){var l=this.left.length;if(o<l&&this.left.forEachInner(n,o,Math.min(i,l),s)===!1||i>l&&this.right.forEachInner(n,Math.max(o-l,0),Math.min(this.length,i)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,o,i,s){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(n,o-l,Math.max(i,l)-l,s+l)===!1||i<l&&this.left.forEachInvertedInner(n,Math.min(o,l),i,s)===!1)return!1},e.prototype.sliceInner=function(n,o){if(n==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(n,o):n>=i?this.right.slice(n-i,o-i):this.left.slice(n,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(n){var o=this.right.leafAppend(n);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(n){var o=this.left.leafPrepend(n);if(o)return new e(o,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(tt);const L1=500;class Jt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let o,i;t&&(o=this.remapping(n,this.items.length),i=o.maps.length);let s=e.tr,l,a,d=[],c=[];return this.items.forEach((u,f)=>{if(!u.step){o||(o=this.remapping(n,f+1),i=o.maps.length),i--,c.push(u);return}if(o){c.push(new qt(u.map));let h=u.step.map(o.slice(i)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],d.push(new qt(p,void 0,void 0,d.length+c.length))),i--,p&&o.appendMap(p,i)}else s.maybeStep(u.step);if(u.selection)return l=o?u.selection.map(o.slice(i)):u.selection,a=new Jt(this.items.slice(0,n).append(c.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,t,n,o){let i=[],s=this.eventCount,l=this.items,a=!o&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let u=e.steps[c].invert(e.docs[c]),f=new qt(e.mapping.maps[c],u,t),h;(h=a&&a.merge(f))&&(f=h,c?i.pop():l=l.slice(0,l.length-1)),i.push(f),t&&(s++,t=void 0),o||(a=f)}let d=s-n.depth;return d>V1&&(l=F1(l,d),s-=d),new Jt(l.append(i),s)}remapping(e,t){let n=new fr;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?n.maps.length-o.mirrorOffset:void 0;n.appendMap(o.map,s)},e,t),n}addMaps(e){return this.eventCount==0?this:new Jt(this.items.append(e.map(t=>new qt(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},o);let a=t;this.items.forEach(f=>{let h=i.getMirror(--a);if(h==null)return;s=Math.min(s,h);let p=i.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(i.slice(a+1,h));v&&l++,n.push(new qt(p,g,v))}else n.push(new qt(p))},o);let d=[];for(let f=t;f<s;f++)d.push(new qt(i.maps[f]));let c=this.items.slice(0,o).append(d).append(n),u=new Jt(c,l);return u.emptyItemCount()>L1&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,o=[],i=0;return this.items.forEach((s,l)=>{if(l>=e)o.push(s),s.selection&&i++;else if(s.step){let a=s.step.map(t.slice(n)),d=a&&a.getMap();if(n--,d&&t.appendMap(d,n),a){let c=s.selection&&s.selection.map(t.slice(n));c&&i++;let u=new qt(d.invert(),a,c),f,h=o.length-1;(f=o.length&&o[h].merge(u))?o[h]=f:o.push(u)}}else s.map&&n--},this.items.length,0),new Jt(tt.from(o.reverse()),i)}}Jt.empty=new Jt(tt.empty,0);function F1(r,e){let t;return r.forEach((n,o)=>{if(n.selection&&e--==0)return t=o,!1}),r.slice(t)}class qt{constructor(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new qt(t.getMap().invert(),t,this.selection)}}}class xn{constructor(e,t,n,o,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o,this.prevComposition=i}}const V1=20;function z1(r,e,t,n){let o=t.getMeta(In),i;if(o)return o.historyState;t.getMeta(U1)&&(r=new xn(r.done,r.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(s&&s.getMeta(In))return s.getMeta(In).redo?new xn(r.done.addTransform(t,void 0,n,Mo(e)),r.undone,fa(t.mapping.maps[t.steps.length-1]),r.prevTime,r.prevComposition):new xn(r.done,r.undone.addTransform(t,void 0,n,Mo(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=r.prevTime==0||!s&&r.prevComposition!=l&&(r.prevTime<(t.time||0)-n.newGroupDelay||!j1(t,r.prevRanges)),d=s?Wi(r.prevRanges,t.mapping):fa(t.mapping.maps[t.steps.length-1]);return new xn(r.done.addTransform(t,a?e.selection.getBookmark():void 0,n,Mo(e)),Jt.empty,d,t.time,l??r.prevComposition)}else return(i=t.getMeta("rebased"))?new xn(r.done.rebased(t,i),r.undone.rebased(t,i),Wi(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new xn(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),Wi(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function j1(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((n,o)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&o>=e[i]&&(t=!0)}),t}function fa(r){let e=[];return r.forEach((t,n,o,i)=>e.push(o,i)),e}function Wi(r,e){if(!r)return null;let t=[];for(let n=0;n<r.length;n+=2){let o=e.map(r[n],1),i=e.map(r[n+1],-1);o<=i&&t.push(o,i)}return t}function nc(r,e,t,n){let o=Mo(e),i=In.get(e).spec.config,s=(n?r.undone:r.done).popEvent(e,o);if(!s)return;let l=s.selection.resolve(s.transform.doc),a=(n?r.done:r.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),d=new xn(n?a:s.remaining,n?s.remaining:a,null,0,-1);t(s.transform.setSelection(l).setMeta(In,{redo:n,historyState:d}).scrollIntoView())}let Gi=!1,ha=null;function Mo(r){let e=r.plugins;if(ha!=e){Gi=!1,ha=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Gi=!0;break}}return Gi}const In=new Rn("history"),U1=new Rn("closeHistory");function H1(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Lt({key:In,state:{init(){return new xn(Jt.empty,Jt.empty,null,0,-1)},apply(e,t,n){return z1(t,n,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,o=n=="historyUndo"?rc:n=="historyRedo"?oc:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}const rc=(r,e)=>{let t=In.getState(r);return!t||t.done.eventCount==0?!1:(e&&nc(t,r,e,!1),!0)},oc=(r,e)=>{let t=In.getState(r);return!t||t.undone.eventCount==0?!1:(e&&nc(t,r,e,!0),!0)},K1=wt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>rc(r,e),redo:()=>({state:r,dispatch:e})=>oc(r,e)}},addProseMirrorPlugins(){return[H1(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),W1=ut.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",_e(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{const{$to:t}=e.selection,n=r();return t.parentOffset===0?n.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):n.insertContent({type:this.name}),n.command(({tr:o,dispatch:i})=>{var s;if(i){const{$to:l}=o.selection,a=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(ge.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(re.create(o.doc,l.pos)):o.setSelection(ge.create(o.doc,l.pos));else{const d=(s=l.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();d&&(o.insert(a,d),o.setSelection(ge.create(o.doc,a+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[o1({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),G1=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,J1=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Y1=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,X1=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Q1=an.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Sr({find:G1,type:this.type}),Sr({find:Y1,type:this.type})]},addPasteRules(){return[Cr({find:J1,type:this.type}),Cr({find:X1,type:this.type})]}}),Z1=ut.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",_e(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_1=ut.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",_e(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pa=an.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:r,commands:e})=>{const t=gi(r,this.type);return Object.entries(t).some(([,o])=>!!o)?!0:e.unsetMark(this.name)}}}}),ma=/^(\d+)\.\s$/,q1=ut.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",_e(this.options.HTMLAttributes,t),0]:["ol",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_1.name,this.editor.getAttributes(pa.name)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=oo({find:ma,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=oo({find:ma,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pa.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),e0=ut.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),t0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,n0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,r0=an.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",_e(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){const r={};return _s()?r["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():r["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),r},addInputRules(){return[Sr({find:t0,type:this.type})]},addPasteRules(){return[Cr({find:n0,type:this.type})]}}),o0=ut.create({name:"text",group:"inline"}),i0=wt.create({name:"starterKit",addExtensions(){var r,e,t,n,o,i,s,l,a,d,c,u,f,h,p,g,v,b;const S=[];return this.options.blockquote!==!1&&S.push(a1.configure((r=this.options)===null||r===void 0?void 0:r.blockquote)),this.options.bold!==!1&&S.push(h1.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&S.push(m1.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&S.push(y1.configure((n=this.options)===null||n===void 0?void 0:n.code)),this.options.codeBlock!==!1&&S.push(S1.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&S.push(C1.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&S.push(O1.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&S.push(P1.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&S.push(R1.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&S.push($1.configure((d=this.options)===null||d===void 0?void 0:d.heading)),this.options.history!==!1&&S.push(K1.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&S.push(W1.configure((u=this.options)===null||u===void 0?void 0:u.horizontalRule)),this.options.italic!==!1&&S.push(Q1.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&S.push(Z1.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&S.push(q1.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&S.push(e0.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&S.push(r0.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&S.push(o0.configure((b=this.options)===null||b===void 0?void 0:b.text)),S}}),s0={key:0,class:"text-btn"},l0=["disabled"],a0=m("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M15.4062 19.625H9.625V8.375H14.9375C15.5639 8.37504 16.1771 8.55435 16.7048 8.89174C17.2325 9.22914 17.6526 9.71052 17.9155 10.279C18.1784 10.8475 18.2731 11.4794 18.1884 12.1C18.1037 12.7206 17.8431 13.304 17.4375 13.7812C17.9673 14.205 18.3528 14.7825 18.5408 15.4344C18.7289 16.0862 18.7102 16.7803 18.4875 17.4211C18.2647 18.0619 17.8488 18.6179 17.297 19.0126C16.7452 19.4073 16.0847 19.6213 15.4062 19.625ZM11.5 17.75H15.3937C15.5784 17.75 15.7613 17.7136 15.9319 17.643C16.1025 17.5723 16.2575 17.4687 16.3881 17.3381C16.5187 17.2075 16.6223 17.0525 16.693 16.8819C16.7636 16.7113 16.8 16.5284 16.8 16.3438C16.8 16.1591 16.7636 15.9762 16.693 15.8056C16.6223 15.635 16.5187 15.48 16.3881 15.3494C16.2575 15.2188 16.1025 15.1152 15.9319 15.0445C15.7613 14.9739 15.5784 14.9375 15.3937 14.9375H11.5V17.75ZM11.5 13.0625H14.9375C15.1222 13.0625 15.305 13.0261 15.4756 12.9555C15.6463 12.8848 15.8013 12.7812 15.9319 12.6506C16.0625 12.52 16.166 12.365 16.2367 12.1944C16.3074 12.0238 16.3438 11.8409 16.3438 11.6562C16.3438 11.4716 16.3074 11.2887 16.2367 11.1181C16.166 10.9475 16.0625 10.7925 15.9319 10.6619C15.8013 10.5313 15.6463 10.4277 15.4756 10.357C15.305 10.2864 15.1222 10.25 14.9375 10.25H11.5V13.0625Z",fill:"#3C3C3C"})],-1),d0=[a0],c0=["disabled"],u0=m("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M19.625 9.625V8.375H11.5V9.625H14.7125L11.9813 18.375H8.375V19.625H16.5V18.375H13.2875L16.0187 9.625H19.625Z",fill:"#3C3C3C"})],-1),f0=[u0],As=Qt({__name:"TextEdit",props:{modelValue:{type:String,default:"<p>請輸入投保規則</p>"}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,n=ke();return Is(()=>{ka(()=>{n.value=new i1({content:t.modelValue,onUpdate:({editor:o})=>{e("update:modelValue",o.getHTML())},extensions:[i0],editorProps:{attributes:{class:"text-area"}}})})}),(o,i)=>(te(),fe(rn,null,[n.value?(te(),fe("div",s0,[m("button",{disabled:!n.value.can().chain().focus().toggleBold().run(),class:de([{"bg-neutral-200":n.value.isActive("bold")},"mr-1"]),onClick:i[0]||(i[0]=il(s=>n.value.chain().focus().toggleBold().run(),["prevent"]))},d0,10,l0),m("button",{disabled:!n.value.can().chain().focus().toggleItalic().run(),class:de({"bg-neutral-200":n.value.isActive("italic")}),onClick:i[1]||(i[1]=il(s=>n.value.chain().focus().toggleItalic().run(),["prevent"]))},f0,10,c0)])):Se("",!0),x(y(s1),{editor:n.value},null,8,["editor"])],64))}});const vi=r=>(ni("data-v-6d411977"),r=r(),ri(),r),h0={class:"modal-mask QA-form"},p0={class:"content"},m0={class:"w-[80%] py-4 gap-6 mx-auto grid grid-cols-1"},g0=vi(()=>m("h2",null,"發佈時間",-1)),v0={class:"flex items-center"},y0=vi(()=>m("span",{class:"mx-2"},"-",-1)),b0=vi(()=>m("h2",null,"規則名稱",-1)),x0=vi(()=>m("h2",null,"回答",-1)),S0={class:"flex items-center justify-center py-6"},C0=Qt({__name:"AddEditRulesForm",props:{ruleType:{type:String,default:"add"},editId:{type:String,default:""}},emits:["close","addOrEditRule"],setup(r,{emit:e}){const t=r,n=mn(),{createInfo:o}=pn(n),i=ke({addRuleStart:"",addRuleEnd:"",addContent:"",editRuleStart:"",editRuleEnd:"",addRuleName:"",editRuleName:"",editContent:""}),s=Tt(()=>t.editId),l=Tt(()=>t.ruleType==="add"?"新增投保規則模板":"編輯投保規則模板"),a=Tt(()=>t.ruleType==="add"?"addRuleStart":"editRuleStart"),d=Tt(()=>t.ruleType==="add"?"addRuleEnd":"editRuleEnd"),c=Tt(()=>t.ruleType==="add"?"addRuleName":"editRuleName");Is(()=>{switch(t.ruleType){case"edit":const b=o.value.selectedRules.findIndex(C=>C.id===s.value),S=o.value.selectedRules[b];i.value.editContent=S.content,i.value.editRuleStart=S.startDate,i.value.editRuleEnd=S.endDate,i.value.editRuleName=S.name;break}});function u(){return t.ruleType==="edit"?i.value.editRuleStart:(i.value.addRuleStart=Ro().format("YYYY/MM/DD"),i.value.addRuleStart)}function f(){if(t.ruleType==="edit")return i.value.editRuleEnd}const h=Ns({});function p(b,S){i.value[S]=Ro(b).format("YYYY/MM/DD")}function g(b,S){switch(S){case"add":const C={id:Date.now().toString(),startDate:b.addRuleStart,endDate:b.addRuleEnd,name:b.addRuleName,content:i.value.addContent,expand:!1,newAdd:!0};e("addOrEditRule",C);break;case"edit":const A={startDate:b.editRuleStart,endDate:b.editRuleEnd,name:b.editRuleName,content:i.value.editContent};e("addOrEditRule",A);break}v()}function v(){e("close")}return(b,S)=>(te(),Kt(ti,{to:"body"},[x(Ds,{name:"modal"},{default:T(()=>[m("div",h0,[m("div",p0,[x(Rs,{title:l.value,onClose:v},null,8,["title"]),x(y(Ps),{"validation-schema":y(h),"initial-values":i.value,onSubmit:S[4]||(S[4]=C=>g(C,r.ruleType))},{default:T(()=>[m("div",m0,[m("div",null,[g0,m("div",v0,[x(y(J),{name:a.value},{default:T(({field:C,errorMessage:A})=>[x(Pt,_(C,{value:u(),placeholder:"請選擇日期","error-message":A,"onUpdate:modelValue":S[0]||(S[0]=O=>p(O,a.value))}),null,16,["value","error-message"])]),_:1},8,["name"]),y0,x(y(J),{name:d.value},{default:T(({field:C,errorMessage:A})=>[x(Pt,_(C,{value:f(),placeholder:"請選擇日期","error-message":A,"onUpdate:modelValue":S[1]||(S[1]=O=>p(O,d.value))}),null,16,["value","error-message"])]),_:1},8,["name"])])]),m("div",null,[b0,x(y(J),{name:c.value},{default:T(({field:C,value:A,errorMessage:O})=>[x(le,_(C,{placeholder:"請輸入規則名稱","model-value":i.value[c.value]=A,"error-message":O}),null,16,["model-value","error-message"])]),_:1},8,["name"])]),m("div",null,[x0,r.ruleType==="add"?(te(),Kt(As,{key:0,modelValue:i.value.addContent,"onUpdate:modelValue":S[2]||(S[2]=C=>i.value.addContent=C)},null,8,["modelValue"])):Se("",!0),r.ruleType==="edit"?(te(),Kt(As,{key:1,modelValue:i.value.editContent,"onUpdate:modelValue":S[3]||(S[3]=C=>i.value.editContent=C)},null,8,["modelValue"])):Se("",!0)])]),m("div",S0,[x(Ne,{size:"custom",width:250,height:48,outline:!0,class:"mr-4",onClick:v},{default:T(()=>[we(" 取消 ")]),_:1}),x(Ne,{size:"custom",type:"submit",width:250,height:48},{default:T(()=>[we(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])]),_:1})]))}});const ga=io(C0,[["__scopeId","data-v-6d411977"]]),Ft=r=>(ni("data-v-5f35f335"),r=r(),ri(),r),E0={class:"modal-mask QA-form"},A0={class:"content"},O0={class:"w-[80%] py-4 gap-6 mx-auto grid grid-cols-1"},T0=Ft(()=>m("h2",null,"發佈時間",-1)),M0={class:"flex items-center"},w0=Ft(()=>m("span",{class:"mx-2"},"-",-1)),k0=Ft(()=>m("h2",null,"廣告名稱",-1)),D0=Ft(()=>m("h2",null,"廣告小字",-1)),I0=Ft(()=>m("h2",null,"廣告大字",-1)),N0=Ft(()=>m("h2",null,"超連結",-1)),P0={class:"grid grid-cols-2 gap-8"},R0=Ft(()=>m("h2",null,"大圖片上傳",-1)),$0={id:"upload-big",class:"flex flex-col justify-center items-center border border-dashed border-black/30 rounded-md p-10 pb-6 min-h-[263px]"},B0=Ft(()=>m("img",{src:Na,alt:"icon-upload",class:"mb-2"},null,-1)),L0=Ft(()=>m("p",{class:"text-sm text-black/50 mb-4"}," 限上傳PNG檔或JPG檔 ",-1)),F0={class:"min-h-[24px]"},V0={key:0,class:"flex items-center"},z0={class:"inline-block w-[110px] truncate"},j0=Ft(()=>m("h2",null,"小圖片上傳",-1)),U0={id:"upload-small",class:"flex flex-col justify-center items-center border border-dashed border-black/30 rounded-md p-10 pb-6 min-h-[263px]"},H0=Ft(()=>m("img",{src:Na,alt:"icon-upload",class:"mb-2"},null,-1)),K0=Ft(()=>m("p",{class:"text-sm text-black/50 mb-4"}," 限上傳PNG檔或JPG檔 ",-1)),W0={class:"min-h-[24px]"},G0={key:0,class:"flex items-center"},J0={class:"inline-block w-[110px] truncate"},Y0={class:"flex items-center justify-center py-6"},X0=Qt({__name:"AddEidtADForm",props:{adType:{type:String,default:"add"},editId:{type:String,default:""}},emits:["close","addOrEditAd"],setup(r,{emit:e}){const t=r,n=mn(),{createInfo:o}=pn(n),i=Tt(()=>t.editId),s=ke(""),l=ke(""),a=ke({addAdStart:"",addAdEnd:"",addAdName:"",addTextSmall:"",addTextBig:"",addUrl:"",addBigPic:void 0,addSmallPic:void 0,editAdStart:"",editAdEnd:"",editAdName:"",editTextSmall:"",editTextBig:"",editUrl:"",editBigPic:void 0,editSmallPic:void 0}),d=Tt(()=>t.adType==="add"?"新增廣告":"編輯廣告"),c=Tt(()=>t.adType==="add"?"addAdStart":"editAdStart"),u=Tt(()=>t.adType==="add"?"addAdEnd":"editAdEnd"),f=Tt(()=>t.adType==="add"?"addAdName":"editAdName"),h=Tt(()=>t.adType==="add"?"addTextSmall":"editTextSmall"),p=Tt(()=>t.adType==="add"?"addTextBig":"editTextBig"),g=Tt(()=>t.adType==="add"?"addUrl":"editUrl"),v=ke(),b=ke(),S=Ns({});Is(()=>{switch(t.adType){case"edit":const B=o.value.selectedAd.findIndex(P=>P.id===i.value),z=o.value.selectedAd[B];a.value.editAdStart=z.startDate,a.value.editAdEnd=z.endDate,a.value.editAdName=z.name,a.value.editTextBig=z.textBig,a.value.editTextSmall=z.textSmall,a.value.editUrl=z.url,a.value.editBigPic=z.bigPic,a.value.editSmallPic=z.smallPic,v.value=z.bigPic,b.value=z.smallPic,console.log(a.value);break}});function C(){return t.adType==="edit"?a.value.editAdStart:(a.value.addAdStart=Ro().format("YYYY/MM/DD"),a.value.addAdStart)}function A(){if(t.adType==="edit")return a.value.editAdEnd}function O(B,z){const P=document.getElementById(B),R=document.getElementById(`upload-input${B}`);R==null||R.remove();const W=document.createElement("input");P==null||P.appendChild(W),W.id=`upload-input${B}`,W.style.display="none",W.type="file",W.accept="image/png,image/jpeg",W.addEventListener("change",H=>{U(H,z)}),W.click()}function D(B,z){const P=document.getElementById(`upload-input${B}`);switch(P==null||P.remove(),z){case"big":s.value="";break;case"small":l.value="";break}}function U(B,z){const P=B.target.files[0];switch(z){case"big":t.adType==="add"?a.value.addBigPic=P:a.value.editBigPic=P,s.value=P.name;break;case"small":t.adType==="add"?a.value.addSmallPic=P:a.value.editSmallPic=P,l.value=P.name;break}}function K(B,z){a.value[z]=Ro(B).format("YYYY/MM/DD")}function k(B,z){switch(z){case"add":const P={id:Date.now().toString(),startDate:B.addAdStart,endDate:B.addAdEnd,name:B.addAdName,textSmall:B.addTextSmall,textBig:B.addTextBig,url:B.addUrl,bigPic:a.value.addBigPic,smallPic:a.value.addSmallPic,expand:!1,newAdd:!0};e("addOrEditAd",P);break;case"edit":let R;const W={startDate:B.editAdStart,endDate:B.editAdEnd,name:B.editAdName,textBig:B.editTextBig,textSmall:B.editTextSmall,url:B.editUrl},H={bigPic:a.value.editBigPic,bigPicChange:!0},ee={smallPic:a.value.editSmallPic,smallPicChange:!0};switch(!0){case(v.value===a.value.editBigPic&&b.value===a.value.editSmallPic):R={...W};break;case(v.value!==a.value.editBigPic&&b.value===a.value.editSmallPic):R={...W,...H};break;case(v.value===a.value.editBigPic&&b.value!==a.value.editSmallPic):R={...W,...ee};break;case(v.value!==a.value.editBigPic&&b.value!==a.value.editSmallPic):R={...W,...H,...ee};break}e("addOrEditAd",R);break}V()}function V(){e("close")}return(B,z)=>(te(),Kt(ti,{to:"body"},[x(Ds,{name:"modal"},{default:T(()=>[m("div",E0,[m("div",A0,[x(Rs,{title:d.value,onClose:V},null,8,["title"]),x(y(Ps),{"validation-schema":y(S),"initial-values":a.value,onSubmit:z[6]||(z[6]=P=>k(P,r.adType))},{default:T(()=>[m("div",O0,[m("div",null,[T0,m("div",M0,[x(y(J),{name:c.value},{default:T(({field:P,errorMessage:R})=>[x(Pt,_(P,{value:C(),placeholder:"請選擇日期","error-message":R,"onUpdate:modelValue":z[0]||(z[0]=W=>K(W,c.value))}),null,16,["value","error-message"])]),_:1},8,["name"]),w0,x(y(J),{name:u.value},{default:T(({field:P,errorMessage:R})=>[x(Pt,_(P,{value:A(),placeholder:"請選擇日期","error-message":R,"onUpdate:modelValue":z[1]||(z[1]=W=>K(W,u.value))}),null,16,["value","error-message"])]),_:1},8,["name"])])]),m("div",null,[k0,x(y(J),{name:f.value},{default:T(({field:P,value:R,errorMessage:W})=>[x(le,_(P,{placeholder:"請輸入規則名稱","model-value":a.value[f.value]=R,"error-message":W}),null,16,["model-value","error-message"])]),_:1},8,["name"])]),m("div",null,[D0,x(y(J),{name:h.value},{default:T(({field:P,value:R,errorMessage:W})=>[x(le,_(P,{placeholder:"請輸入廣告小字","model-value":a.value[h.value]=R,"error-message":W}),null,16,["model-value","error-message"])]),_:1},8,["name"])]),m("div",null,[I0,x(y(J),{name:p.value},{default:T(({field:P,value:R,errorMessage:W})=>[x(le,_(P,{placeholder:"請輸入廣告大字","model-value":a.value[p.value]=R,"error-message":W}),null,16,["model-value","error-message"])]),_:1},8,["name"])]),m("div",null,[N0,x(y(J),{name:g.value},{default:T(({field:P,value:R,errorMessage:W})=>[x(le,_(P,{placeholder:"請輸入超連結網址","model-value":a.value[g.value]=R,"error-message":W}),null,16,["model-value","error-message"])]),_:1},8,["name"])]),m("div",P0,[m("div",null,[R0,m("div",$0,[B0,L0,x(Ne,{size:"m",disabled:s.value!=="",class:"mb-4",onClick:z[2]||(z[2]=P=>O("upload-big","big"))},{default:T(()=>[we(qe(s.value!==""?"已上傳":"上傳檔案"),1)]),_:1},8,["disabled"]),m("div",F0,[s.value!==""?(te(),fe("div",V0,[m("span",z0,qe(s.value),1),m("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:z[3]||(z[3]=P=>D("upload-big","big"))},"✕")])):Se("",!0)])])]),m("div",null,[j0,m("div",U0,[H0,K0,x(Ne,{size:"m",disabled:l.value!=="",class:"mb-4",onClick:z[4]||(z[4]=P=>O("upload-small","small"))},{default:T(()=>[we(qe(l.value!==""?"已上傳":"上傳檔案"),1)]),_:1},8,["disabled"]),m("div",W0,[l.value!==""?(te(),fe("div",G0,[m("span",J0,qe(l.value),1),m("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:z[5]||(z[5]=P=>D("upload-small","small"))},"✕")])):Se("",!0)])])])])]),m("div",Y0,[x(Ne,{size:"custom",width:250,height:48,outline:!0,class:"mr-4",onClick:V},{default:T(()=>[we(" 取消 ")]),_:1}),x(Ne,{size:"custom",type:"submit",width:250,height:48},{default:T(()=>[we(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])]),_:1})]))}});const va=io(X0,[["__scopeId","data-v-5f35f335"]]);var lr=(r=>(r.Life="壽險",r.Medical="醫療險",r.Cancer="癌症險",r.Accident="意外險",r))(lr||{});const Re=r=>(ni("data-v-d14306f8"),r=r(),ri(),r),Q0={key:0},Z0={class:"card-header"},_0=["onClick"],q0=Re(()=>m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.31952 13.6763C-0.106507 13.2446 -0.106507 12.5448 0.31952 12.1132L5.36631 7L0.319519 1.8868C-0.106507 1.45517 -0.106507 0.755356 0.319519 0.323724C0.745546 -0.107907 1.43627 -0.107907 1.8623 0.323724L7.68048 6.21846C7.88507 6.42574 8 6.70687 8 7C8 7.29313 7.88507 7.57426 7.68048 7.78154L1.8623 13.6763C1.43627 14.1079 0.745546 14.1079 0.31952 13.6763Z",fill:"#004F85"},null,-1)),eb=[q0],tb=["onClick"],nb=Re(()=>m("img",{src:Ia,alt:"icon-close"},null,-1)),rb=[nb],ob={class:"card-content"},ib=Re(()=>m("h3",{class:"h3-title"}," 選擇所需欄位 ",-1)),sb={class:"mb-4"},lb=Re(()=>m("label",{class:"lable-text"},"保單編號",-1)),ab=Re(()=>m("label",{class:"lable-text mb-4 block"},"身份別基本資料",-1)),db={class:"mb-4 flex items-center"},cb={class:"flex items-center mr-4"},ub=Re(()=>m("label",{for:"planEmployee",class:"text-neutral-800 cursor-pointer"},"員工",-1)),fb={class:"flex items-center mr-4"},hb=Re(()=>m("label",{for:"planSpouse",class:"text-neutral-800 cursor-pointer"},"配偶",-1)),pb={class:"flex items-center mr-4"},mb=Re(()=>m("label",{for:"planChildOver15",class:"text-neutral-800 cursor-pointer"},"15歲以上子女",-1)),gb={class:"flex items-center mr-4"},vb=Re(()=>m("label",{for:"planChildUnder15",class:"text-neutral-800 cursor-pointer"},"15歲以下子女",-1)),yb={class:"flex items-center mr-4"},bb=Re(()=>m("label",{for:"planEmployeeParent",class:"text-neutral-800 cursor-pointer"},"員工父母",-1)),xb={class:"flex items-center mr-4"},Sb=Re(()=>m("label",{for:"planSpouseParent",class:"text-neutral-800 cursor-pointer"},"配偶父母",-1)),Cb={key:0},Eb=["onClick"],Ab=Re(()=>m("img",{src:Ia,alt:"icon-close"},null,-1)),Ob=[Ab],Tb={class:"grid grid-cols-1 gap-y-4"},Mb=Re(()=>m("label",{class:"lable-text form-label"},"計畫別險種名稱",-1)),wb={key:0,class:"grid grid-cols-1 gap-y-4"},kb={key:0},Db=Re(()=>m("label",{class:"lable-text form-label"},"計畫險種保額",-1)),Ib={key:1,class:"grid grid-cols-1 gap-y-4"},Nb=Re(()=>m("label",{class:"lable-text form-label"},"每日住院費",-1)),Pb=Re(()=>m("label",{class:"lable-text form-label"},"醫院各項雜費",-1)),Rb=Re(()=>m("label",{class:"lable-text form-label"},"外科手術費",-1)),$b=Re(()=>m("label",{class:"lable-text form-label"},"醫師診察費",-1)),Bb={key:2,class:"grid grid-cols-1 gap-y-4"},Lb=Re(()=>m("label",{class:"lable-text form-label"},"癌症住院日額",-1)),Fb=Re(()=>m("label",{class:"lable-text form-label"},"癌症手術費",-1)),Vb=Re(()=>m("label",{class:"lable-text form-label"},"癌症出院後療養費",-1)),zb=Re(()=>m("label",{class:"lable-text form-label"},"癌症放化療給付",-1)),jb=Re(()=>m("label",{class:"lable-text form-label"},"計畫險種每人保費",-1)),Ub={class:"flex justify-center mt-8"},Hb={class:"border border-[#D7D7D7] flex items-end justify-between p-5 rounded-md shadow-[0_4px_15px_0px_rgba(19,26,52,0.04)]"},Kb={class:"w-[80%]"},Wb=Re(()=>m("label",{class:"text-black/60 form-label lable-text"},"方案別名稱",-1)),Gb=Re(()=>m("span",{class:"text-xl mr-2 mb-[2px]"},"+",-1)),Jb=Qt({__name:"PlanMaking",setup(r){const e=mn(),{createInfo:t,planSubjects:n}=pn(e);Oc(t.value.planMaking,()=>{console.log(t.value.planMaking),console.log(lr.Medical)});const o=ke("");function i(){const h={id:Date.now().toString(),name:o.value,policyNum:"",insuredTypeList:{employee:!1,spouse:!1,childOver15:!1,childUnder15:!1,employeeParent:!1,spouseParent:!1},planSubject:[],expand:!0};t.value.planMaking.push(h),o.value=""}function s(h){const p=t.value.planMaking.findIndex(g=>g.id===h);t.value.planMaking.splice(p,1)}function l(h){const p={id:Date.now().toString(),name:{label:"",value:""},amount:"",price:"",dailyInpatientExpense:"",miscellaneousExpenses:"",operationExpense:"",doctorExpense:"",cancerInpatientExpense:"",cancerOperationExpense:"",cancerRecoveryExpense:"",cancerChemotherapyExpenses:""},g=t.value.planMaking.findIndex(v=>v.id===h);t.value.planMaking[g].planSubject.push(p),console.log(t.value.planMaking[g])}function a(h,p){const g=u(h),v=g.planSubject.findIndex(b=>b.id===p);g.planSubject.splice(v,1)}function d(h){const p=t.value.planMaking.findIndex(g=>g.id===h);t.value.planMaking[p].expand=!t.value.planMaking[p].expand}function c(h,p,g){const v=f(p,g);v.name.value=h;const b=n.value.find(S=>S.value===h);v.name.label=b==null?void 0:b.label}function u(h){const p=t.value.planMaking.findIndex(g=>g.id===h);return t.value.planMaking[p]}function f(h,p){const g=u(h),v=g.planSubject.findIndex(b=>b.id===p);return g.planSubject[v]}return(h,p)=>(te(),fe(rn,null,[y(t).planMaking.length!==0?(te(),fe("div",Q0,[(te(!0),fe(rn,null,Po(y(t).planMaking,(g,v)=>(te(),fe("div",{key:v,class:"mb-6 card"},[m("div",Z0,[m("div",{class:"flex items-center font-semibold text-primary-600 w-[80%] cursor-pointer",onClick:b=>d(g.id)},[(te(),fe("svg",{width:"12",height:"16",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:de(["mr-2",{"arrow-down":g.expand}])},eb,2)),m("p",null,"方案"+qe(v+1)+"："+qe(g.name),1)],8,_0),m("div",{class:"cursor-pointer",onClick:b=>s(g.id)},rb,8,tb)]),Eo(m("div",ob,[ib,m("div",sb,[m("div",null,[lb,x(y(J),{name:"policyNum"},{default:T(({field:b,errorMessage:S})=>[x(le,_(b,{modelValue:g.policyNum,"onUpdate:modelValue":C=>g.policyNum=C,placeholder:"請輸入保戶編號","error-message":S}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)])]),ab,m("div",db,[m("div",cb,[x(ue,{id:"planEmployee",name:"insuredTypeList","model-value":g.insuredTypeList.employee,onChange:b=>g.insuredTypeList.employee=!g.insuredTypeList.employee},null,8,["model-value","onChange"]),ub]),m("div",fb,[x(ue,{id:"planSpouse",name:"insuredTypeList","model-value":g.insuredTypeList.spouse,onChange:b=>g.insuredTypeList.spouse=!g.insuredTypeList.spouse},null,8,["model-value","onChange"]),hb]),m("div",pb,[x(ue,{id:"planChildOver15",name:"insuredTypeList","model-value":g.insuredTypeList.childOver15,onChange:b=>g.insuredTypeList.childOver15=!g.insuredTypeList.childOver15},null,8,["model-value","onChange"]),mb]),m("div",gb,[x(ue,{id:"planChildUnder15",name:"insuredTypeList","model-value":g.insuredTypeList.childUnder15,onChange:b=>g.insuredTypeList.childUnder15=!g.insuredTypeList.childUnder15},null,8,["model-value","onChange"]),vb]),m("div",yb,[x(ue,{id:"planEmployeeParent",name:"insuredTypeList","model-value":g.insuredTypeList.employeeParent,onChange:b=>g.insuredTypeList.employeeParent=!g.insuredTypeList.employeeParent},null,8,["model-value","onChange"]),bb]),m("div",xb,[x(ue,{id:"planSpouseParent",name:"insuredTypeList","model-value":g.insuredTypeList.spouseParent,onChange:b=>g.insuredTypeList.spouseParent=!g.insuredTypeList.spouseParent},null,8,["model-value","onChange"]),Sb])]),g.planSubject.length!==0?(te(),fe("div",Cb,[(te(!0),fe(rn,null,Po(g.planSubject,(b,S)=>(te(),fe("div",{key:S,class:"subject-container"},[m("div",{class:"flex justify-end cursor-pointer",onClick:C=>a(g.id,b.id)},Ob,8,Eb),m("div",Tb,[m("div",null,[Mb,x(y(J),{name:"name"},{default:T(({field:C,errorMessage:A})=>[x(Da,_({id:"planSubjectName"},C,{value:b.name.value,"model-value":b.name,placeholder:"請下拉險種名稱",options:y(n),"error-message":A,class:"w-full","onUpdate:modelValue":O=>c(O,g.id,b.id)}),null,16,["value","model-value","options","error-message","onUpdate:modelValue"])]),_:2},1024)]),b.name.label!==""?(te(),fe("div",wb,[b.name.label!==y(lr).Medical&&b.name.label!==y(lr).Cancer?(te(),fe("div",kb,[Db,x(y(J),{name:"amount"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.amount,"onUpdate:modelValue":O=>b.amount=O,placeholder:"請輸入保額","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)])):Se("",!0),b.name.label===y(lr).Medical?(te(),fe("div",Ib,[m("div",null,[Nb,x(y(J),{name:"dailyInpatientExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.dailyInpatientExpense,"onUpdate:modelValue":O=>b.dailyInpatientExpense=O,placeholder:"請輸入住院費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[Pb,x(y(J),{name:"miscellaneousExpenses"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.miscellaneousExpenses,"onUpdate:modelValue":O=>b.miscellaneousExpenses=O,placeholder:"請輸入各項雜費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[Rb,x(y(J),{name:"operationExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.operationExpense,"onUpdate:modelValue":O=>b.operationExpense=O,placeholder:"請輸入外科手術費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[$b,x(y(J),{name:"doctorExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.doctorExpense,"onUpdate:modelValue":O=>b.doctorExpense=O,placeholder:"請輸入醫師診察費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)])])):Se("",!0),b.name.label===y(lr).Cancer?(te(),fe("div",Bb,[m("div",null,[Lb,x(y(J),{name:"cancerInpatientExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.cancerInpatientExpense,"onUpdate:modelValue":O=>b.cancerInpatientExpense=O,placeholder:"請輸入住院日額","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[Fb,x(y(J),{name:"cancerOperationExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.cancerOperationExpense,"onUpdate:modelValue":O=>b.cancerOperationExpense=O,placeholder:"請輸入癌症手術費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[Vb,x(y(J),{name:"cancerRecoveryExpense"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.cancerRecoveryExpense,"onUpdate:modelValue":O=>b.cancerRecoveryExpense=O,placeholder:"請輸入癌症出院後療養費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)]),m("div",null,[zb,x(y(J),{name:"cancerChemotherapyExpenses"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.cancerChemotherapyExpenses,"onUpdate:modelValue":O=>b.cancerChemotherapyExpenses=O,placeholder:"請輸入癌症放化療給付","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)])])):Se("",!0),m("div",null,[jb,x(y(J),{name:"price"},{default:T(({field:C,errorMessage:A})=>[x(le,_(C,{modelValue:b.price,"onUpdate:modelValue":O=>b.price=O,placeholder:"請輸入保費","error-message":A}),null,16,["modelValue","onUpdate:modelValue","error-message"])]),_:2},1024)])])):Se("",!0)])]))),128))])):Se("",!0),m("div",Ub,[x(Ne,{size:"custom",width:130,height:48,onClick:b=>l(g.id)},{default:T(()=>[we(" 新增險種 ")]),_:2},1032,["onClick"])])],512),[[Ao,g.expand]])]))),128))])):Se("",!0),m("div",Hb,[m("div",Kb,[Wb,x(le,{modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=g=>o.value=g),placeholder:"請輸入保戶編號"},null,8,["modelValue"])]),m("div",null,[x(Ne,{size:"custom",width:130,height:48,disabled:o.value==="",class:de([{"cursor-not-allowed":o.value===""},"flex items-center justify-center mb-1"]),onClick:i},{default:T(()=>[Gb,we("新增方案 ")]),_:1},8,["disabled","class"])])])],64))}});const Yb=io(Jb,[["__scopeId","data-v-d14306f8"]]);var ic={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ya(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function dn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ya(Object(t),!0).forEach(function(n){Xb(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ya(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wo(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wo=function(e){return typeof e}:wo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(r)}function Xb(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Bt(){return Bt=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Bt.apply(this,arguments)}function Qb(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,i;for(i=0;i<n.length;i++)o=n[i],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Zb(r,e){if(r==null)return{};var t=Qb(r,e),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function _b(r){return qb(r)||ex(r)||tx(r)||nx()}function qb(r){if(Array.isArray(r))return Os(r)}function ex(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function tx(r,e){if(r){if(typeof r=="string")return Os(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Os(r,e)}}function Os(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function nx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rx="1.14.0";function hn(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var gn=hn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ao=hn(/Edge/i),ba=hn(/firefox/i),Gr=hn(/safari/i)&&!hn(/chrome/i)&&!hn(/android/i),sc=hn(/iP(ad|od|hone)/i),ox=hn(/chrome/i)&&hn(/android/i),lc={capture:!1,passive:!1};function Ce(r,e,t){r.addEventListener(e,t,!gn&&lc)}function xe(r,e,t){r.removeEventListener(e,t,!gn&&lc)}function Qo(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function ix(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Ht(r,e,t,n){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&Qo(r,e):Qo(r,e))||n&&r===t)return r;if(r===t)break}while(r=ix(r))}return null}var xa=/\s+/g;function Ve(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var n=(" "+r.className+" ").replace(xa," ").replace(" "+e+" "," ");r.className=(n+(t?" "+e:"")).replace(xa," ")}}function Z(r,e,t){var n=r&&r.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function Xn(r,e){var t="";if(typeof r=="string")t=r;else do{var n=Z(r,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(r=r.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}function ac(r,e,t){if(r){var n=r.getElementsByTagName(e),o=0,i=n.length;if(t)for(;o<i;o++)t(n[o],o);return n}return[]}function on(){var r=document.scrollingElement;return r||document.documentElement}function Fe(r,e,t,n,o){if(!(!r.getBoundingClientRect&&r!==window)){var i,s,l,a,d,c,u;if(r!==window&&r.parentNode&&r!==on()?(i=r.getBoundingClientRect(),s=i.top,l=i.left,a=i.bottom,d=i.right,c=i.height,u=i.width):(s=0,l=0,a=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||t)&&r!==window&&(o=o||r.parentNode,!gn))do if(o&&o.getBoundingClientRect&&(Z(o,"transform")!=="none"||t&&Z(o,"position")!=="static")){var f=o.getBoundingClientRect();s-=f.top+parseInt(Z(o,"border-top-width")),l-=f.left+parseInt(Z(o,"border-left-width")),a=s+i.height,d=l+i.width;break}while(o=o.parentNode);if(n&&r!==window){var h=Xn(o||r),p=h&&h.a,g=h&&h.d;h&&(s/=g,l/=p,u/=p,c/=g,a=s+c,d=l+u)}return{top:s,left:l,bottom:a,right:d,width:u,height:c}}}function Sa(r,e,t){for(var n=Mn(r,!0),o=Fe(r)[e];n;){var i=Fe(n)[t],s=void 0;if(t==="top"||t==="left"?s=o>=i:s=o<=i,!s)return n;if(n===on())break;n=Mn(n,!1)}return!1}function Er(r,e,t,n){for(var o=0,i=0,s=r.children;i<s.length;){if(s[i].style.display!=="none"&&s[i]!==se.ghost&&(n||s[i]!==se.dragged)&&Ht(s[i],t.draggable,r,!1)){if(o===e)return s[i];o++}i++}return null}function tl(r,e){for(var t=r.lastElementChild;t&&(t===se.ghost||Z(t,"display")==="none"||e&&!Qo(t,e));)t=t.previousElementSibling;return t||null}function Ge(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==se.clone&&(!e||Qo(r,e))&&t++;return t}function Ca(r){var e=0,t=0,n=on();if(r)do{var o=Xn(r),i=o.a,s=o.d;e+=r.scrollLeft*i,t+=r.scrollTop*s}while(r!==n&&(r=r.parentNode));return[e,t]}function sx(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===r[t][n])return Number(t)}return-1}function Mn(r,e){if(!r||!r.getBoundingClientRect)return on();var t=r,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=Z(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return on();if(n||e)return t;n=!0}}while(t=t.parentNode);return on()}function lx(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Ji(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var Jr;function dc(r,e){return function(){if(!Jr){var t=arguments,n=this;t.length===1?r.call(n,t[0]):r.apply(n,t),Jr=setTimeout(function(){Jr=void 0},e)}}}function ax(){clearTimeout(Jr),Jr=void 0}function cc(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function nl(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function Ea(r,e){Z(r,"position","absolute"),Z(r,"top",e.top),Z(r,"left",e.left),Z(r,"width",e.width),Z(r,"height",e.height)}function Yi(r){Z(r,"position",""),Z(r,"top",""),Z(r,"left",""),Z(r,"width",""),Z(r,"height","")}var ct="Sortable"+new Date().getTime();function dx(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(Z(o,"display")==="none"||o===se.ghost)){r.push({target:o,rect:Fe(o)});var i=dn({},r[r.length-1].rect);if(o.thisAnimationDuration){var s=Xn(o,!0);s&&(i.top-=s.f,i.left-=s.e)}o.fromRect=i}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(sx(r,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,s=0;r.forEach(function(l){var a=0,d=l.target,c=d.fromRect,u=Fe(d),f=d.prevFromRect,h=d.prevToRect,p=l.rect,g=Xn(d,!0);g&&(u.top-=g.f,u.left-=g.e),d.toRect=u,d.thisAnimationDuration&&Ji(f,u)&&!Ji(c,u)&&(p.top-u.top)/(p.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(a=ux(p,f,h,o.options)),Ji(u,c)||(d.prevFromRect=c,d.prevToRect=u,a||(a=o.options.animation),o.animate(d,p,u,a)),a&&(i=!0,s=Math.max(s,a),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},a),d.thisAnimationDuration=a)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),r=[]},animate:function(n,o,i,s){if(s){Z(n,"transition",""),Z(n,"transform","");var l=Xn(this.el),a=l&&l.a,d=l&&l.d,c=(o.left-i.left)/(a||1),u=(o.top-i.top)/(d||1);n.animatingX=!!c,n.animatingY=!!u,Z(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=cx(n),Z(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Z(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Z(n,"transition",""),Z(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function cx(r){return r.offsetWidth}function ux(r,e,t,n){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var nr=[],Xi={initializeByDefault:!0},co={mount:function(e){for(var t in Xi)Xi.hasOwnProperty(t)&&!(t in e)&&(e[t]=Xi[t]);nr.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),nr.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";nr.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][i]&&t[s.pluginName][i](dn({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](dn({sortable:t},n)))})},initializePlugins:function(e,t,n,o){nr.forEach(function(l){var a=l.pluginName;if(!(!e.options[a]&&!l.initializeByDefault)){var d=new l(e,t,e.options);d.sortable=e,d.options=e.options,e[a]=d,Bt(n,d.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var s=this.modifyOption(e,i,e.options[i]);typeof s<"u"&&(e.options[i]=s)}},getEventProperties:function(e,t){var n={};return nr.forEach(function(o){typeof o.eventProperties=="function"&&Bt(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return nr.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]=="function"&&(o=i.optionListeners[t].call(e[i.pluginName],n))}),o}};function Fr(r){var e=r.sortable,t=r.rootEl,n=r.name,o=r.targetEl,i=r.cloneEl,s=r.toEl,l=r.fromEl,a=r.oldIndex,d=r.newIndex,c=r.oldDraggableIndex,u=r.newDraggableIndex,f=r.originalEvent,h=r.putSortable,p=r.extraEventProperties;if(e=e||t&&t[ct],!!e){var g,v=e.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!gn&&!ao?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=s||t,g.from=l||t,g.item=o||t,g.clone=i,g.oldIndex=a,g.newIndex=d,g.oldDraggableIndex=c,g.newDraggableIndex=u,g.originalEvent=f,g.pullMode=h?h.lastPutMode:void 0;var S=dn(dn({},p),co.getEventProperties(n,e));for(var C in S)g[C]=S[C];t&&t.dispatchEvent(g),v[b]&&v[b].call(e,g)}}var fx=["evt"],xt=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,i=Zb(n,fx);co.pluginEvent.bind(se)(e,t,dn({dragEl:j,parentEl:Ke,ghostEl:me,rootEl:Le,nextEl:Vn,lastDownEl:ko,cloneEl:We,cloneHidden:En,dragStarted:Vr,putSortable:rt,activeSortable:se.active,originalEvent:o,oldIndex:ur,oldDraggableIndex:Yr,newIndex:Ot,newDraggableIndex:Sn,hideGhostForTarget:pc,unhideGhostForTarget:mc,cloneNowHidden:function(){En=!0},cloneNowShown:function(){En=!1},dispatchSortableEvent:function(l){ht({sortable:t,name:l,originalEvent:o})}},i))};function ht(r){Fr(dn({putSortable:rt,cloneEl:We,targetEl:j,rootEl:Le,oldIndex:ur,oldDraggableIndex:Yr,newIndex:Ot,newDraggableIndex:Sn},r))}var j,Ke,me,Le,Vn,ko,We,En,ur,Ot,Yr,Sn,vo,rt,ar=!1,Zo=!1,_o=[],Ln,jt,Qi,Zi,Aa,Oa,Vr,rr,Xr,Qr=!1,yo=!1,Do,lt,_i=[],Ts=!1,qo=[],yi=typeof document<"u",bo=sc,Ta=ao||gn?"cssFloat":"float",hx=yi&&!ox&&!sc&&"draggable"in document.createElement("div"),uc=function(){if(yi){if(gn)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),fc=function(e,t){var n=Z(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Er(e,0,t),s=Er(e,1,t),l=i&&Z(i),a=s&&Z(s),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Fe(i).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Fe(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&l.float&&l.float!=="none"){var u=l.float==="left"?"left":"right";return s&&(a.clear==="both"||a.clear===u)?"vertical":"horizontal"}return i&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=o&&n[Ta]==="none"||s&&n[Ta]==="none"&&d+c>o)?"vertical":"horizontal"},px=function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,s=n?e.width:e.height,l=n?t.left:t.top,a=n?t.right:t.bottom,d=n?t.width:t.height;return o===l||i===a||o+s/2===l+d/2},mx=function(e,t){var n;return _o.some(function(o){var i=o[ct].options.emptyInsertThreshold;if(!(!i||tl(o))){var s=Fe(o),l=e>=s.left-i&&e<=s.right+i,a=t>=s.top-i&&t<=s.bottom+i;if(l&&a)return n=o}}),n},hc=function(e){function t(i,s){return function(l,a,d,c){var u=l.options.group.name&&a.options.group.name&&l.options.group.name===a.options.group.name;if(i==null&&(s||u))return!0;if(i==null||i===!1)return!1;if(s&&i==="clone")return i;if(typeof i=="function")return t(i(l,a,d,c),s)(l,a,d,c);var f=(s?l:a).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},o=e.group;(!o||wo(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},pc=function(){!uc&&me&&Z(me,"display","none")},mc=function(){!uc&&me&&Z(me,"display","")};yi&&document.addEventListener("click",function(r){if(Zo)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),Zo=!1,!1},!0);var Fn=function(e){if(j){e=e.touches?e.touches[0]:e;var t=mx(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ct]._onDragOver(n)}}},gx=function(e){j&&j.parentNode[ct]._isOutsideThisEl(e.target)};function se(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=Bt({},e),r[ct]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fc(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,l){s.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:se.supportPointer!==!1&&"PointerEvent"in window&&!Gr,emptyInsertThreshold:5};co.initializePlugins(this,r,t);for(var n in t)!(n in e)&&(e[n]=t[n]);hc(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:hx,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ce(r,"pointerdown",this._onTapStart):(Ce(r,"mousedown",this._onTapStart),Ce(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ce(r,"dragover",this),Ce(r,"dragenter",this)),_o.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Bt(this,dx())}se.prototype={constructor:se,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(rr=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,j):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,s=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=o.filter;if(Ax(n),!j&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||o.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Gr&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Ht(a,o.draggable,n,!1),!(a&&a.animated)&&ko!==a)){if(ur=Ge(a),Yr=Ge(a,o.draggable),typeof c=="function"){if(c.call(this,e,a,this)){ht({sortable:t,rootEl:d,name:"filter",targetEl:a,toEl:n,fromEl:n}),xt("filter",t,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=Ht(d,u.trim(),n,!1),u)return ht({sortable:t,rootEl:u,name:"filter",targetEl:a,fromEl:n,toEl:n}),xt("filter",t,{evt:e}),!0}),c)){i&&e.cancelable&&e.preventDefault();return}o.handle&&!Ht(d,o.handle,n,!1)||this._prepareDragStart(e,l,a)}}},_prepareDragStart:function(e,t,n){var o=this,i=o.el,s=o.options,l=i.ownerDocument,a;if(n&&!j&&n.parentNode===i){var d=Fe(n);if(Le=i,j=n,Ke=j.parentNode,Vn=j.nextSibling,ko=n,vo=s.group,se.dragged=j,Ln={target:j,clientX:(t||e).clientX,clientY:(t||e).clientY},Aa=Ln.clientX-d.left,Oa=Ln.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,j.style["will-change"]="all",a=function(){if(xt("delayEnded",o,{evt:e}),se.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!ba&&o.nativeDraggable&&(j.draggable=!0),o._triggerDragStart(e,t),ht({sortable:o,name:"choose",originalEvent:e}),Ve(j,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){ac(j,c.trim(),qi)}),Ce(l,"dragover",Fn),Ce(l,"mousemove",Fn),Ce(l,"touchmove",Fn),Ce(l,"mouseup",o._onDrop),Ce(l,"touchend",o._onDrop),Ce(l,"touchcancel",o._onDrop),ba&&this.nativeDraggable&&(this.options.touchStartThreshold=4,j.draggable=!0),xt("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(ao||gn))){if(se.eventCanceled){this._onDrop();return}Ce(l,"mouseup",o._disableDelayedDrag),Ce(l,"touchend",o._disableDelayedDrag),Ce(l,"touchcancel",o._disableDelayedDrag),Ce(l,"mousemove",o._delayedDragTouchMoveHandler),Ce(l,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&Ce(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,s.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){j&&qi(j),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xe(e,"mouseup",this._disableDelayedDrag),xe(e,"touchend",this._disableDelayedDrag),xe(e,"touchcancel",this._disableDelayedDrag),xe(e,"mousemove",this._delayedDragTouchMoveHandler),xe(e,"touchmove",this._delayedDragTouchMoveHandler),xe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Ce(document,"pointermove",this._onTouchMove):t?Ce(document,"touchmove",this._onTouchMove):Ce(document,"mousemove",this._onTouchMove):(Ce(j,"dragend",this),Ce(Le,"dragstart",this._onDragStart));try{document.selection?Io(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ar=!1,Le&&j){xt("dragStarted",this,{evt:t}),this.nativeDraggable&&Ce(document,"dragover",gx);var n=this.options;!e&&Ve(j,n.dragClass,!1),Ve(j,n.ghostClass,!0),se.active=this,e&&this._appendGhost(),ht({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(jt){this._lastX=jt.clientX,this._lastY=jt.clientY,pc();for(var e=document.elementFromPoint(jt.clientX,jt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(jt.clientX,jt.clientY),e!==t);)t=e;if(j.parentNode[ct]._isOutsideThisEl(e),t)do{if(t[ct]){var n=void 0;if(n=t[ct]._onDragOver({clientX:jt.clientX,clientY:jt.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);mc()}},_onTouchMove:function(e){if(Ln){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,s=me&&Xn(me,!0),l=me&&s&&s.a,a=me&&s&&s.d,d=bo&&lt&&Ca(lt),c=(i.clientX-Ln.clientX+o.x)/(l||1)+(d?d[0]-_i[0]:0)/(l||1),u=(i.clientY-Ln.clientY+o.y)/(a||1)+(d?d[1]-_i[1]:0)/(a||1);if(!se.active&&!ar){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(me){s?(s.e+=c-(Qi||0),s.f+=u-(Zi||0)):s={a:1,b:0,c:0,d:1,e:c,f:u};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Z(me,"webkitTransform",f),Z(me,"mozTransform",f),Z(me,"msTransform",f),Z(me,"transform",f),Qi=c,Zi=u,jt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!me){var e=this.options.fallbackOnBody?document.body:Le,t=Fe(j,!0,bo,!0,e),n=this.options;if(bo){for(lt=e;Z(lt,"position")==="static"&&Z(lt,"transform")==="none"&&lt!==document;)lt=lt.parentNode;lt!==document.body&&lt!==document.documentElement?(lt===document&&(lt=on()),t.top+=lt.scrollTop,t.left+=lt.scrollLeft):lt=on(),_i=Ca(lt)}me=j.cloneNode(!0),Ve(me,n.ghostClass,!1),Ve(me,n.fallbackClass,!0),Ve(me,n.dragClass,!0),Z(me,"transition",""),Z(me,"transform",""),Z(me,"box-sizing","border-box"),Z(me,"margin",0),Z(me,"top",t.top),Z(me,"left",t.left),Z(me,"width",t.width),Z(me,"height",t.height),Z(me,"opacity","0.8"),Z(me,"position",bo?"absolute":"fixed"),Z(me,"zIndex","100000"),Z(me,"pointerEvents","none"),se.ghost=me,e.appendChild(me),Z(me,"transform-origin",Aa/parseInt(me.style.width)*100+"% "+Oa/parseInt(me.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;if(xt("dragStart",this,{evt:e}),se.eventCanceled){this._onDrop();return}xt("setupClone",this),se.eventCanceled||(We=nl(j),We.draggable=!1,We.style["will-change"]="",this._hideClone(),Ve(We,this.options.chosenClass,!1),se.clone=We),n.cloneId=Io(function(){xt("clone",n),!se.eventCanceled&&(n.options.removeCloneOnHide||Le.insertBefore(We,j),n._hideClone(),ht({sortable:n,name:"clone"}))}),!t&&Ve(j,i.dragClass,!0),t?(Zo=!0,n._loopId=setInterval(n._emulateDragOver,50)):(xe(document,"mouseup",n._onDrop),xe(document,"touchend",n._onDrop),xe(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,j)),Ce(document,"drop",n),Z(j,"transform","translateZ(0)")),ar=!0,n._dragStartId=Io(n._dragStarted.bind(n,t,e)),Ce(document,"selectstart",n),Vr=!0,Gr&&Z(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,i,s,l=this.options,a=l.group,d=se.active,c=vo===a,u=l.sort,f=rt||d,h,p=this,g=!1;if(Ts)return;function v(Ee,Ie){xt(Ee,p,dn({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:s,dragRect:o,targetRect:i,canSort:u,fromSortable:f,target:n,completed:S,onMove:function(Be,$){return xo(Le,t,j,o,Be,Fe(Be),e,$)},changed:C},Ie))}function b(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function S(Ee){return v("dragOverCompleted",{insertion:Ee}),Ee&&(c?d._hideClone():d._showClone(p),p!==f&&(Ve(j,rt?rt.options.ghostClass:d.options.ghostClass,!1),Ve(j,l.ghostClass,!0)),rt!==p&&p!==se.active?rt=p:p===se.active&&rt&&(rt=null),f===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===j&&!j.animated||n===t&&!n.animated)&&(rr=null),!l.dragoverBubble&&!e.rootEl&&n!==document&&(j.parentNode[ct]._isOutsideThisEl(e.target),!Ee&&Fn(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function C(){Ot=Ge(j),Sn=Ge(j,l.draggable),ht({sortable:p,name:"change",toEl:t,newIndex:Ot,newDraggableIndex:Sn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Ht(n,l.draggable,t,!0),v("dragOver"),se.eventCanceled)return g;if(j.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return S(!1);if(Zo=!1,d&&!l.disabled&&(c?u||(s=Ke!==Le):rt===this||(this.lastPutMode=vo.checkPull(this,d,j,e))&&a.checkPut(this,d,j,e))){if(h=this._getDirection(e,n)==="vertical",o=Fe(j),v("dragOverValid"),se.eventCanceled)return g;if(s)return Ke=Le,b(),this._hideClone(),v("revert"),se.eventCanceled||(Vn?Le.insertBefore(j,Vn):Le.appendChild(j)),S(!0);var A=tl(t,l.draggable);if(!A||xx(e,h,this)&&!A.animated){if(A===j)return S(!1);if(A&&t===e.target&&(n=A),n&&(i=Fe(n)),xo(Le,t,j,o,n,i,e,!!n)!==!1)return b(),t.appendChild(j),Ke=t,C(),S(!0)}else if(A&&bx(e,h,this)){var O=Er(t,0,l,!0);if(O===j)return S(!1);if(n=O,i=Fe(n),xo(Le,t,j,o,n,i,e,!1)!==!1)return b(),t.insertBefore(j,O),Ke=t,C(),S(!0)}else if(n.parentNode===t){i=Fe(n);var D=0,U,K=j.parentNode!==t,k=!px(j.animated&&j.toRect||o,n.animated&&n.toRect||i,h),V=h?"top":"left",B=Sa(n,"top","top")||Sa(j,"top","top"),z=B?B.scrollTop:void 0;rr!==n&&(U=i[V],Qr=!1,yo=!k&&l.invertSwap||K),D=Sx(e,n,i,h,k?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,yo,rr===n);var P;if(D!==0){var R=Ge(j);do R-=D,P=Ke.children[R];while(P&&(Z(P,"display")==="none"||P===me))}if(D===0||P===n)return S(!1);rr=n,Xr=D;var W=n.nextElementSibling,H=!1;H=D===1;var ee=xo(Le,t,j,o,n,i,e,H);if(ee!==!1)return(ee===1||ee===-1)&&(H=ee===1),Ts=!0,setTimeout(yx,30),b(),H&&!W?t.appendChild(j):n.parentNode.insertBefore(j,H?W:n),B&&cc(B,0,z-B.scrollTop),Ke=j.parentNode,U!==void 0&&!yo&&(Do=Math.abs(U-Fe(n)[V])),C(),S(!0)}if(t.contains(j))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xe(document,"mousemove",this._onTouchMove),xe(document,"touchmove",this._onTouchMove),xe(document,"pointermove",this._onTouchMove),xe(document,"dragover",Fn),xe(document,"mousemove",Fn),xe(document,"touchmove",Fn)},_offUpEvents:function(){var e=this.el.ownerDocument;xe(e,"mouseup",this._onDrop),xe(e,"touchend",this._onDrop),xe(e,"pointerup",this._onDrop),xe(e,"touchcancel",this._onDrop),xe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(Ot=Ge(j),Sn=Ge(j,n.draggable),xt("drop",this,{evt:e}),Ke=j&&j.parentNode,Ot=Ge(j),Sn=Ge(j,n.draggable),se.eventCanceled){this._nulling();return}ar=!1,yo=!1,Qr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ms(this.cloneId),Ms(this._dragStartId),this.nativeDraggable&&(xe(document,"drop",this),xe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gr&&Z(document.body,"user-select",""),Z(j,"transform",""),e&&(Vr&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),me&&me.parentNode&&me.parentNode.removeChild(me),(Le===Ke||rt&&rt.lastPutMode!=="clone")&&We&&We.parentNode&&We.parentNode.removeChild(We),j&&(this.nativeDraggable&&xe(j,"dragend",this),qi(j),j.style["will-change"]="",Vr&&!ar&&Ve(j,rt?rt.options.ghostClass:this.options.ghostClass,!1),Ve(j,this.options.chosenClass,!1),ht({sortable:this,name:"unchoose",toEl:Ke,newIndex:null,newDraggableIndex:null,originalEvent:e}),Le!==Ke?(Ot>=0&&(ht({rootEl:Ke,name:"add",toEl:Ke,fromEl:Le,originalEvent:e}),ht({sortable:this,name:"remove",toEl:Ke,originalEvent:e}),ht({rootEl:Ke,name:"sort",toEl:Ke,fromEl:Le,originalEvent:e}),ht({sortable:this,name:"sort",toEl:Ke,originalEvent:e})),rt&&rt.save()):Ot!==ur&&Ot>=0&&(ht({sortable:this,name:"update",toEl:Ke,originalEvent:e}),ht({sortable:this,name:"sort",toEl:Ke,originalEvent:e})),se.active&&((Ot==null||Ot===-1)&&(Ot=ur,Sn=Yr),ht({sortable:this,name:"end",toEl:Ke,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){xt("nulling",this),Le=j=Ke=me=Vn=We=ko=En=Ln=jt=Vr=Ot=Sn=ur=Yr=rr=Xr=rt=vo=se.dragged=se.ghost=se.clone=se.active=null,qo.forEach(function(e){e.checked=!0}),qo.length=Qi=Zi=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":j&&(this._onDragOver(e),vx(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,i=n.length,s=this.options;o<i;o++)t=n[o],Ht(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Ex(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(i,s){var l=o.children[s];Ht(l,this.options.draggable,o,!1)&&(n[i]=l)},this),t&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(o.removeChild(n[i]),o.appendChild(n[i]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ht(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=co.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&hc(n)},destroy:function(){xt("destroy",this);var e=this.el;e[ct]=null,xe(e,"mousedown",this._onTapStart),xe(e,"touchstart",this._onTapStart),xe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xe(e,"dragover",this),xe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_o.splice(_o.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!En){if(xt("hideClone",this),se.eventCanceled)return;Z(We,"display","none"),this.options.removeCloneOnHide&&We.parentNode&&We.parentNode.removeChild(We),En=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(En){if(xt("showClone",this),se.eventCanceled)return;j.parentNode==Le&&!this.options.group.revertClone?Le.insertBefore(We,j):Vn?Le.insertBefore(We,Vn):Le.appendChild(We),this.options.group.revertClone&&this.animate(j,We),Z(We,"display",""),En=!1}}};function vx(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function xo(r,e,t,n,o,i,s,l){var a,d=r[ct],c=d.options.onMove,u;return window.CustomEvent&&!gn&&!ao?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=r,a.dragged=t,a.draggedRect=n,a.related=o||e,a.relatedRect=i||Fe(e),a.willInsertAfter=l,a.originalEvent=s,r.dispatchEvent(a),c&&(u=c.call(d,a,s)),u}function qi(r){r.draggable=!1}function yx(){Ts=!1}function bx(r,e,t){var n=Fe(Er(t.el,0,t.options,!0)),o=10;return e?r.clientX<n.left-o||r.clientY<n.top&&r.clientX<n.right:r.clientY<n.top-o||r.clientY<n.bottom&&r.clientX<n.left}function xx(r,e,t){var n=Fe(tl(t.el,t.options.draggable)),o=10;return e?r.clientX>n.right+o||r.clientX<=n.right&&r.clientY>n.bottom&&r.clientX>=n.left:r.clientX>n.right&&r.clientY>n.top||r.clientX<=n.right&&r.clientY>n.bottom+o}function Sx(r,e,t,n,o,i,s,l){var a=n?r.clientY:r.clientX,d=n?t.height:t.width,c=n?t.top:t.left,u=n?t.bottom:t.right,f=!1;if(!s){if(l&&Do<d*o){if(!Qr&&(Xr===1?a>c+d*i/2:a<u-d*i/2)&&(Qr=!0),Qr)f=!0;else if(Xr===1?a<c+Do:a>u-Do)return-Xr}else if(a>c+d*(1-o)/2&&a<u-d*(1-o)/2)return Cx(e)}return f=f||s,f&&(a<c+d*i/2||a>u-d*i/2)?a>c+d/2?1:-1:0}function Cx(r){return Ge(j)<Ge(r)?1:-1}function Ex(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Ax(r){qo.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&qo.push(n)}}function Io(r){return setTimeout(r,0)}function Ms(r){return clearTimeout(r)}yi&&Ce(document,"touchmove",function(r){(se.active||ar)&&r.cancelable&&r.preventDefault()});se.utils={on:Ce,off:xe,css:Z,find:ac,is:function(e,t){return!!Ht(e,t,e,!1)},extend:lx,throttle:dc,closest:Ht,toggleClass:Ve,clone:nl,index:Ge,nextTick:Io,cancelNextTick:Ms,detectDirection:fc,getChild:Er};se.get=function(r){return r[ct]};se.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(se.utils=dn(dn({},se.utils),n.utils)),co.mount(n)})};se.create=function(r,e){return new se(r,e)};se.version=rx;var Xe=[],zr,ws,ks=!1,es,ts,ei,jr;function Ox(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?Ce(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ce(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Ce(document,"touchmove",this._handleFallbackAutoScroll):Ce(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?xe(document,"dragover",this._handleAutoScroll):(xe(document,"pointermove",this._handleFallbackAutoScroll),xe(document,"touchmove",this._handleFallbackAutoScroll),xe(document,"mousemove",this._handleFallbackAutoScroll)),Ma(),No(),ax()},nulling:function(){ei=ws=zr=ks=jr=es=ts=null,Xe.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(i,s);if(ei=t,n||this.options.forceAutoScrollFallback||ao||gn||Gr){ns(t,this.options,l,n);var a=Mn(l,!0);ks&&(!jr||i!==es||s!==ts)&&(jr&&Ma(),jr=setInterval(function(){var d=Mn(document.elementFromPoint(i,s),!0);d!==a&&(a=d,No()),ns(t,o.options,d,n)},10),es=i,ts=s)}else{if(!this.options.bubbleScroll||Mn(l,!0)===on()){No();return}ns(t,this.options,Mn(l,!1),!1)}}},Bt(r,{pluginName:"scroll",initializeByDefault:!0})}function No(){Xe.forEach(function(r){clearInterval(r.pid)}),Xe=[]}function Ma(){clearInterval(jr)}var ns=dc(function(r,e,t,n){if(e.scroll){var o=(r.touches?r.touches[0]:r).clientX,i=(r.touches?r.touches[0]:r).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=on(),d=!1,c;ws!==t&&(ws=t,No(),zr=e.scroll,c=e.scrollFn,zr===!0&&(zr=Mn(t,!0)));var u=0,f=zr;do{var h=f,p=Fe(h),g=p.top,v=p.bottom,b=p.left,S=p.right,C=p.width,A=p.height,O=void 0,D=void 0,U=h.scrollWidth,K=h.scrollHeight,k=Z(h),V=h.scrollLeft,B=h.scrollTop;h===a?(O=C<U&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),D=A<K&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(O=C<U&&(k.overflowX==="auto"||k.overflowX==="scroll"),D=A<K&&(k.overflowY==="auto"||k.overflowY==="scroll"));var z=O&&(Math.abs(S-o)<=s&&V+C<U)-(Math.abs(b-o)<=s&&!!V),P=D&&(Math.abs(v-i)<=s&&B+A<K)-(Math.abs(g-i)<=s&&!!B);if(!Xe[u])for(var R=0;R<=u;R++)Xe[R]||(Xe[R]={});(Xe[u].vx!=z||Xe[u].vy!=P||Xe[u].el!==h)&&(Xe[u].el=h,Xe[u].vx=z,Xe[u].vy=P,clearInterval(Xe[u].pid),(z!=0||P!=0)&&(d=!0,Xe[u].pid=setInterval((function(){n&&this.layer===0&&se.active._onTouchMove(ei);var W=Xe[this.layer].vy?Xe[this.layer].vy*l:0,H=Xe[this.layer].vx?Xe[this.layer].vx*l:0;typeof c=="function"&&c.call(se.dragged.parentNode[ct],H,W,r,ei,Xe[this.layer].el)!=="continue"||cc(Xe[this.layer].el,H,W)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&f!==a&&(f=Mn(f,!1)));ks=d}},30),gc=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,s=e.dispatchSortableEvent,l=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var d=n||i;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);a(),d&&!d.el.contains(u)&&(s("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function rl(){}rl.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Er(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:gc};Bt(rl,{pluginName:"revertOnSpill"});function ol(){}ol.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:gc};Bt(ol,{pluginName:"removeOnSpill"});var It;function Tx(){function r(){this.defaults={swapClass:"sortable-swap-highlight"}}return r.prototype={dragStart:function(t){var n=t.dragEl;It=n},dragOverValid:function(t){var n=t.completed,o=t.target,i=t.onMove,s=t.activeSortable,l=t.changed,a=t.cancel;if(s.options.swap){var d=this.sortable.el,c=this.options;if(o&&o!==d){var u=It;i(o)!==!1?(Ve(o,c.swapClass,!0),It=o):It=null,u&&u!==It&&Ve(u,c.swapClass,!1)}l(),n(!0),a()}},drop:function(t){var n=t.activeSortable,o=t.putSortable,i=t.dragEl,s=o||this.sortable,l=this.options;It&&Ve(It,l.swapClass,!1),It&&(l.swap||o&&o.options.swap)&&i!==It&&(s.captureAnimationState(),s!==n&&n.captureAnimationState(),Mx(i,It),s.animateAll(),s!==n&&n.animateAll())},nulling:function(){It=null}},Bt(r,{pluginName:"swap",eventProperties:function(){return{swapItem:It}}})}function Mx(r,e){var t=r.parentNode,n=e.parentNode,o,i;!t||!n||t.isEqualNode(e)||n.isEqualNode(r)||(o=Ge(r),i=Ge(e),t.isEqualNode(n)&&o<i&&i++,t.insertBefore(e,t.children[o]),n.insertBefore(r,n.children[i]))}var pe=[],At=[],Nr,Ut,Pr=!1,St=!1,or=!1,Pe,Rr,So;function wx(){function r(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?Ce(document,"pointerup",this._deselectMultiDrag):(Ce(document,"mouseup",this._deselectMultiDrag),Ce(document,"touchend",this._deselectMultiDrag)),Ce(document,"keydown",this._checkKeyDown),Ce(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(o,i){var s="";pe.length&&Ut===e?pe.forEach(function(l,a){s+=(a?", ":"")+l.textContent}):s=i.textContent,o.setData("Text",s)}}}return r.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var n=t.dragEl;Pe=n},delayEnded:function(){this.isMultiDrag=~pe.indexOf(Pe)},setupClone:function(t){var n=t.sortable,o=t.cancel;if(this.isMultiDrag){for(var i=0;i<pe.length;i++)At.push(nl(pe[i])),At[i].sortableIndex=pe[i].sortableIndex,At[i].draggable=!1,At[i].style["will-change"]="",Ve(At[i],this.options.selectedClass,!1),pe[i]===Pe&&Ve(At[i],this.options.chosenClass,!1);n._hideClone(),o()}},clone:function(t){var n=t.sortable,o=t.rootEl,i=t.dispatchSortableEvent,s=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||pe.length&&Ut===n&&(wa(!0,o),i("clone"),s()))},showClone:function(t){var n=t.cloneNowShown,o=t.rootEl,i=t.cancel;this.isMultiDrag&&(wa(!1,o),At.forEach(function(s){Z(s,"display","")}),n(),So=!1,i())},hideClone:function(t){var n=this;t.sortable;var o=t.cloneNowHidden,i=t.cancel;this.isMultiDrag&&(At.forEach(function(s){Z(s,"display","none"),n.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),o(),So=!0,i())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Ut&&Ut.multiDrag._deselectMultiDrag(),pe.forEach(function(n){n.sortableIndex=Ge(n)}),pe=pe.sort(function(n,o){return n.sortableIndex-o.sortableIndex}),or=!0},dragStarted:function(t){var n=this,o=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){pe.forEach(function(s){s!==Pe&&Z(s,"position","absolute")});var i=Fe(Pe,!1,!0,!0);pe.forEach(function(s){s!==Pe&&Ea(s,i)}),St=!0,Pr=!0}o.animateAll(function(){St=!1,Pr=!1,n.options.animation&&pe.forEach(function(s){Yi(s)}),n.options.sort&&Co()})}},dragOver:function(t){var n=t.target,o=t.completed,i=t.cancel;St&&~pe.indexOf(n)&&(o(!1),i())},revert:function(t){var n=t.fromSortable,o=t.rootEl,i=t.sortable,s=t.dragRect;pe.length>1&&(pe.forEach(function(l){i.addAnimationState({target:l,rect:St?Fe(l):s}),Yi(l),l.fromRect=s,n.removeAnimationState(l)}),St=!1,kx(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(t){var n=t.sortable,o=t.isOwner,i=t.insertion,s=t.activeSortable,l=t.parentEl,a=t.putSortable,d=this.options;if(i){if(o&&s._hideClone(),Pr=!1,d.animation&&pe.length>1&&(St||!o&&!s.options.sort&&!a)){var c=Fe(Pe,!1,!0,!0);pe.forEach(function(f){f!==Pe&&(Ea(f,c),l.appendChild(f))}),St=!0}if(!o)if(St||Co(),pe.length>1){var u=So;s._showClone(n),s.options.animation&&!So&&u&&At.forEach(function(f){s.addAnimationState({target:f,rect:Rr}),f.fromRect=Rr,f.thisAnimationDuration=null})}else s._showClone(n)}},dragOverAnimationCapture:function(t){var n=t.dragRect,o=t.isOwner,i=t.activeSortable;if(pe.forEach(function(l){l.thisAnimationDuration=null}),i.options.animation&&!o&&i.multiDrag.isMultiDrag){Rr=Bt({},n);var s=Xn(Pe,!0);Rr.top-=s.f,Rr.left-=s.e}},dragOverAnimationComplete:function(){St&&(St=!1,Co())},drop:function(t){var n=t.originalEvent,o=t.rootEl,i=t.parentEl,s=t.sortable,l=t.dispatchSortableEvent,a=t.oldIndex,d=t.putSortable,c=d||this.sortable;if(n){var u=this.options,f=i.children;if(!or)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ve(Pe,u.selectedClass,!~pe.indexOf(Pe)),~pe.indexOf(Pe))pe.splice(pe.indexOf(Pe),1),Nr=null,Fr({sortable:s,rootEl:o,name:"deselect",targetEl:Pe,originalEvt:n});else{if(pe.push(Pe),Fr({sortable:s,rootEl:o,name:"select",targetEl:Pe,originalEvt:n}),n.shiftKey&&Nr&&s.el.contains(Nr)){var h=Ge(Nr),p=Ge(Pe);if(~h&&~p&&h!==p){var g,v;for(p>h?(v=h,g=p):(v=p,g=h+1);v<g;v++)~pe.indexOf(f[v])||(Ve(f[v],u.selectedClass,!0),pe.push(f[v]),Fr({sortable:s,rootEl:o,name:"select",targetEl:f[v],originalEvt:n}))}}else Nr=Pe;Ut=c}if(or&&this.isMultiDrag){if(St=!1,(i[ct].options.sort||i!==o)&&pe.length>1){var b=Fe(Pe),S=Ge(Pe,":not(."+this.options.selectedClass+")");if(!Pr&&u.animation&&(Pe.thisAnimationDuration=null),c.captureAnimationState(),!Pr&&(u.animation&&(Pe.fromRect=b,pe.forEach(function(A){if(A.thisAnimationDuration=null,A!==Pe){var O=St?Fe(A):b;A.fromRect=O,c.addAnimationState({target:A,rect:O})}})),Co(),pe.forEach(function(A){f[S]?i.insertBefore(A,f[S]):i.appendChild(A),S++}),a===Ge(Pe))){var C=!1;pe.forEach(function(A){if(A.sortableIndex!==Ge(A)){C=!0;return}}),C&&l("update")}pe.forEach(function(A){Yi(A)}),c.animateAll()}Ut=c}(o===i||d&&d.lastPutMode!=="clone")&&At.forEach(function(A){A.parentNode&&A.parentNode.removeChild(A)})}},nullingGlobal:function(){this.isMultiDrag=or=!1,At.length=0},destroyGlobal:function(){this._deselectMultiDrag(),xe(document,"pointerup",this._deselectMultiDrag),xe(document,"mouseup",this._deselectMultiDrag),xe(document,"touchend",this._deselectMultiDrag),xe(document,"keydown",this._checkKeyDown),xe(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof or<"u"&&or)&&Ut===this.sortable&&!(t&&Ht(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;pe.length;){var n=pe[0];Ve(n,this.options.selectedClass,!1),pe.shift(),Fr({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Bt(r,{pluginName:"multiDrag",utils:{select:function(t){var n=t.parentNode[ct];!n||!n.options.multiDrag||~pe.indexOf(t)||(Ut&&Ut!==n&&(Ut.multiDrag._deselectMultiDrag(),Ut=n),Ve(t,n.options.selectedClass,!0),pe.push(t))},deselect:function(t){var n=t.parentNode[ct],o=pe.indexOf(t);!n||!n.options.multiDrag||!~o||(Ve(t,n.options.selectedClass,!1),pe.splice(o,1))}},eventProperties:function(){var t=this,n=[],o=[];return pe.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var s;St&&i!==Pe?s=-1:St?s=Ge(i,":not(."+t.options.selectedClass+")"):s=Ge(i),o.push({multiDragElement:i,index:s})}),{items:_b(pe),clones:[].concat(At),oldIndicies:n,newIndicies:o}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function kx(r,e){pe.forEach(function(t,n){var o=e.children[t.sortableIndex+(r?Number(n):0)];o?e.insertBefore(t,o):e.appendChild(t)})}function wa(r,e){At.forEach(function(t,n){var o=e.children[t.sortableIndex+(r?Number(n):0)];o?e.insertBefore(t,o):e.appendChild(t)})}function Co(){pe.forEach(function(r){r!==Pe&&r.parentNode&&r.parentNode.removeChild(r)})}se.mount(new Ox);se.mount(ol,rl);const Dx=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:wx,Sortable:se,Swap:Tx,default:se},Symbol.toStringTag,{value:"Module"})),Ix=Tc(Dx);(function(r,e){(function(n,o){r.exports=o(Ic,Ix)})(typeof self<"u"?self:Mc,function(t,n){return function(o){var i={};function s(l){if(i[l])return i[l].exports;var a=i[l]={i:l,l:!1,exports:{}};return o[l].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=o,s.c=i,s.d=function(l,a,d){s.o(l,a)||Object.defineProperty(l,a,{enumerable:!0,get:d})},s.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},s.t=function(l,a){if(a&1&&(l=s(l)),a&8||a&4&&typeof l=="object"&&l&&l.__esModule)return l;var d=Object.create(null);if(s.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:l}),a&2&&typeof l!="string")for(var c in l)s.d(d,c,(function(u){return l[u]}).bind(null,c));return d},s.n=function(l){var a=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(a,"a",a),a},s.o=function(l,a){return Object.prototype.hasOwnProperty.call(l,a)},s.p="",s(s.s="fb15")}({"00ee":function(o,i,s){var l=s("b622"),a=l("toStringTag"),d={};d[a]="z",o.exports=String(d)==="[object z]"},"0366":function(o,i,s){var l=s("1c0b");o.exports=function(a,d,c){if(l(a),d===void 0)return a;switch(c){case 0:return function(){return a.call(d)};case 1:return function(u){return a.call(d,u)};case 2:return function(u,f){return a.call(d,u,f)};case 3:return function(u,f,h){return a.call(d,u,f,h)}}return function(){return a.apply(d,arguments)}}},"057f":function(o,i,s){var l=s("fc6a"),a=s("241c").f,d={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(f){try{return a(f)}catch{return c.slice()}};o.exports.f=function(h){return c&&d.call(h)=="[object Window]"?u(h):a(l(h))}},"06cf":function(o,i,s){var l=s("83ab"),a=s("d1e7"),d=s("5c6c"),c=s("fc6a"),u=s("c04e"),f=s("5135"),h=s("0cfb"),p=Object.getOwnPropertyDescriptor;i.f=l?p:function(v,b){if(v=c(v),b=u(b,!0),h)try{return p(v,b)}catch{}if(f(v,b))return d(!a.f.call(v,b),v[b])}},"0cfb":function(o,i,s){var l=s("83ab"),a=s("d039"),d=s("cc12");o.exports=!l&&!a(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(o,i,s){var l=s("23e7"),a=s("d58f").left,d=s("a640"),c=s("ae40"),u=d("reduce"),f=c("reduce",{1:0});l({target:"Array",proto:!0,forced:!u||!f},{reduce:function(p){return a(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(o,i,s){var l=s("c6b6"),a=s("9263");o.exports=function(d,c){var u=d.exec;if(typeof u=="function"){var f=u.call(d,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(l(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return a.call(d,c)}},"159b":function(o,i,s){var l=s("da84"),a=s("fdbc"),d=s("17c2"),c=s("9112");for(var u in a){var f=l[u],h=f&&f.prototype;if(h&&h.forEach!==d)try{c(h,"forEach",d)}catch{h.forEach=d}}},"17c2":function(o,i,s){var l=s("b727").forEach,a=s("a640"),d=s("ae40"),c=a("forEach"),u=d("forEach");o.exports=!c||!u?function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(o,i,s){var l=s("d066");o.exports=l("document","documentElement")},"1c0b":function(o,i){o.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},"1c7e":function(o,i,s){var l=s("b622"),a=l("iterator"),d=!1;try{var c=0,u={next:function(){return{done:!!c++}},return:function(){d=!0}};u[a]=function(){return this},Array.from(u,function(){throw 2})}catch{}o.exports=function(f,h){if(!h&&!d)return!1;var p=!1;try{var g={};g[a]=function(){return{next:function(){return{done:p=!0}}}},f(g)}catch{}return p}},"1d80":function(o,i){o.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},"1dde":function(o,i,s){var l=s("d039"),a=s("b622"),d=s("2d00"),c=a("species");o.exports=function(u){return d>=51||!l(function(){var f=[],h=f.constructor={};return h[c]=function(){return{foo:1}},f[u](Boolean).foo!==1})}},"23cb":function(o,i,s){var l=s("a691"),a=Math.max,d=Math.min;o.exports=function(c,u){var f=l(c);return f<0?a(f+u,0):d(f,u)}},"23e7":function(o,i,s){var l=s("da84"),a=s("06cf").f,d=s("9112"),c=s("6eeb"),u=s("ce4e"),f=s("e893"),h=s("94ca");o.exports=function(p,g){var v=p.target,b=p.global,S=p.stat,C,A,O,D,U,K;if(b?A=l:S?A=l[v]||u(v,{}):A=(l[v]||{}).prototype,A)for(O in g){if(U=g[O],p.noTargetGet?(K=a(A,O),D=K&&K.value):D=A[O],C=h(b?O:v+(S?".":"#")+O,p.forced),!C&&D!==void 0){if(typeof U==typeof D)continue;f(U,D)}(p.sham||D&&D.sham)&&d(U,"sham",!0),c(A,O,U,p)}}},"241c":function(o,i,s){var l=s("ca84"),a=s("7839"),d=a.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(u){return l(u,d)}},"25f0":function(o,i,s){var l=s("6eeb"),a=s("825a"),d=s("d039"),c=s("ad6d"),u="toString",f=RegExp.prototype,h=f[u],p=d(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),g=h.name!=u;(p||g)&&l(RegExp.prototype,u,function(){var b=a(this),S=String(b.source),C=b.flags,A=String(C===void 0&&b instanceof RegExp&&!("flags"in f)?c.call(b):C);return"/"+S+"/"+A},{unsafe:!0})},"2ca0":function(o,i,s){var l=s("23e7"),a=s("06cf").f,d=s("50c4"),c=s("5a34"),u=s("1d80"),f=s("ab13"),h=s("c430"),p="".startsWith,g=Math.min,v=f("startsWith"),b=!h&&!v&&!!function(){var S=a(String.prototype,"startsWith");return S&&!S.writable}();l({target:"String",proto:!0,forced:!b&&!v},{startsWith:function(C){var A=String(u(this));c(C);var O=d(g(arguments.length>1?arguments[1]:void 0,A.length)),D=String(C);return p?p.call(A,D,O):A.slice(O,O+D.length)===D}})},"2d00":function(o,i,s){var l=s("da84"),a=s("342f"),d=l.process,c=d&&d.versions,u=c&&c.v8,f,h;u?(f=u.split("."),h=f[0]+f[1]):a&&(f=a.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=a.match(/Chrome\/(\d+)/),f&&(h=f[1]))),o.exports=h&&+h},"342f":function(o,i,s){var l=s("d066");o.exports=l("navigator","userAgent")||""},"35a1":function(o,i,s){var l=s("f5df"),a=s("3f8c"),d=s("b622"),c=d("iterator");o.exports=function(u){if(u!=null)return u[c]||u["@@iterator"]||a[l(u)]}},"37e8":function(o,i,s){var l=s("83ab"),a=s("9bf2"),d=s("825a"),c=s("df75");o.exports=l?Object.defineProperties:function(f,h){d(f);for(var p=c(h),g=p.length,v=0,b;g>v;)a.f(f,b=p[v++],h[b]);return f}},"3bbe":function(o,i,s){var l=s("861d");o.exports=function(a){if(!l(a)&&a!==null)throw TypeError("Can't set "+String(a)+" as a prototype");return a}},"3ca3":function(o,i,s){var l=s("6547").charAt,a=s("69f3"),d=s("7dd0"),c="String Iterator",u=a.set,f=a.getterFor(c);d(String,"String",function(h){u(this,{type:c,string:String(h),index:0})},function(){var p=f(this),g=p.string,v=p.index,b;return v>=g.length?{value:void 0,done:!0}:(b=l(g,v),p.index+=b.length,{value:b,done:!1})})},"3f8c":function(o,i){o.exports={}},4160:function(o,i,s){var l=s("23e7"),a=s("17c2");l({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"428f":function(o,i,s){var l=s("da84");o.exports=l},"44ad":function(o,i,s){var l=s("d039"),a=s("c6b6"),d="".split;o.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return a(c)=="String"?d.call(c,""):Object(c)}:Object},"44d2":function(o,i,s){var l=s("b622"),a=s("7c73"),d=s("9bf2"),c=l("unscopables"),u=Array.prototype;u[c]==null&&d.f(u,c,{configurable:!0,value:a(null)}),o.exports=function(f){u[c][f]=!0}},"44e7":function(o,i,s){var l=s("861d"),a=s("c6b6"),d=s("b622"),c=d("match");o.exports=function(u){var f;return l(u)&&((f=u[c])!==void 0?!!f:a(u)=="RegExp")}},4930:function(o,i,s){var l=s("d039");o.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(o,i,s){var l=s("fc6a"),a=s("50c4"),d=s("23cb"),c=function(u){return function(f,h,p){var g=l(f),v=a(g.length),b=d(p,v),S;if(u&&h!=h){for(;v>b;)if(S=g[b++],S!=S)return!0}else for(;v>b;b++)if((u||b in g)&&g[b]===h)return u||b||0;return!u&&-1}};o.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(o,i,s){var l=s("23e7"),a=s("b727").filter,d=s("1dde"),c=s("ae40"),u=d("filter"),f=c("filter");l({target:"Array",proto:!0,forced:!u||!f},{filter:function(p){return a(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(o,i,s){var l=s("0366"),a=s("7b0b"),d=s("9bdd"),c=s("e95a"),u=s("50c4"),f=s("8418"),h=s("35a1");o.exports=function(g){var v=a(g),b=typeof this=="function"?this:Array,S=arguments.length,C=S>1?arguments[1]:void 0,A=C!==void 0,O=h(v),D=0,U,K,k,V,B,z;if(A&&(C=l(C,S>2?arguments[2]:void 0,2)),O!=null&&!(b==Array&&c(O)))for(V=O.call(v),B=V.next,K=new b;!(k=B.call(V)).done;D++)z=A?d(V,C,[k.value,D],!0):k.value,f(K,D,z);else for(U=u(v.length),K=new b(U);U>D;D++)z=A?C(v[D],D):v[D],f(K,D,z);return K.length=D,K}},"4fad":function(o,i,s){var l=s("23e7"),a=s("6f53").entries;l({target:"Object",stat:!0},{entries:function(c){return a(c)}})},"50c4":function(o,i,s){var l=s("a691"),a=Math.min;o.exports=function(d){return d>0?a(l(d),9007199254740991):0}},5135:function(o,i){var s={}.hasOwnProperty;o.exports=function(l,a){return s.call(l,a)}},5319:function(o,i,s){var l=s("d784"),a=s("825a"),d=s("7b0b"),c=s("50c4"),u=s("a691"),f=s("1d80"),h=s("8aa5"),p=s("14c3"),g=Math.max,v=Math.min,b=Math.floor,S=/\$([$&'`]|\d\d?|<[^>]*>)/g,C=/\$([$&'`]|\d\d?)/g,A=function(O){return O===void 0?O:String(O)};l("replace",2,function(O,D,U,K){var k=K.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,V=K.REPLACE_KEEPS_$0,B=k?"$":"$0";return[function(R,W){var H=f(this),ee=R==null?void 0:R[O];return ee!==void 0?ee.call(R,H,W):D.call(String(H),R,W)},function(P,R){if(!k&&V||typeof R=="string"&&R.indexOf(B)===-1){var W=U(D,P,this,R);if(W.done)return W.value}var H=a(P),ee=String(this),Ee=typeof R=="function";Ee||(R=String(R));var Ie=H.global;if(Ie){var $e=H.unicode;H.lastIndex=0}for(var Be=[];;){var $=p(H,ee);if($===null||(Be.push($),!Ie))break;var N=String($[0]);N===""&&(H.lastIndex=h(ee,c(H.lastIndex),$e))}for(var ie="",E=0,Y=0;Y<Be.length;Y++){$=Be[Y];for(var ne=String($[0]),ze=g(v(u($.index),ee.length),0),je=[],yt=1;yt<$.length;yt++)je.push(A($[yt]));var kt=$.groups;if(Ee){var Et=[ne].concat(je,ze,ee);kt!==void 0&&Et.push(kt);var Ue=String(R.apply(void 0,Et))}else Ue=z(ne,ee,ze,je,kt,R);ze>=E&&(ie+=ee.slice(E,ze)+Ue,E=ze+ne.length)}return ie+ee.slice(E)}];function z(P,R,W,H,ee,Ee){var Ie=W+P.length,$e=H.length,Be=C;return ee!==void 0&&(ee=d(ee),Be=S),D.call(Ee,Be,function($,N){var ie;switch(N.charAt(0)){case"$":return"$";case"&":return P;case"`":return R.slice(0,W);case"'":return R.slice(Ie);case"<":ie=ee[N.slice(1,-1)];break;default:var E=+N;if(E===0)return $;if(E>$e){var Y=b(E/10);return Y===0?$:Y<=$e?H[Y-1]===void 0?N.charAt(1):H[Y-1]+N.charAt(1):$}ie=H[E-1]}return ie===void 0?"":ie})}})},5692:function(o,i,s){var l=s("c430"),a=s("c6cd");(o.exports=function(d,c){return a[d]||(a[d]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(o,i,s){var l=s("d066"),a=s("241c"),d=s("7418"),c=s("825a");o.exports=l("Reflect","ownKeys")||function(f){var h=a.f(c(f)),p=d.f;return p?h.concat(p(f)):h}},"5a34":function(o,i,s){var l=s("44e7");o.exports=function(a){if(l(a))throw TypeError("The method doesn't accept regular expressions");return a}},"5c6c":function(o,i){o.exports=function(s,l){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:l}}},"5db7":function(o,i,s){var l=s("23e7"),a=s("a2bf"),d=s("7b0b"),c=s("50c4"),u=s("1c0b"),f=s("65f0");l({target:"Array",proto:!0},{flatMap:function(p){var g=d(this),v=c(g.length),b;return u(p),b=f(g,0),b.length=a(b,g,g,v,0,1,p,arguments.length>1?arguments[1]:void 0),b}})},6547:function(o,i,s){var l=s("a691"),a=s("1d80"),d=function(c){return function(u,f){var h=String(a(u)),p=l(f),g=h.length,v,b;return p<0||p>=g?c?"":void 0:(v=h.charCodeAt(p),v<55296||v>56319||p+1===g||(b=h.charCodeAt(p+1))<56320||b>57343?c?h.charAt(p):v:c?h.slice(p,p+2):(v-55296<<10)+(b-56320)+65536)}};o.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(o,i,s){var l=s("861d"),a=s("e8b5"),d=s("b622"),c=d("species");o.exports=function(u,f){var h;return a(u)&&(h=u.constructor,typeof h=="function"&&(h===Array||a(h.prototype))?h=void 0:l(h)&&(h=h[c],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}},"69f3":function(o,i,s){var l=s("7f9a"),a=s("da84"),d=s("861d"),c=s("9112"),u=s("5135"),f=s("f772"),h=s("d012"),p=a.WeakMap,g,v,b,S=function(k){return b(k)?v(k):g(k,{})},C=function(k){return function(V){var B;if(!d(V)||(B=v(V)).type!==k)throw TypeError("Incompatible receiver, "+k+" required");return B}};if(l){var A=new p,O=A.get,D=A.has,U=A.set;g=function(k,V){return U.call(A,k,V),V},v=function(k){return O.call(A,k)||{}},b=function(k){return D.call(A,k)}}else{var K=f("state");h[K]=!0,g=function(k,V){return c(k,K,V),V},v=function(k){return u(k,K)?k[K]:{}},b=function(k){return u(k,K)}}o.exports={set:g,get:v,has:b,enforce:S,getterFor:C}},"6eeb":function(o,i,s){var l=s("da84"),a=s("9112"),d=s("5135"),c=s("ce4e"),u=s("8925"),f=s("69f3"),h=f.get,p=f.enforce,g=String(String).split("String");(o.exports=function(v,b,S,C){var A=C?!!C.unsafe:!1,O=C?!!C.enumerable:!1,D=C?!!C.noTargetGet:!1;if(typeof S=="function"&&(typeof b=="string"&&!d(S,"name")&&a(S,"name",b),p(S).source=g.join(typeof b=="string"?b:"")),v===l){O?v[b]=S:c(b,S);return}else A?!D&&v[b]&&(O=!0):delete v[b];O?v[b]=S:a(v,b,S)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||u(this)})},"6f53":function(o,i,s){var l=s("83ab"),a=s("df75"),d=s("fc6a"),c=s("d1e7").f,u=function(f){return function(h){for(var p=d(h),g=a(p),v=g.length,b=0,S=[],C;v>b;)C=g[b++],(!l||c.call(p,C))&&S.push(f?[C,p[C]]:p[C]);return S}};o.exports={entries:u(!0),values:u(!1)}},"73d9":function(o,i,s){var l=s("44d2");l("flatMap")},7418:function(o,i){i.f=Object.getOwnPropertySymbols},"746f":function(o,i,s){var l=s("428f"),a=s("5135"),d=s("e538"),c=s("9bf2").f;o.exports=function(u){var f=l.Symbol||(l.Symbol={});a(f,u)||c(f,u,{value:d.f(u)})}},7839:function(o,i){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(o,i,s){var l=s("1d80");o.exports=function(a){return Object(l(a))}},"7c73":function(o,i,s){var l=s("825a"),a=s("37e8"),d=s("7839"),c=s("d012"),u=s("1be4"),f=s("cc12"),h=s("f772"),p=">",g="<",v="prototype",b="script",S=h("IE_PROTO"),C=function(){},A=function(k){return g+b+p+k+g+"/"+b+p},O=function(k){k.write(A("")),k.close();var V=k.parentWindow.Object;return k=null,V},D=function(){var k=f("iframe"),V="java"+b+":",B;return k.style.display="none",u.appendChild(k),k.src=String(V),B=k.contentWindow.document,B.open(),B.write(A("document.F=Object")),B.close(),B.F},U,K=function(){try{U=document.domain&&new ActiveXObject("htmlfile")}catch{}K=U?O(U):D();for(var k=d.length;k--;)delete K[v][d[k]];return K()};c[S]=!0,o.exports=Object.create||function(V,B){var z;return V!==null?(C[v]=l(V),z=new C,C[v]=null,z[S]=V):z=K(),B===void 0?z:a(z,B)}},"7dd0":function(o,i,s){var l=s("23e7"),a=s("9ed3"),d=s("e163"),c=s("d2bb"),u=s("d44e"),f=s("9112"),h=s("6eeb"),p=s("b622"),g=s("c430"),v=s("3f8c"),b=s("ae93"),S=b.IteratorPrototype,C=b.BUGGY_SAFARI_ITERATORS,A=p("iterator"),O="keys",D="values",U="entries",K=function(){return this};o.exports=function(k,V,B,z,P,R,W){a(B,V,z);var H=function(Y){if(Y===P&&Be)return Be;if(!C&&Y in Ie)return Ie[Y];switch(Y){case O:return function(){return new B(this,Y)};case D:return function(){return new B(this,Y)};case U:return function(){return new B(this,Y)}}return function(){return new B(this)}},ee=V+" Iterator",Ee=!1,Ie=k.prototype,$e=Ie[A]||Ie["@@iterator"]||P&&Ie[P],Be=!C&&$e||H(P),$=V=="Array"&&Ie.entries||$e,N,ie,E;if($&&(N=d($.call(new k)),S!==Object.prototype&&N.next&&(!g&&d(N)!==S&&(c?c(N,S):typeof N[A]!="function"&&f(N,A,K)),u(N,ee,!0,!0),g&&(v[ee]=K))),P==D&&$e&&$e.name!==D&&(Ee=!0,Be=function(){return $e.call(this)}),(!g||W)&&Ie[A]!==Be&&f(Ie,A,Be),v[V]=Be,P)if(ie={values:H(D),keys:R?Be:H(O),entries:H(U)},W)for(E in ie)(C||Ee||!(E in Ie))&&h(Ie,E,ie[E]);else l({target:V,proto:!0,forced:C||Ee},ie);return ie}},"7f9a":function(o,i,s){var l=s("da84"),a=s("8925"),d=l.WeakMap;o.exports=typeof d=="function"&&/native code/.test(a(d))},"825a":function(o,i,s){var l=s("861d");o.exports=function(a){if(!l(a))throw TypeError(String(a)+" is not an object");return a}},"83ab":function(o,i,s){var l=s("d039");o.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(o,i,s){var l=s("c04e"),a=s("9bf2"),d=s("5c6c");o.exports=function(c,u,f){var h=l(u);h in c?a.f(c,h,d(0,f)):c[h]=f}},"861d":function(o,i){o.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},8875:function(o,i,s){var l,a,d;(function(c,u){a=[],l=u,d=typeof l=="function"?l.apply(i,a):l,d!==void 0&&(o.exports=d)})(typeof self<"u"?self:this,function(){function c(){var u=Object.getOwnPropertyDescriptor(document,"currentScript");if(!u&&"currentScript"in document&&document.currentScript||u&&u.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(U){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,p=f.exec(U.stack)||h.exec(U.stack),g=p&&p[1]||!1,v=p&&p[2]||!1,b=document.location.href.replace(document.location.hash,""),S,C,A,O=document.getElementsByTagName("script");g===b&&(S=document.documentElement.outerHTML,C=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),A=S.replace(C,"$1").trim());for(var D=0;D<O.length;D++)if(O[D].readyState==="interactive"||O[D].src===g||g===b&&O[D].innerHTML&&O[D].innerHTML.trim()===A)return O[D];return null}}return c})},8925:function(o,i,s){var l=s("c6cd"),a=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(d){return a.call(d)}),o.exports=l.inspectSource},"8aa5":function(o,i,s){var l=s("6547").charAt;o.exports=function(a,d,c){return d+(c?l(a,d).length:1)}},"8bbf":function(o,i){o.exports=t},"90e3":function(o,i){var s=0,l=Math.random();o.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++s+l).toString(36)}},9112:function(o,i,s){var l=s("83ab"),a=s("9bf2"),d=s("5c6c");o.exports=l?function(c,u,f){return a.f(c,u,d(1,f))}:function(c,u,f){return c[u]=f,c}},9263:function(o,i,s){var l=s("ad6d"),a=s("9f7f"),d=RegExp.prototype.exec,c=String.prototype.replace,u=d,f=function(){var v=/a/,b=/b*/g;return d.call(v,"a"),d.call(b,"a"),v.lastIndex!==0||b.lastIndex!==0}(),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,g=f||p||h;g&&(u=function(b){var S=this,C,A,O,D,U=h&&S.sticky,K=l.call(S),k=S.source,V=0,B=b;return U&&(K=K.replace("y",""),K.indexOf("g")===-1&&(K+="g"),B=String(b).slice(S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&b[S.lastIndex-1]!==`
`)&&(k="(?: "+k+")",B=" "+B,V++),A=new RegExp("^(?:"+k+")",K)),p&&(A=new RegExp("^"+k+"$(?!\\s)",K)),f&&(C=S.lastIndex),O=d.call(U?A:S,B),U?O?(O.input=O.input.slice(V),O[0]=O[0].slice(V),O.index=S.lastIndex,S.lastIndex+=O[0].length):S.lastIndex=0:f&&O&&(S.lastIndex=S.global?O.index+O[0].length:C),p&&O&&O.length>1&&c.call(O[0],A,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(O[D]=void 0)}),O}),o.exports=u},"94ca":function(o,i,s){var l=s("d039"),a=/#|\.prototype\./,d=function(p,g){var v=u[c(p)];return v==h?!0:v==f?!1:typeof g=="function"?l(g):!!g},c=d.normalize=function(p){return String(p).replace(a,".").toLowerCase()},u=d.data={},f=d.NATIVE="N",h=d.POLYFILL="P";o.exports=d},"99af":function(o,i,s){var l=s("23e7"),a=s("d039"),d=s("e8b5"),c=s("861d"),u=s("7b0b"),f=s("50c4"),h=s("8418"),p=s("65f0"),g=s("1dde"),v=s("b622"),b=s("2d00"),S=v("isConcatSpreadable"),C=9007199254740991,A="Maximum allowed index exceeded",O=b>=51||!a(function(){var k=[];return k[S]=!1,k.concat()[0]!==k}),D=g("concat"),U=function(k){if(!c(k))return!1;var V=k[S];return V!==void 0?!!V:d(k)},K=!O||!D;l({target:"Array",proto:!0,forced:K},{concat:function(V){var B=u(this),z=p(B,0),P=0,R,W,H,ee,Ee;for(R=-1,H=arguments.length;R<H;R++)if(Ee=R===-1?B:arguments[R],U(Ee)){if(ee=f(Ee.length),P+ee>C)throw TypeError(A);for(W=0;W<ee;W++,P++)W in Ee&&h(z,P,Ee[W])}else{if(P>=C)throw TypeError(A);h(z,P++,Ee)}return z.length=P,z}})},"9bdd":function(o,i,s){var l=s("825a");o.exports=function(a,d,c,u){try{return u?d(l(c)[0],c[1]):d(c)}catch(h){var f=a.return;throw f!==void 0&&l(f.call(a)),h}}},"9bf2":function(o,i,s){var l=s("83ab"),a=s("0cfb"),d=s("825a"),c=s("c04e"),u=Object.defineProperty;i.f=l?u:function(h,p,g){if(d(h),p=c(p,!0),d(g),a)try{return u(h,p,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(h[p]=g.value),h}},"9ed3":function(o,i,s){var l=s("ae93").IteratorPrototype,a=s("7c73"),d=s("5c6c"),c=s("d44e"),u=s("3f8c"),f=function(){return this};o.exports=function(h,p,g){var v=p+" Iterator";return h.prototype=a(l,{next:d(1,g)}),c(h,v,!1,!0),u[v]=f,h}},"9f7f":function(o,i,s){var l=s("d039");function a(d,c){return RegExp(d,c)}i.UNSUPPORTED_Y=l(function(){var d=a("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),i.BROKEN_CARET=l(function(){var d=a("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(o,i,s){var l=s("e8b5"),a=s("50c4"),d=s("0366"),c=function(u,f,h,p,g,v,b,S){for(var C=g,A=0,O=b?d(b,S,3):!1,D;A<p;){if(A in h){if(D=O?O(h[A],A,f):h[A],v>0&&l(D))C=c(u,f,D,a(D.length),C,v-1)-1;else{if(C>=9007199254740991)throw TypeError("Exceed the acceptable array length");u[C]=D}C++}A++}return C};o.exports=c},a352:function(o,i){o.exports=n},a434:function(o,i,s){var l=s("23e7"),a=s("23cb"),d=s("a691"),c=s("50c4"),u=s("7b0b"),f=s("65f0"),h=s("8418"),p=s("1dde"),g=s("ae40"),v=p("splice"),b=g("splice",{ACCESSORS:!0,0:0,1:2}),S=Math.max,C=Math.min,A=9007199254740991,O="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!v||!b},{splice:function(U,K){var k=u(this),V=c(k.length),B=a(U,V),z=arguments.length,P,R,W,H,ee,Ee;if(z===0?P=R=0:z===1?(P=0,R=V-B):(P=z-2,R=C(S(d(K),0),V-B)),V+P-R>A)throw TypeError(O);for(W=f(k,R),H=0;H<R;H++)ee=B+H,ee in k&&h(W,H,k[ee]);if(W.length=R,P<R){for(H=B;H<V-R;H++)ee=H+R,Ee=H+P,ee in k?k[Ee]=k[ee]:delete k[Ee];for(H=V;H>V-R+P;H--)delete k[H-1]}else if(P>R)for(H=V-R;H>B;H--)ee=H+R-1,Ee=H+P-1,ee in k?k[Ee]=k[ee]:delete k[Ee];for(H=0;H<P;H++)k[H+B]=arguments[H+2];return k.length=V-R+P,W}})},a4d3:function(o,i,s){var l=s("23e7"),a=s("da84"),d=s("d066"),c=s("c430"),u=s("83ab"),f=s("4930"),h=s("fdbf"),p=s("d039"),g=s("5135"),v=s("e8b5"),b=s("861d"),S=s("825a"),C=s("7b0b"),A=s("fc6a"),O=s("c04e"),D=s("5c6c"),U=s("7c73"),K=s("df75"),k=s("241c"),V=s("057f"),B=s("7418"),z=s("06cf"),P=s("9bf2"),R=s("d1e7"),W=s("9112"),H=s("6eeb"),ee=s("5692"),Ee=s("f772"),Ie=s("d012"),$e=s("90e3"),Be=s("b622"),$=s("e538"),N=s("746f"),ie=s("d44e"),E=s("69f3"),Y=s("b727").forEach,ne=Ee("hidden"),ze="Symbol",je="prototype",yt=Be("toPrimitive"),kt=E.set,Et=E.getterFor(ze),Ue=Object[je],He=a.Symbol,Vt=d("JSON","stringify"),Zt=z.f,_t=P.f,uo=V.f,bi=R.f,zt=ee("symbols"),vn=ee("op-symbols"),qn=ee("string-to-symbol-registry"),Or=ee("symbol-to-string-registry"),Tr=ee("wks"),Mr=a.QObject,wr=!Mr||!Mr[je]||!Mr[je].findChild,kr=u&&p(function(){return U(_t({},"a",{get:function(){return _t(this,"a",{value:7}).a}})).a!=7})?function(ce,q,oe){var Ae=Zt(Ue,q);Ae&&delete Ue[q],_t(ce,q,oe),Ae&&ce!==Ue&&_t(Ue,q,Ae)}:_t,Dr=function(ce,q){var oe=zt[ce]=U(He[je]);return kt(oe,{type:ze,tag:ce,description:q}),u||(oe.description=q),oe},w=h?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof He},M=function(q,oe,Ae){q===Ue&&M(vn,oe,Ae),S(q);var Te=O(oe,!0);return S(Ae),g(zt,Te)?(Ae.enumerable?(g(q,ne)&&q[ne][Te]&&(q[ne][Te]=!1),Ae=U(Ae,{enumerable:D(0,!1)})):(g(q,ne)||_t(q,ne,D(1,{})),q[ne][Te]=!0),kr(q,Te,Ae)):_t(q,Te,Ae)},I=function(q,oe){S(q);var Ae=A(oe),Te=K(Ae).concat(Me(Ae));return Y(Te,function(bt){(!u||Q.call(Ae,bt))&&M(q,bt,Ae[bt])}),q},F=function(q,oe){return oe===void 0?U(q):I(U(q),oe)},Q=function(q){var oe=O(q,!0),Ae=bi.call(this,oe);return this===Ue&&g(zt,oe)&&!g(vn,oe)?!1:Ae||!g(this,oe)||!g(zt,oe)||g(this,ne)&&this[ne][oe]?Ae:!0},ae=function(q,oe){var Ae=A(q),Te=O(oe,!0);if(!(Ae===Ue&&g(zt,Te)&&!g(vn,Te))){var bt=Zt(Ae,Te);return bt&&g(zt,Te)&&!(g(Ae,ne)&&Ae[ne][Te])&&(bt.enumerable=!0),bt}},ve=function(q){var oe=uo(A(q)),Ae=[];return Y(oe,function(Te){!g(zt,Te)&&!g(Ie,Te)&&Ae.push(Te)}),Ae},Me=function(q){var oe=q===Ue,Ae=uo(oe?vn:A(q)),Te=[];return Y(Ae,function(bt){g(zt,bt)&&(!oe||g(Ue,bt))&&Te.push(zt[bt])}),Te};if(f||(He=function(){if(this instanceof He)throw TypeError("Symbol is not a constructor");var q=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),oe=$e(q),Ae=function(Te){this===Ue&&Ae.call(vn,Te),g(this,ne)&&g(this[ne],oe)&&(this[ne][oe]=!1),kr(this,oe,D(1,Te))};return u&&wr&&kr(Ue,oe,{configurable:!0,set:Ae}),Dr(oe,q)},H(He[je],"toString",function(){return Et(this).tag}),H(He,"withoutSetter",function(ce){return Dr($e(ce),ce)}),R.f=Q,P.f=M,z.f=ae,k.f=V.f=ve,B.f=Me,$.f=function(ce){return Dr(Be(ce),ce)},u&&(_t(He[je],"description",{configurable:!0,get:function(){return Et(this).description}}),c||H(Ue,"propertyIsEnumerable",Q,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:He}),Y(K(Tr),function(ce){N(ce)}),l({target:ze,stat:!0,forced:!f},{for:function(ce){var q=String(ce);if(g(qn,q))return qn[q];var oe=He(q);return qn[q]=oe,Or[oe]=q,oe},keyFor:function(q){if(!w(q))throw TypeError(q+" is not a symbol");if(g(Or,q))return Or[q]},useSetter:function(){wr=!0},useSimple:function(){wr=!1}}),l({target:"Object",stat:!0,forced:!f,sham:!u},{create:F,defineProperty:M,defineProperties:I,getOwnPropertyDescriptor:ae}),l({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ve,getOwnPropertySymbols:Me}),l({target:"Object",stat:!0,forced:p(function(){B.f(1)})},{getOwnPropertySymbols:function(q){return B.f(C(q))}}),Vt){var Ye=!f||p(function(){var ce=He();return Vt([ce])!="[null]"||Vt({a:ce})!="{}"||Vt(Object(ce))!="{}"});l({target:"JSON",stat:!0,forced:Ye},{stringify:function(q,oe,Ae){for(var Te=[q],bt=1,xi;arguments.length>bt;)Te.push(arguments[bt++]);if(xi=oe,!(!b(oe)&&q===void 0||w(q)))return v(oe)||(oe=function(vc,fo){if(typeof xi=="function"&&(fo=xi.call(this,vc,fo)),!w(fo))return fo}),Te[1]=oe,Vt.apply(null,Te)}})}He[je][yt]||W(He[je],yt,He[je].valueOf),ie(He,ze),Ie[ne]=!0},a630:function(o,i,s){var l=s("23e7"),a=s("4df4"),d=s("1c7e"),c=!d(function(u){Array.from(u)});l({target:"Array",stat:!0,forced:c},{from:a})},a640:function(o,i,s){var l=s("d039");o.exports=function(a,d){var c=[][a];return!!c&&l(function(){c.call(null,d||function(){throw 1},1)})}},a691:function(o,i){var s=Math.ceil,l=Math.floor;o.exports=function(a){return isNaN(a=+a)?0:(a>0?l:s)(a)}},ab13:function(o,i,s){var l=s("b622"),a=l("match");o.exports=function(d){var c=/./;try{"/./"[d](c)}catch{try{return c[a]=!1,"/./"[d](c)}catch{}}return!1}},ac1f:function(o,i,s){var l=s("23e7"),a=s("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(o,i,s){var l=s("825a");o.exports=function(){var a=l(this),d="";return a.global&&(d+="g"),a.ignoreCase&&(d+="i"),a.multiline&&(d+="m"),a.dotAll&&(d+="s"),a.unicode&&(d+="u"),a.sticky&&(d+="y"),d}},ae40:function(o,i,s){var l=s("83ab"),a=s("d039"),d=s("5135"),c=Object.defineProperty,u={},f=function(h){throw h};o.exports=function(h,p){if(d(u,h))return u[h];p||(p={});var g=[][h],v=d(p,"ACCESSORS")?p.ACCESSORS:!1,b=d(p,0)?p[0]:f,S=d(p,1)?p[1]:void 0;return u[h]=!!g&&!a(function(){if(v&&!l)return!0;var C={length:-1};v?c(C,1,{enumerable:!0,get:f}):C[1]=1,g.call(C,b,S)})}},ae93:function(o,i,s){var l=s("e163"),a=s("9112"),d=s("5135"),c=s("b622"),u=s("c430"),f=c("iterator"),h=!1,p=function(){return this},g,v,b;[].keys&&(b=[].keys(),"next"in b?(v=l(l(b)),v!==Object.prototype&&(g=v)):h=!0),g==null&&(g={}),!u&&!d(g,f)&&a(g,f,p),o.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:h}},b041:function(o,i,s){var l=s("00ee"),a=s("f5df");o.exports=l?{}.toString:function(){return"[object "+a(this)+"]"}},b0c0:function(o,i,s){var l=s("83ab"),a=s("9bf2").f,d=Function.prototype,c=d.toString,u=/^\s*function ([^ (]*)/,f="name";l&&!(f in d)&&a(d,f,{configurable:!0,get:function(){try{return c.call(this).match(u)[1]}catch{return""}}})},b622:function(o,i,s){var l=s("da84"),a=s("5692"),d=s("5135"),c=s("90e3"),u=s("4930"),f=s("fdbf"),h=a("wks"),p=l.Symbol,g=f?p:p&&p.withoutSetter||c;o.exports=function(v){return d(h,v)||(u&&d(p,v)?h[v]=p[v]:h[v]=g("Symbol."+v)),h[v]}},b64b:function(o,i,s){var l=s("23e7"),a=s("7b0b"),d=s("df75"),c=s("d039"),u=c(function(){d(1)});l({target:"Object",stat:!0,forced:u},{keys:function(h){return d(a(h))}})},b727:function(o,i,s){var l=s("0366"),a=s("44ad"),d=s("7b0b"),c=s("50c4"),u=s("65f0"),f=[].push,h=function(p){var g=p==1,v=p==2,b=p==3,S=p==4,C=p==6,A=p==5||C;return function(O,D,U,K){for(var k=d(O),V=a(k),B=l(D,U,3),z=c(V.length),P=0,R=K||u,W=g?R(O,z):v?R(O,0):void 0,H,ee;z>P;P++)if((A||P in V)&&(H=V[P],ee=B(H,P,k),p)){if(g)W[P]=ee;else if(ee)switch(p){case 3:return!0;case 5:return H;case 6:return P;case 2:f.call(W,H)}else if(S)return!1}return C?-1:b||S?S:W}};o.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(o,i,s){var l=s("861d");o.exports=function(a,d){if(!l(a))return a;var c,u;if(d&&typeof(c=a.toString)=="function"&&!l(u=c.call(a))||typeof(c=a.valueOf)=="function"&&!l(u=c.call(a))||!d&&typeof(c=a.toString)=="function"&&!l(u=c.call(a)))return u;throw TypeError("Can't convert object to primitive value")}},c430:function(o,i){o.exports=!1},c6b6:function(o,i){var s={}.toString;o.exports=function(l){return s.call(l).slice(8,-1)}},c6cd:function(o,i,s){var l=s("da84"),a=s("ce4e"),d="__core-js_shared__",c=l[d]||a(d,{});o.exports=c},c740:function(o,i,s){var l=s("23e7"),a=s("b727").findIndex,d=s("44d2"),c=s("ae40"),u="findIndex",f=!0,h=c(u);u in[]&&Array(1)[u](function(){f=!1}),l({target:"Array",proto:!0,forced:f||!h},{findIndex:function(g){return a(this,g,arguments.length>1?arguments[1]:void 0)}}),d(u)},c8ba:function(o,i){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}o.exports=s},c975:function(o,i,s){var l=s("23e7"),a=s("4d64").indexOf,d=s("a640"),c=s("ae40"),u=[].indexOf,f=!!u&&1/[1].indexOf(1,-0)<0,h=d("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:f||!h||!p},{indexOf:function(v){return f?u.apply(this,arguments)||0:a(this,v,arguments.length>1?arguments[1]:void 0)}})},ca84:function(o,i,s){var l=s("5135"),a=s("fc6a"),d=s("4d64").indexOf,c=s("d012");o.exports=function(u,f){var h=a(u),p=0,g=[],v;for(v in h)!l(c,v)&&l(h,v)&&g.push(v);for(;f.length>p;)l(h,v=f[p++])&&(~d(g,v)||g.push(v));return g}},caad:function(o,i,s){var l=s("23e7"),a=s("4d64").includes,d=s("44d2"),c=s("ae40"),u=c("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!u},{includes:function(h){return a(this,h,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(o,i,s){var l=s("da84"),a=s("861d"),d=l.document,c=a(d)&&a(d.createElement);o.exports=function(u){return c?d.createElement(u):{}}},ce4e:function(o,i,s){var l=s("da84"),a=s("9112");o.exports=function(d,c){try{a(l,d,c)}catch{l[d]=c}return c}},d012:function(o,i){o.exports={}},d039:function(o,i){o.exports=function(s){try{return!!s()}catch{return!0}}},d066:function(o,i,s){var l=s("428f"),a=s("da84"),d=function(c){return typeof c=="function"?c:void 0};o.exports=function(c,u){return arguments.length<2?d(l[c])||d(a[c]):l[c]&&l[c][u]||a[c]&&a[c][u]}},d1e7:function(o,i,s){var l={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,d=a&&!l.call({1:2},1);i.f=d?function(u){var f=a(this,u);return!!f&&f.enumerable}:l},d28b:function(o,i,s){var l=s("746f");l("iterator")},d2bb:function(o,i,s){var l=s("825a"),a=s("3bbe");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,c={},u;try{u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,u.call(c,[]),d=c instanceof Array}catch{}return function(h,p){return l(h),a(p),d?u.call(h,p):h.__proto__=p,h}}():void 0)},d3b7:function(o,i,s){var l=s("00ee"),a=s("6eeb"),d=s("b041");l||a(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(o,i,s){var l=s("9bf2").f,a=s("5135"),d=s("b622"),c=d("toStringTag");o.exports=function(u,f,h){u&&!a(u=h?u:u.prototype,c)&&l(u,c,{configurable:!0,value:f})}},d58f:function(o,i,s){var l=s("1c0b"),a=s("7b0b"),d=s("44ad"),c=s("50c4"),u=function(f){return function(h,p,g,v){l(p);var b=a(h),S=d(b),C=c(b.length),A=f?C-1:0,O=f?-1:1;if(g<2)for(;;){if(A in S){v=S[A],A+=O;break}if(A+=O,f?A<0:C<=A)throw TypeError("Reduce of empty array with no initial value")}for(;f?A>=0:C>A;A+=O)A in S&&(v=p(v,S[A],A,b));return v}};o.exports={left:u(!1),right:u(!0)}},d784:function(o,i,s){s("ac1f");var l=s("6eeb"),a=s("d039"),d=s("b622"),c=s("9263"),u=s("9112"),f=d("species"),h=!a(function(){var S=/./;return S.exec=function(){var C=[];return C.groups={a:"7"},C},"".replace(S,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),g=d("replace"),v=function(){return/./[g]?/./[g]("a","$0")==="":!1}(),b=!a(function(){var S=/(?:)/,C=S.exec;S.exec=function(){return C.apply(this,arguments)};var A="ab".split(S);return A.length!==2||A[0]!=="a"||A[1]!=="b"});o.exports=function(S,C,A,O){var D=d(S),U=!a(function(){var P={};return P[D]=function(){return 7},""[S](P)!=7}),K=U&&!a(function(){var P=!1,R=/a/;return S==="split"&&(R={},R.constructor={},R.constructor[f]=function(){return R},R.flags="",R[D]=/./[D]),R.exec=function(){return P=!0,null},R[D](""),!P});if(!U||!K||S==="replace"&&!(h&&p&&!v)||S==="split"&&!b){var k=/./[D],V=A(D,""[S],function(P,R,W,H,ee){return R.exec===c?U&&!ee?{done:!0,value:k.call(R,W,H)}:{done:!0,value:P.call(W,R,H)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),B=V[0],z=V[1];l(String.prototype,S,B),l(RegExp.prototype,D,C==2?function(P,R){return z.call(P,this,R)}:function(P){return z.call(P,this)})}O&&u(RegExp.prototype[D],"sham",!0)}},d81d:function(o,i,s){var l=s("23e7"),a=s("b727").map,d=s("1dde"),c=s("ae40"),u=d("map"),f=c("map");l({target:"Array",proto:!0,forced:!u||!f},{map:function(p){return a(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(o,i,s){(function(l){var a=function(d){return d&&d.Math==Math&&d};o.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof l=="object"&&l)||Function("return this")()}).call(this,s("c8ba"))},dbb4:function(o,i,s){var l=s("23e7"),a=s("83ab"),d=s("56ef"),c=s("fc6a"),u=s("06cf"),f=s("8418");l({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(p){for(var g=c(p),v=u.f,b=d(g),S={},C=0,A,O;b.length>C;)O=v(g,A=b[C++]),O!==void 0&&f(S,A,O);return S}})},dbf1:function(o,i,s){(function(l){s.d(i,"a",function(){return d});function a(){return typeof window<"u"?window.console:l.console}var d=a()}).call(this,s("c8ba"))},ddb0:function(o,i,s){var l=s("da84"),a=s("fdbc"),d=s("e260"),c=s("9112"),u=s("b622"),f=u("iterator"),h=u("toStringTag"),p=d.values;for(var g in a){var v=l[g],b=v&&v.prototype;if(b){if(b[f]!==p)try{c(b,f,p)}catch{b[f]=p}if(b[h]||c(b,h,g),a[g]){for(var S in d)if(b[S]!==d[S])try{c(b,S,d[S])}catch{b[S]=d[S]}}}}},df75:function(o,i,s){var l=s("ca84"),a=s("7839");o.exports=Object.keys||function(c){return l(c,a)}},e01a:function(o,i,s){var l=s("23e7"),a=s("83ab"),d=s("da84"),c=s("5135"),u=s("861d"),f=s("9bf2").f,h=s("e893"),p=d.Symbol;if(a&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var g={},v=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),U=this instanceof v?new p(D):D===void 0?p():p(D);return D===""&&(g[U]=!0),U};h(v,p);var b=v.prototype=p.prototype;b.constructor=v;var S=b.toString,C=String(p("test"))=="Symbol(test)",A=/^Symbol\((.*)\)[^)]+$/;f(b,"description",{configurable:!0,get:function(){var D=u(this)?this.valueOf():this,U=S.call(D);if(c(g,D))return"";var K=C?U.slice(7,-1):U.replace(A,"$1");return K===""?void 0:K}}),l({global:!0,forced:!0},{Symbol:v})}},e163:function(o,i,s){var l=s("5135"),a=s("7b0b"),d=s("f772"),c=s("e177"),u=d("IE_PROTO"),f=Object.prototype;o.exports=c?Object.getPrototypeOf:function(h){return h=a(h),l(h,u)?h[u]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},e177:function(o,i,s){var l=s("d039");o.exports=!l(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},e260:function(o,i,s){var l=s("fc6a"),a=s("44d2"),d=s("3f8c"),c=s("69f3"),u=s("7dd0"),f="Array Iterator",h=c.set,p=c.getterFor(f);o.exports=u(Array,"Array",function(g,v){h(this,{type:f,target:l(g),index:0,kind:v})},function(){var g=p(this),v=g.target,b=g.kind,S=g.index++;return!v||S>=v.length?(g.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:S,done:!1}:b=="values"?{value:v[S],done:!1}:{value:[S,v[S]],done:!1}},"values"),d.Arguments=d.Array,a("keys"),a("values"),a("entries")},e439:function(o,i,s){var l=s("23e7"),a=s("d039"),d=s("fc6a"),c=s("06cf").f,u=s("83ab"),f=a(function(){c(1)}),h=!u||f;l({target:"Object",stat:!0,forced:h,sham:!u},{getOwnPropertyDescriptor:function(g,v){return c(d(g),v)}})},e538:function(o,i,s){var l=s("b622");i.f=l},e893:function(o,i,s){var l=s("5135"),a=s("56ef"),d=s("06cf"),c=s("9bf2");o.exports=function(u,f){for(var h=a(f),p=c.f,g=d.f,v=0;v<h.length;v++){var b=h[v];l(u,b)||p(u,b,g(f,b))}}},e8b5:function(o,i,s){var l=s("c6b6");o.exports=Array.isArray||function(d){return l(d)=="Array"}},e95a:function(o,i,s){var l=s("b622"),a=s("3f8c"),d=l("iterator"),c=Array.prototype;o.exports=function(u){return u!==void 0&&(a.Array===u||c[d]===u)}},f5df:function(o,i,s){var l=s("00ee"),a=s("c6b6"),d=s("b622"),c=d("toStringTag"),u=a(function(){return arguments}())=="Arguments",f=function(h,p){try{return h[p]}catch{}};o.exports=l?a:function(h){var p,g,v;return h===void 0?"Undefined":h===null?"Null":typeof(g=f(p=Object(h),c))=="string"?g:u?a(p):(v=a(p))=="Object"&&typeof p.callee=="function"?"Arguments":v}},f772:function(o,i,s){var l=s("5692"),a=s("90e3"),d=l("keys");o.exports=function(c){return d[c]||(d[c]=a(c))}},fb15:function(o,i,s){if(s.r(i),typeof window<"u"){var l=window.document.currentScript;{var a=s("8875");l=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a})}var d=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(s.p=d[1])}s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("a434"),s("159b"),s("a4d3"),s("e439"),s("dbb4"),s("b64b");function c(w,M,I){return M in w?Object.defineProperty(w,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[M]=I,w}function u(w,M){var I=Object.keys(w);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(w);M&&(F=F.filter(function(Q){return Object.getOwnPropertyDescriptor(w,Q).enumerable})),I.push.apply(I,F)}return I}function f(w){for(var M=1;M<arguments.length;M++){var I=arguments[M]!=null?arguments[M]:{};M%2?u(Object(I),!0).forEach(function(F){c(w,F,I[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(I)):u(Object(I)).forEach(function(F){Object.defineProperty(w,F,Object.getOwnPropertyDescriptor(I,F))})}return w}function h(w){if(Array.isArray(w))return w}s("e01a"),s("d28b"),s("e260"),s("d3b7"),s("3ca3"),s("ddb0");function p(w,M){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(w)))){var I=[],F=!0,Q=!1,ae=void 0;try{for(var ve=w[Symbol.iterator](),Me;!(F=(Me=ve.next()).done)&&(I.push(Me.value),!(M&&I.length===M));F=!0);}catch(Ye){Q=!0,ae=Ye}finally{try{!F&&ve.return!=null&&ve.return()}finally{if(Q)throw ae}}return I}}s("a630"),s("fb6a"),s("b0c0"),s("25f0");function g(w,M){(M==null||M>w.length)&&(M=w.length);for(var I=0,F=new Array(M);I<M;I++)F[I]=w[I];return F}function v(w,M){if(w){if(typeof w=="string")return g(w,M);var I=Object.prototype.toString.call(w).slice(8,-1);if(I==="Object"&&w.constructor&&(I=w.constructor.name),I==="Map"||I==="Set")return Array.from(w);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return g(w,M)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(w,M){return h(w)||p(w,M)||v(w,M)||b()}function C(w){if(Array.isArray(w))return g(w)}function A(w){if(typeof Symbol<"u"&&Symbol.iterator in Object(w))return Array.from(w)}function O(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(w){return C(w)||A(w)||v(w)||O()}var U=s("a352"),K=s.n(U);function k(w){w.parentElement!==null&&w.parentElement.removeChild(w)}function V(w,M,I){var F=I===0?w.children[0]:w.children[I-1].nextSibling;w.insertBefore(M,F)}var B=s("dbf1");s("13d5"),s("4fad"),s("ac1f"),s("5319");function z(w){var M=Object.create(null);return function(F){var Q=M[F];return Q||(M[F]=w(F))}}var P=/-(\w)/g,R=z(function(w){return w.replace(P,function(M,I){return I.toUpperCase()})});s("5db7"),s("73d9");var W=["Start","Add","Remove","Update","End"],H=["Choose","Unchoose","Sort","Filter","Clone"],ee=["Move"],Ee=[ee,W,H].flatMap(function(w){return w}).map(function(w){return"on".concat(w)}),Ie={manage:ee,manageAndEmit:W,emit:H};function $e(w){return Ee.indexOf(w)!==-1}s("caad"),s("2ca0");var Be=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function $(w){return Be.includes(w)}function N(w){return["transition-group","TransitionGroup"].includes(w)}function ie(w){return["id","class","role","style"].includes(w)||w.startsWith("data-")||w.startsWith("aria-")||w.startsWith("on")}function E(w){return w.reduce(function(M,I){var F=S(I,2),Q=F[0],ae=F[1];return M[Q]=ae,M},{})}function Y(w){var M=w.$attrs,I=w.componentData,F=I===void 0?{}:I,Q=E(Object.entries(M).filter(function(ae){var ve=S(ae,2),Me=ve[0];return ve[1],ie(Me)}));return f(f({},Q),F)}function ne(w){var M=w.$attrs,I=w.callBackBuilder,F=E(ze(M));Object.entries(I).forEach(function(ae){var ve=S(ae,2),Me=ve[0],Ye=ve[1];Ie[Me].forEach(function(ce){F["on".concat(ce)]=Ye(ce)})});var Q="[data-draggable]".concat(F.draggable||"");return f(f({},F),{},{draggable:Q})}function ze(w){return Object.entries(w).filter(function(M){var I=S(M,2),F=I[0];return I[1],!ie(F)}).map(function(M){var I=S(M,2),F=I[0],Q=I[1];return[R(F),Q]}).filter(function(M){var I=S(M,2),F=I[0];return I[1],!$e(F)})}s("c740");function je(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")}function yt(w,M){for(var I=0;I<M.length;I++){var F=M[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(w,F.key,F)}}function kt(w,M,I){return M&&yt(w.prototype,M),I&&yt(w,I),w}var Et=function(M){var I=M.el;return I},Ue=function(M,I){return M.__draggable_context=I},He=function(M){return M.__draggable_context},Vt=function(){function w(M){var I=M.nodes,F=I.header,Q=I.default,ae=I.footer,ve=M.root,Me=M.realList;je(this,w),this.defaultNodes=Q,this.children=[].concat(D(F),D(Q),D(ae)),this.externalComponent=ve.externalComponent,this.rootTransition=ve.transition,this.tag=ve.tag,this.realList=Me}return kt(w,[{key:"render",value:function(I,F){var Q=this.tag,ae=this.children,ve=this._isRootComponent,Me=ve?{default:function(){return ae}}:ae;return I(Q,F,Me)}},{key:"updated",value:function(){var I=this.defaultNodes,F=this.realList;I.forEach(function(Q,ae){Ue(Et(Q),{element:F[ae],index:ae})})}},{key:"getUnderlyingVm",value:function(I){return He(I)}},{key:"getVmIndexFromDomIndex",value:function(I,F){var Q=this.defaultNodes,ae=Q.length,ve=F.children,Me=ve.item(I);if(Me===null)return ae;var Ye=He(Me);if(Ye)return Ye.index;if(ae===0)return 0;var ce=Et(Q[0]),q=D(ve).findIndex(function(oe){return oe===ce});return I<q?0:ae}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),w}(),Zt=s("8bbf");function _t(w,M){var I=w[M];return I?I():[]}function uo(w){var M=w.$slots,I=w.realList,F=w.getKey,Q=I||[],ae=["header","footer"].map(function(oe){return _t(M,oe)}),ve=S(ae,2),Me=ve[0],Ye=ve[1],ce=M.item;if(!ce)throw new Error("draggable element must have an item slot");var q=Q.flatMap(function(oe,Ae){return ce({element:oe,index:Ae}).map(function(Te){return Te.key=F(oe),Te.props=f(f({},Te.props||{}),{},{"data-draggable":!0}),Te})});if(q.length!==Q.length)throw new Error("Item slot must have only one child");return{header:Me,footer:Ye,default:q}}function bi(w){var M=N(w),I=!$(w)&&!M;return{transition:M,externalComponent:I,tag:I?Object(Zt.resolveComponent)(w):M?Zt.TransitionGroup:w}}function zt(w){var M=w.$slots,I=w.tag,F=w.realList,Q=w.getKey,ae=uo({$slots:M,realList:F,getKey:Q}),ve=bi(I);return new Vt({nodes:ae,root:ve,realList:F})}function vn(w,M){var I=this;Object(Zt.nextTick)(function(){return I.$emit(w.toLowerCase(),M)})}function qn(w){var M=this;return function(I,F){if(M.realList!==null)return M["onDrag".concat(w)](I,F)}}function Or(w){var M=this,I=qn.call(this,w);return function(F,Q){I.call(M,F,Q),vn.call(M,w,F)}}var Tr=null,Mr={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(M){return M}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},wr=["update:modelValue","change"].concat(D([].concat(D(Ie.manageAndEmit),D(Ie.emit)).map(function(w){return w.toLowerCase()}))),kr=Object(Zt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Mr,emits:wr,data:function(){return{error:!1}},render:function(){try{this.error=!1;var M=this.$slots,I=this.$attrs,F=this.tag,Q=this.componentData,ae=this.realList,ve=this.getKey,Me=zt({$slots:M,tag:F,realList:ae,getKey:ve});this.componentStructure=Me;var Ye=Y({$attrs:I,componentData:Q});return Me.render(Zt.h,Ye)}catch(ce){return this.error=!0,Object(Zt.h)("pre",{style:{color:"red"}},ce.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var M=this;if(!this.error){var I=this.$attrs,F=this.$el,Q=this.componentStructure;Q.updated();var ae=ne({$attrs:I,callBackBuilder:{manageAndEmit:function(Ye){return Or.call(M,Ye)},emit:function(Ye){return vn.bind(M,Ye)},manage:function(Ye){return qn.call(M,Ye)}}}),ve=F.nodeType===1?F:F.parentElement;this._sortable=new K.a(ve,ae),this.targetDomElement=ve,ve.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var M=this.list;return M||this.modelValue},getKey:function(){var M=this.itemKey;return typeof M=="function"?M:function(I){return I[M]}}},watch:{$attrs:{handler:function(M){var I=this._sortable;I&&ze(M).forEach(function(F){var Q=S(F,2),ae=Q[0],ve=Q[1];I.option(ae,ve)})},deep:!0}},methods:{getUnderlyingVm:function(M){return this.componentStructure.getUnderlyingVm(M)||null},getUnderlyingPotencialDraggableComponent:function(M){return M.__draggable_component__},emitChanges:function(M){var I=this;Object(Zt.nextTick)(function(){return I.$emit("change",M)})},alterList:function(M){if(this.list){M(this.list);return}var I=D(this.modelValue);M(I),this.$emit("update:modelValue",I)},spliceList:function(){var M=arguments,I=function(Q){return Q.splice.apply(Q,D(M))};this.alterList(I)},updatePosition:function(M,I){var F=function(ae){return ae.splice(I,0,ae.splice(M,1)[0])};this.alterList(F)},getRelatedContextFromMoveEvent:function(M){var I=M.to,F=M.related,Q=this.getUnderlyingPotencialDraggableComponent(I);if(!Q)return{component:Q};var ae=Q.realList,ve={list:ae,component:Q};if(I!==F&&ae){var Me=Q.getUnderlyingVm(F)||{};return f(f({},Me),ve)}return ve},getVmIndexFromDomIndex:function(M){return this.componentStructure.getVmIndexFromDomIndex(M,this.targetDomElement)},onDragStart:function(M){this.context=this.getUnderlyingVm(M.item),M.item._underlying_vm_=this.clone(this.context.element),Tr=M.item},onDragAdd:function(M){var I=M.item._underlying_vm_;if(I!==void 0){k(M.item);var F=this.getVmIndexFromDomIndex(M.newIndex);this.spliceList(F,0,I);var Q={element:I,newIndex:F};this.emitChanges({added:Q})}},onDragRemove:function(M){if(V(this.$el,M.item,M.oldIndex),M.pullMode==="clone"){k(M.clone);return}var I=this.context,F=I.index,Q=I.element;this.spliceList(F,1);var ae={element:Q,oldIndex:F};this.emitChanges({removed:ae})},onDragUpdate:function(M){k(M.item),V(M.from,M.item,M.oldIndex);var I=this.context.index,F=this.getVmIndexFromDomIndex(M.newIndex);this.updatePosition(I,F);var Q={element:this.context.element,oldIndex:I,newIndex:F};this.emitChanges({moved:Q})},computeFutureIndex:function(M,I){if(!M.element)return 0;var F=D(I.to.children).filter(function(Me){return Me.style.display!=="none"}),Q=F.indexOf(I.related),ae=M.component.getVmIndexFromDomIndex(Q),ve=F.indexOf(Tr)!==-1;return ve||!I.willInsertAfter?ae:ae+1},onDragMove:function(M,I){var F=this.move,Q=this.realList;if(!F||!Q)return!0;var ae=this.getRelatedContextFromMoveEvent(M),ve=this.computeFutureIndex(ae,M),Me=f(f({},this.context),{},{futureIndex:ve}),Ye=f(f({},M),{},{relatedContext:ae,draggedContext:Me});return F(Ye,I)},onDragEnd:function(){Tr=null}}}),Dr=kr;i.default=Dr},fb6a:function(o,i,s){var l=s("23e7"),a=s("861d"),d=s("e8b5"),c=s("23cb"),u=s("50c4"),f=s("fc6a"),h=s("8418"),p=s("b622"),g=s("1dde"),v=s("ae40"),b=g("slice"),S=v("slice",{ACCESSORS:!0,0:0,1:2}),C=p("species"),A=[].slice,O=Math.max;l({target:"Array",proto:!0,forced:!b||!S},{slice:function(U,K){var k=f(this),V=u(k.length),B=c(U,V),z=c(K===void 0?V:K,V),P,R,W;if(d(k)&&(P=k.constructor,typeof P=="function"&&(P===Array||d(P.prototype))?P=void 0:a(P)&&(P=P[C],P===null&&(P=void 0)),P===Array||P===void 0))return A.call(k,B,z);for(R=new(P===void 0?Array:P)(O(z-B,0)),W=0;B<z;B++,W++)B in k&&h(R,W,k[B]);return R.length=W,R}})},fc6a:function(o,i,s){var l=s("44ad"),a=s("1d80");o.exports=function(d){return l(a(d))}},fdbc:function(o,i){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(o,i,s){var l=s("4930");o.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(ic);var Nx=ic.exports;const rs=wc(Nx),he=r=>(ni("data-v-5cffde92"),r=r(),ri(),r),Px={class:"create-new-page"},Rx={class:"w-[95%] max-w-[1368px] mx-auto flex justify-between relative"},$x={class:"min-w-[208px] border-r-[1px] border-r-neutral-400"},Bx={id:"sidebar",class:"sidebar"},Lx=["onClick"],Fx=he(()=>m("span",{class:"step-circle"},null,-1)),Vx=he(()=>m("h1",null,"新增網頁",-1)),zx={class:"w-[90%] mx-auto"},jx=he(()=>m("h2",{class:"sub-title"}," 請針對前台員工進行帳號密碼設定 ",-1)),Ux={class:"grid grid-col-1 gap-4 w-[300px]"},Hx={class:""},Kx=he(()=>m("label",{class:"form-label lable-text mb-3"},"編號",-1)),Wx={class:"flex items-center mb-4"},Gx=he(()=>m("span",{class:"radio-text"},"身分證字號",-1)),Jx={class:"flex items-center"},Yx=he(()=>m("span",{class:"radio-text"},"員工編號",-1)),Xx=he(()=>m("label",{class:"form-label lable-text"},"檢核碼",-1)),Qx={class:"w-[90%] mx-auto"},Zx=he(()=>m("h3",{class:"h3-title"}," 上傳檔案 ",-1)),_x={class:"rounded-md p-8 border border-[#D7D7D7] bg-[#F8FBFD] shadow-[0_4px_15px_0px_rgba(19,26,52,0.04)] flex justify-between items-center"},qx=he(()=>m("div",{class:"flex items-center"},[m("img",{src:Pc,alt:"icon-upload",class:"mr-3"}),m("div",null,[m("p",{class:"text-neutral-800 font-semibold"}," 上傳檔案 "),m("p",{class:"text-neutral-600"}," 格式限excel 上限為5MB ")])],-1)),eS={class:"flex items-center"},tS={key:0,class:"flex items-center mr-4"},nS={class:"inline-block w-[110px] truncate"},rS={id:"upload-btn"},oS={class:"w-[90%] mx-auto mb-8"},iS=he(()=>m("h3",{class:"h3-title"}," 保單基本資料 ",-1)),sS={class:"grid grid-col-1 gap-4 w-[300px]"},lS={class:"flex items-center mb-4"},aS=he(()=>m("span",{class:"radio-text"},"單一保單號碼",-1)),dS={class:"flex items-center mb-4"},cS=he(()=>m("span",{class:"radio-text"},"多個保單號碼",-1)),uS=he(()=>m("label",{class:"form-label lable-text"},"保戶編號",-1)),fS={class:"grid grid-col-1 gap-4 w-[300px]"},hS=he(()=>m("label",{class:"form-label lable-text"},"保單號碼",-1)),pS=he(()=>m("label",{class:"form-label lable-text"},"公司名稱",-1)),mS=he(()=>m("label",{class:"form-label lable-text"},"本次保單週年日",-1)),gS=he(()=>m("label",{class:"form-label lable-text"},"南山Branch code",-1)),vS={class:"w-[90%] mx-auto mb-8"},yS=he(()=>m("h3",{class:"h3-title"}," 無異動是否需要填寫資料 ",-1)),bS={class:"flex items-center mb-4"},xS=he(()=>m("span",{class:"radio-text"},"無異動需填寫資料",-1)),SS={class:"flex items-center"},CS=he(()=>m("span",{class:"radio-text"},"無異動不需填寫資料",-1)),ES={class:"w-[90%] mx-auto mb-8"},AS=he(()=>m("h3",{class:"h3-title"}," 申請書寄送方式 ",-1)),OS=he(()=>m("label",{class:"form-label lable-text mb-3"},"加退保申請書正本寄送方式",-1)),TS={class:"flex items-center mb-4"},MS=he(()=>m("span",{class:"radio-text"},"人力資源部窗口",-1)),wS={class:"flex items-center mb-4"},kS=he(()=>m("span",{class:"radio-text"},"南山人壽團險行政窗口",-1)),DS={class:"flex items-center"},IS=he(()=>m("span",{class:"radio-text"},"其他約定窗口",-1)),NS={key:0,class:"bg-[#F8FBFD] py-3 px-8 w-[380px] mt-2"},PS={class:"w-[90%] mx-auto mb-8"},RS=he(()=>m("h3",{class:"h3-title"}," 新進人員設定申請加保日 ",-1)),$S={class:"w-[90%] mx-auto mb-8"},BS=he(()=>m("h3",{class:"h3-title"}," 設定加退保期間及生效日 ",-1)),LS={class:"w-[90%] mx-auto"},FS=he(()=>m("h3",{class:"h3-title"}," 選擇所需欄位 ",-1)),VS={class:"w-[90%] mx-auto"},zS=he(()=>m("h2",{class:"sub-title"}," 請針對繳費方式進行設定 ",-1)),jS=he(()=>m("label",{class:"form-label lable-text mb-3"},"繳費方式",-1)),US={class:"flex items-center mb-4"},HS=he(()=>m("span",{class:"radio-text"},"薪資扣款",-1)),KS={class:"flex items-center mb-4"},WS=he(()=>m("span",{class:"radio-text"},"自行繳納",-1)),GS={key:0,class:"py-3 -mt-2 flex"},JS={class:"flex items-center mr-4"},YS=he(()=>m("label",{for:"creditCard",class:"text-neutral-800 cursor-pointer"},"信用卡繳費",-1)),XS={class:"flex items-center"},QS=he(()=>m("label",{for:"atm",class:"text-neutral-800 cursor-pointer"},"自行轉帳 繳款帳號：0633-652-6532",-1)),ZS={class:"w-[90%] mx-auto"},_S=he(()=>m("h2",{class:"sub-title"}," 請針對上下架進行設定 ",-1)),qS={class:"grid grid-cols-1 gap-4"},eC=he(()=>m("label",{class:"form-label lable-text mb-3"},"上架時間",-1)),tC={class:"flex items-center"},nC=he(()=>m("label",{class:"form-label lable-text mb-3"},"下架時間",-1)),rC={class:"w-[90%] mx-auto"},oC=he(()=>m("h2",{class:"sub-title"}," 請針對計畫別進行設定 ",-1)),iC={class:"w-[90%] mx-auto"},sC=he(()=>m("h2",{class:"sub-title"}," 請設定告知限制 ",-1)),lC={class:"w-[90%] mx-auto flex justify-between items-center mb-8"},aC={key:0,class:"w-[90%] mx-auto mb-8"},dC={class:"flex items-center justify-between"},cC={class:"flex items-center grow"},uC=he(()=>m("img",{src:$s,alt:"icon_drag_indicator",class:"mr-2 cursor-move"},null,-1)),fC=["onClick"],hC={class:"text-primary-600 font-semibold w-fit"},pC={class:"text-neutral-600"},mC={class:"ml-4 flex flex-col"},gC={class:"py-4 px-14"},vC={class:"w-[90%] mx-auto"},yC=he(()=>m("h2",{class:"sub-title"}," 請針對備註編輯 ",-1)),bC={class:"shadow-[0_-4px_44px_0px_rgba(30,28,52,0.08)]"},xC={class:"w-[90%] mx-auto flex justify-between items-center mb-8"},SC={key:0,class:"w-[90%] mx-auto mb-8"},CC={class:"flex items-center justify-between"},EC={class:"flex items-center grow"},AC=he(()=>m("img",{src:$s,alt:"icon_drag_indicator",class:"mr-2 cursor-move"},null,-1)),OC=["onClick"],TC={class:"text-primary-600 font-semibold"},MC={class:"text-neutral-600"},wC={class:"ml-4 flex flex-col"},kC={class:"py-4 px-14"},DC={class:"w-[90%] mx-auto flex justify-between items-center mb-8"},IC={class:"w-[90%] mx-auto flex justify-between items-center mb-8"},NC={key:0,class:"w-[90%] mx-auto mb-8"},PC={class:"flex items-center justify-between"},RC={class:"flex items-center grow"},$C=he(()=>m("img",{src:$s,alt:"icon_drag_indicator",class:"mr-2 cursor-move"},null,-1)),BC=["onClick"],LC={class:"text-primary-600 font-semibold"},FC={class:"text-neutral-600"},VC={class:"ml-4 flex flex-col"},zC={class:"py-4 px-14 flex justify-center"},jC={class:"w-[420px] h-[420px] relative"},UC=["src"],HC={class:"absolute top-0 left-0 w-full h-full"},KC=["src"],WC={class:"text-white w-[90%] mx-auto text-[28px] font-bold mt-[200px]"},GC={class:""},JC={class:"flex justify-center mb-[40px]"},YC=he(()=>m("h3",{class:"text-neutral-800 text-lg font-semibold"}," 檔案過大 ",-1)),XC=he(()=>m("p",{class:"text-neutral-800 text-base"}," 上傳檔案格式限excel 上限為5MB ",-1)),QC=Qt({__name:"NewPage",setup(r){const e=ke([{title:"首頁",path:Ci.BACKHOME},{title:"創建網頁",path:Ci.CREATE},{title:"新增網頁",path:Ci.NEW_PAGE}]),t=mn(),{createInfo:n,branchCodeOption:o,sideBarList:i,ruleCopy:s,rules:l,QAs:a,ADs:d}=pn(t),c=ke(!1),u=ke(0),f=ke(!1),h=ke(!1),p=ke(!1),g=ke(!1),v=ke(!1),b=ke(""),S=ke(""),C=ke(i.value[0].to),A=Ns({});window.addEventListener("scroll",function(){const $=window.scrollY,N=document.getElementById(i.value[0].to),ie=document.getElementById(i.value[1].to),E=document.getElementById(i.value[2].to),Y=document.getElementById(i.value[3].to),ne=document.getElementById(i.value[4].to),ze=document.getElementById(i.value[5].to),je=document.getElementById(i.value[6].to),yt=document.getElementById(i.value[7].to),kt=document.getElementById(i.value[8].to),Et=document.getElementById(i.value[9].to),Ue=document.getElementById(i.value[10].to),He=document.getElementById(i.value[11].to),Vt=document.getElementById("sidebar");if(Vt&&N&&($>(N==null?void 0:N.offsetTop)-20?Vt.style.top="10px":Vt.style.top="113px"),N&&ie&&E&&Y&&ne&&ze&&je&&yt&&kt&&Et&&Ue&&He)switch(!0){case $>(He==null?void 0:He.offsetTop)-40:C.value=i.value[11].to;break;case $>(Ue==null?void 0:Ue.offsetTop)-40:C.value=i.value[10].to;break;case $>(Et==null?void 0:Et.offsetTop)-40:C.value=i.value[9].to;break;case $>(kt==null?void 0:kt.offsetTop)-40:C.value=i.value[8].to;break;case $>(yt==null?void 0:yt.offsetTop)-40:C.value=i.value[7].to;break;case $>(je==null?void 0:je.offsetTop)-40:C.value=i.value[6].to;break;case $>(ze==null?void 0:ze.offsetTop)-40:C.value=i.value[5].to;break;case $>(ne==null?void 0:ne.offsetTop)-40:C.value=i.value[4].to;break;case $>(Y==null?void 0:Y.offsetTop)-40:C.value=i.value[3].to;break;case $>(E==null?void 0:E.offsetTop)-40:C.value=i.value[2].to;break;case $>(ie==null?void 0:ie.offsetTop)-40:C.value=i.value[1].to;break;case $>(N==null?void 0:N.offsetTop)-40:C.value=i.value[0].to;break}});function O($,N){var ie,E,Y;if($)switch(N){case"rule":if(n.value.selectedRules.length!==0)return(ie=n.value.selectedRules)==null?void 0:ie.findIndex(ne=>ne.id===$);break;case"qa":if(n.value.selectedQA.length!==0)return(E=n.value.selectedQA)==null?void 0:E.findIndex(ne=>ne.id===$);break;case"ad":if(n.value.selectedAd.length!==0)return(Y=n.value.selectedAd)==null?void 0:Y.findIndex(ne=>ne.id===$);break;default:return-1}return-1}function D($,N){switch(N){case"rule":n.value.selectedRules[O($,N)].expand=!n.value.selectedRules[O($,N)].expand;break;case"qa":n.value.selectedQA[O($,N)].expand=!n.value.selectedQA[O($,N)].expand;break;case"ad":n.value.selectedAd[O($,N)].expand=!n.value.selectedAd[O($,N)].expand;break}}function U($,N){n.value[N]=$}function K($){const N=document.getElementById($);N&&window.scrollTo({top:N.offsetTop,behavior:"smooth"})}function k($,N){switch(S.value=$,N){case"rule":p.value=!0;break;case"ad":v.value=!0;break}}function V($){n.value.selectedRules.push($)}function B($,N){const ie=O(S.value,N),E=n.value.selectedRules[ie];E.name=$.name,E.startDate=$.startDate,E.endDate=$.endDate,E.content=$.content}function z($,N){switch(N){case"rule":const ie=l.value.findIndex(E=>E.id===$);if(l.value[ie]&&"order"in l.value[ie]){const E=l.value[ie];s.value.push(E),s.value.sort((Y,ne)=>{const ze=Y.order??Number.MIN_SAFE_INTEGER,je=ne.order??Number.MIN_SAFE_INTEGER;return ze-je})}n.value.selectedRules.splice(O($,N),1);break;case"qa":n.value.selectedQA.splice(O($,N),1);break;case"ad":n.value.selectedAd.splice(O($,N),1);break}}function P($){n.value.selectedAd.push($)}function R($,N){const ie=O(S.value,N),E=n.value.selectedAd[ie];E.startDate=$.startDate,E.endDate=$.endDate,E.name=$.name,E.textBig=$.textBig,E.textSmall=$.textSmall,E.url=$.url,$.bigPicChange?(E.bigPic=$.bigPic,E.bigPicChange=$.bigPicChange):$.smallPicChange&&(E.smallPic=$.smallPic,E.smallPicChange=$.smallPicChange)}function W($){const N=document.getElementById("upload-input"),ie=$.target.files[0];if(ie&&ie.size<=5*1024*1024){b.value=ie.name;return}else N.value="",N.remove(),c.value=!0}function H($){const N=document.getElementById($);N==null||N.remove(),b.value=""}function ee(){const $=document.getElementById("upload-btn"),N=document.getElementById("upload-input");N==null||N.remove();const ie=document.createElement("input");$==null||$.appendChild(ie),ie.id="upload-input",ie.style.display="none",ie.type="file",ie.accept=".xlsx",ie.addEventListener("change",E=>{W(E)}),ie.click()}function Ee($){switch($){case"qa":n.value.selectedQA.length=0,n.value.selectedQA=JSON.parse(JSON.stringify(a.value));break;case"ad":n.value.selectedAd.length=0,n.value.selectedAd=JSON.parse(JSON.stringify(d.value));break}}function Ie($){return $?URL.createObjectURL($):""}function $e($){switch($){case"5MBAlert":c.value=!1;break;case"chooseRules":f.value=!1;break;case"addRules":h.value=!1;break;case"editRules":p.value=!1;break;case"addAd":g.value=!1;break;case"editAd":v.value=!1;break}}function Be($){console.log($)}return($,N)=>{const ie=kc("dompurify-html");return te(),fe("div",Px,[m("div",Rx,[m("div",$x,[m("div",Bx,[m("ul",null,[(te(!0),fe(rn,null,Po(y(i),(E,Y)=>(te(),fe("li",{key:Y,class:de(["cursor-pointer",{active:C.value===E.to}]),onClick:ne=>K(E.to)},[Fx,we(" "+qe(E.label),1)],10,Lx))),128))])])]),m("main",null,[x(Nc,{breadcrumb:e.value,class:"mb-6"},null,8,["breadcrumb"]),Vx,x(y(Ps),{"validation-schema":y(A),"initial-values":y(n),onSubmit:N[20]||(N[20]=E=>Be(E))},{default:T(()=>[x(Dt,{id:"account-setting",title:"前台員工帳密設定","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",zx,[jx,m("div",Ux,[m("div",Hx,[Kx,x(y(J),{name:"serialNumberOption"},{default:T(()=>[x(y(Gt),{modelValue:y(n).serialNumber,"onUpdate:modelValue":N[0]||(N[0]=E=>y(n).serialNumber=E)},{default:T(()=>[x(y(Oe),{value:"idNum",class:"w-fit"},{default:T(({checked:E})=>[m("div",Wx,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),Gx])]),_:1}),x(y(Oe),{value:"employeeNum",class:"w-fit"},{default:T(({checked:E})=>[m("div",Jx,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),Yx])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),m("div",null,[Xx,x(y(J),{name:"checkNum"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"請輸入預設檢核碼","model-value":y(n).checkNum=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})])])])]),_:1},8,["img-src"]),x(Dt,{id:"uploading",title:"上傳名單","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",Qx,[Zx,m("div",_x,[qx,m("div",eS,[b.value!==""?(te(),fe("div",tS,[m("span",nS,qe(b.value),1),m("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:N[1]||(N[1]=E=>H("upload-input"))},"✕")])):Se("",!0),m("div",rS,[x(Ne,{size:"m",disabled:b.value!=="",class:de({"cursor-not-allowed":b.value!==""}),onClick:ee},{default:T(()=>[we(qe(b.value!==""?"已上傳":"上傳檔案"),1)]),_:1},8,["disabled","class"])])])])])]),_:1},8,["img-src"]),x(Dt,{id:"basic-info",title:"基本資料","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",oS,[iS,m("div",sS,[x(y(J),{name:"policyCount"},{default:T(()=>[x(y(Gt),{modelValue:y(n).policyCount,"onUpdate:modelValue":N[2]||(N[2]=E=>y(n).policyCount=E)},{default:T(()=>[x(y(Oe),{value:"single",class:"w-fit"},{default:T(({checked:E})=>[m("div",lS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),aS])]),_:1}),x(y(Oe),{value:"multiple",class:"w-fit"},{default:T(({checked:E})=>[m("div",dS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),cS])]),_:1})]),_:1},8,["modelValue"])]),_:1}),m("div",null,[uS,x(y(J),{name:"customerNum"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"請輸入保戶編號","model-value":y(n).customerNum=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})]),m("div",fS,[m("div",null,[hS,x(y(J),{name:"policyNum"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"請輸入保戶編號","model-value":y(n).policyNum=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})])]),m("div",null,[pS,x(y(J),{name:"company"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"請輸入公司名稱","model-value":y(n).company=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})]),m("div",null,[mS,x(y(J),{name:"anniversaryDate"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"yyyy/mm/dd","model-value":y(n).anniversaryDate=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})]),m("div",null,[gS,x(y(J),{name:"branchCode"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(Da,_({id:"branchCodeSelect"},E,{value:Y,placeholder:"選擇項目",options:y(o),"error-message":ne,class:"w-full text-base","onUpdate:modelValue":N[3]||(N[3]=ze=>U(ze,"branchCode"))}),null,16,["value","options","error-message"])]),_:1})])])]),m("div",vS,[yS,x(y(J),{name:"noChangeFillInOption"},{default:T(()=>[x(y(Gt),{modelValue:y(n).noChangeFillIn,"onUpdate:modelValue":N[4]||(N[4]=E=>y(n).noChangeFillIn=E)},{default:T(()=>[x(y(Oe),{value:!1,class:"w-fit"},{default:T(({checked:E})=>[m("div",bS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),xS])]),_:1}),x(y(Oe),{value:!0,class:"w-fit"},{default:T(({checked:E})=>[m("div",SS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),CS])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),m("div",ES,[AS,OS,x(y(J),{name:"mailOption"},{default:T(()=>[x(y(Gt),{modelValue:y(n).mailOption,"onUpdate:modelValue":N[5]||(N[5]=E=>y(n).mailOption=E)},{default:T(()=>[x(y(Oe),{value:"hr",class:"w-fit"},{default:T(({checked:E})=>[m("div",TS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),MS])]),_:1}),x(y(Oe),{value:"admin",class:"w-fit"},{default:T(({checked:E})=>[m("div",wS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),kS])]),_:1}),x(y(Oe),{value:"other",class:"w-fit"},{default:T(({checked:E})=>[m("div",DS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),IS])]),_:1})]),_:1},8,["modelValue"])]),_:1}),y(n).mailOption==="other"?(te(),fe("div",NS,[x(y(J),{name:"mailOther"},{default:T(({field:E,value:Y,errorMessage:ne})=>[x(le,_(E,{placeholder:"請填寫其他約定窗口","model-value":y(n).mailOther=Y,"error-message":ne}),null,16,["model-value","error-message"])]),_:1})])):Se("",!0)]),m("div",PS,[RS,x(lu)]),m("div",$S,[BS,x(Sh)]),m("div",LS,[FS,x(af)])]),_:1},8,["img-src"]),x(Dt,{id:"payment",title:"設定繳費方式","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",VS,[zS,jS,x(y(J),{name:"payment"},{default:T(()=>[x(y(Gt),{modelValue:y(n).payment,"onUpdate:modelValue":N[6]||(N[6]=E=>y(n).payment=E)},{default:T(()=>[x(y(Oe),{value:"salary",class:"w-fit"},{default:T(({checked:E})=>[m("div",US,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),HS])]),_:1}),x(y(Oe),{value:"selfPay",class:"w-fit"},{default:T(({checked:E})=>[m("div",KS,[m("span",{class:de(["radio-circle text-[0px]",{"is-checked":E}])},null,2),WS])]),_:1})]),_:1},8,["modelValue"]),y(n).payment==="selfPay"?(te(),fe("div",GS,[m("div",JS,[x(ue,{id:"creditCard",name:"selfPay","model-value":y(n).selfPay.creditCard,onChange:N[7]||(N[7]=E=>y(n).selfPay.creditCard=!y(n).selfPay.creditCard)},null,8,["model-value"]),YS]),m("div",XS,[x(ue,{id:"atm",name:"selfPay","model-value":y(n).selfPay.atm,onChange:N[8]||(N[8]=E=>y(n).selfPay.atm=!y(n).selfPay.atm)},null,8,["model-value"]),QS])])):Se("",!0)]),_:1})])]),_:1},8,["img-src"]),x(Dt,{id:"upload-time",title:"設定上下架時間","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",ZS,[_S,m("div",qS,[m("div",null,[eC,m("div",tC,[x(y(J),{name:"uploadDate"},{default:T(({field:E,errorMessage:Y})=>[x(Pt,_(E,{placeholder:"選擇日期","error-message":Y,"onUpdate:modelValue":N[9]||(N[9]=ne=>y(t).handleDateSelection(ne,"uploadDate"))}),null,16,["error-message"])]),_:1})])]),m("div",null,[nC,x(y(J),{name:"removedDate"},{default:T(({field:E,errorMessage:Y})=>[x(Pt,_(E,{placeholder:"選擇日期","error-message":Y,"onUpdate:modelValue":N[10]||(N[10]=ne=>y(t).handleDateSelection(ne,"removedDate"))}),null,16,["error-message"])]),_:1})])])])]),_:1},8,["img-src"]),x(Dt,{id:"plan-making",title:"設定計畫別","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",rC,[oC,x(Yb)])]),_:1},8,["img-src"]),x(Dt,{id:"health-info",title:"設定健康告知限制","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",iC,[sC,x(ap)])]),_:1},8,["img-src"]),x(Dt,{id:"rules",title:"投保規則","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",lC,[x(Ne,{size:"m",style:{width:"140px"},onClick:N[11]||(N[11]=E=>{f.value=!0,u.value++})},{default:T(()=>[we(" 匯入整頁模板 ")]),_:1}),x(Ne,{size:"m",style:{width:"140px"},onClick:N[12]||(N[12]=E=>h.value=!0)},{default:T(()=>[we(" ＋ 新增規則 ")]),_:1})]),y(n).selectedRules.length!==0?(te(),fe("div",aC,[x(y(rs),{modelValue:y(n).selectedRules,"onUpdate:modelValue":N[13]||(N[13]=E=>y(n).selectedRules=E),group:"selectedRules","drag-class":"drag","ghost-class":"ghost","item-key":"id",tag:"ul"},{item:T(({element:E})=>[m("li",null,[m("div",{class:de(["group rule-container",{"bg-[#F8FBFD]":E.expand}])},[m("div",dC,[m("div",cC,[uC,m("div",{class:"flex items-center cursor-pointer w-[80%]",onClick:Y=>D(E.id,"rule")},[m("img",{src:Ei,alt:"icon-arrow",class:de(["mr-2",{"arrow-down":E.expand}])},null,2),m("div",null,[m("p",hC,qe(E.name),1),m("p",pC," 順序 "+qe(O(E.id,"rule")+1),1)])],8,fC)]),m("div",mC,[x(Ne,{outline:!0,class:"mb-2",onClick:Y=>k(E.id,"rule")},{default:T(()=>[we(" 編輯 ")]),_:2},1032,["onClick"]),x(Ne,{onClick:Y=>z(E.id,"rule")},{default:T(()=>[we(" 刪除 ")]),_:2},1032,["onClick"])])]),Eo(m("div",gC,null,512),[[Ao,E.expand],[ie,E.content]])],2)])]),_:1},8,["modelValue"])])):Se("",!0)]),_:1},8,["img-src"]),x(Dt,{id:"note",title:"備註","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",vC,[yC,m("div",bC,[x(As,{modelValue:y(n).note,"onUpdate:modelValue":N[14]||(N[14]=E=>y(n).note=E)},null,8,["modelValue"])])])]),_:1},8,["img-src"]),x(Dt,{id:"Q-A",title:"Q＆A","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",xC,[x(Ne,{size:"m",style:{width:"140px"},onClick:N[15]||(N[15]=E=>Ee("qa"))},{default:T(()=>[we(" 匯入整頁模板 ")]),_:1}),x(Ne,{size:"m",style:{width:"140px"}},{default:T(()=>[we(" ＋ 新增QA ")]),_:1})]),we(" 等Sam做form模板 "),y(n).selectedQA.length!==0?(te(),fe("div",SC,[x(y(rs),{modelValue:y(n).selectedQA,"onUpdate:modelValue":N[16]||(N[16]=E=>y(n).selectedQA=E),group:"selectedQA","drag-class":"drag","ghost-class":"ghost","item-key":"id",tag:"ul"},{item:T(({element:E})=>[m("li",null,[m("div",{class:de(["group rule-container",{"bg-[#F8FBFD]":E.expand}])},[m("div",CC,[m("div",EC,[AC,m("div",{class:"flex items-center cursor-pointer w-[80%]",onClick:Y=>D(E.id,"qa")},[m("img",{src:Ei,alt:"icon-arrow",class:de(["mr-2",{"arrow-down":E.expand}])},null,2),m("div",null,[m("p",TC,qe(E.name),1),m("p",MC," 順序 "+qe(O(E.id,"qa")+1),1)])],8,OC)]),m("div",wC,[x(Ne,{outline:!0,class:"mb-2",onClick:Y=>k(E.id,"qa")},{default:T(()=>[we(" 編輯 ")]),_:2},1032,["onClick"]),x(Ne,{onClick:Y=>z(E.id,"qa")},{default:T(()=>[we(" 刪除 ")]),_:2},1032,["onClick"])])]),Eo(m("div",kC,null,512),[[Ao,E.expand],[ie,E.content]])],2)])]),_:1},8,["modelValue"])])):Se("",!0)]),_:1},8,["img-src"]),x(Dt,{id:"banner",title:"Banner","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",DC,[x(Ne,{size:"m",style:{width:"140px"}},{default:T(()=>[we(" 匯入整頁模板 ")]),_:1}),x(Ne,{size:"m",style:{width:"140px"}},{default:T(()=>[we(" ＋ 新增Banner ")]),_:1})]),we(" 等Sam做form模板 ")]),_:1},8,["img-src"]),x(Dt,{id:"A-D",title:"廣告","img-src":"../images/icons/icon_note.png"},{default:T(()=>[m("div",IC,[x(Ne,{size:"m",style:{width:"140px"},onClick:N[17]||(N[17]=E=>Ee("ad"))},{default:T(()=>[we(" 匯入整頁模板 ")]),_:1}),x(Ne,{size:"m",style:{width:"140px"},onClick:N[18]||(N[18]=E=>g.value=!0)},{default:T(()=>[we(" ＋ 新增廣告 ")]),_:1})]),y(n).selectedAd.length!==0?(te(),fe("div",NC,[x(y(rs),{modelValue:y(n).selectedAd,"onUpdate:modelValue":N[19]||(N[19]=E=>y(n).selectedAd=E),group:"selectedAd","drag-class":"drag","ghost-class":"ghost","item-key":"id",tag:"ul"},{item:T(({element:E})=>[m("li",null,[m("div",{class:de(["group rule-container",{"bg-[#F8FBFD]":E.expand}])},[m("div",PC,[m("div",RC,[$C,m("div",{class:"flex items-center cursor-pointer w-[80%]",onClick:Y=>D(E.id,"ad")},[m("img",{src:Ei,alt:"icon-arrow",class:de(["mr-2",{"arrow-down":E.expand}])},null,2),m("div",null,[m("p",LC,qe(E.name),1),m("p",FC," 順序 "+qe(O(E.id,"ad")+1),1)])],8,BC)]),m("div",VC,[x(Ne,{outline:!0,class:"mb-2",onClick:Y=>k(E.id,"ad")},{default:T(()=>[we(" 編輯 ")]),_:2},1032,["onClick"]),x(Ne,{onClick:Y=>z(E.id,"ad")},{default:T(()=>[we(" 刪除 ")]),_:2},1032,["onClick"])])]),Eo(m("div",zC,[m("div",jC,[m("img",{src:E!=null&&E.newAdd||E!=null&&E.bigPicChange?Ie(E.bigPic):E.bigPic,alt:"pic",class:"w-full h-full object-cover -z-10"},null,8,UC),m("div",HC,[m("img",{src:E!=null&&E.newAdd||E!=null&&E.smallPicChange?Ie(E.smallPic):E.smallPic,alt:"pic",class:"w-[60px] m-[25px]"},null,8,KC),m("div",WC,[m("p",GC,qe(E.textSmall),1),m("p",null,qe(E.textBig),1)])])])],512),[[Ao,E.expand]])],2)])]),_:1},8,["modelValue"])])):Se("",!0)]),_:1},8,["img-src"]),m("div",JC,[x(Ne,{size:"custom",width:250,height:48,outline:!0,class:"mr-4"},{default:T(()=>[we(" 儲存草稿 ")]),_:1}),x(Ne,{size:"custom",type:"submit",width:250,height:48},{default:T(()=>[we(" 完成填寫 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"]),c.value?(te(),Kt(Dc,{key:0,"button-size":"l",onConfirm:N[21]||(N[21]=E=>$e("5MBAlert"))},{header:T(()=>[YC]),body:T(()=>[XC]),_:1})):Se("",!0),f.value?(te(),Kt(mp,{key:1,count:u.value,onClose:N[22]||(N[22]=E=>$e("chooseRules"))},null,8,["count"])):Se("",!0),h.value?(te(),Kt(ga,{key:2,"rule-type":"add",onClose:N[23]||(N[23]=E=>$e("addRules")),onAddOrEditRule:V})):Se("",!0),p.value?(te(),Kt(ga,{key:3,"rule-type":"edit","edit-id":S.value,onClose:N[24]||(N[24]=E=>$e("editRules")),onAddOrEditRule:N[25]||(N[25]=E=>B(E,"rule"))},null,8,["edit-id"])):Se("",!0),g.value?(te(),Kt(va,{key:4,"ad-type":"add",onClose:N[26]||(N[26]=E=>$e("addAd")),onAddOrEditAd:P})):Se("",!0),v.value?(te(),Kt(va,{key:5,"ad-type":"edit","edit-id":S.value,onClose:N[27]||(N[27]=E=>$e("editAd")),onAddOrEditAd:N[28]||(N[28]=E=>R(E,"ad"))},null,8,["edit-id"])):Se("",!0)])])])}}});const cE=io(QC,[["__scopeId","data-v-5cffde92"]]);export{cE as default};
