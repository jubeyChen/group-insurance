import{a3 as de,r as c,y as H,d as ie,J as R,W as ne,g as oe,o as P,p as ue,b as n,w as o,T as re,a9 as ce,a as t,u as h,a2 as me,l as k,m as _,L as N,n as L,i as w,a4 as C,h as A,t as E,c as O,k as q,s as pe,x as ge,_ as ve}from"./index-039f4073.js";import{_ as W}from"./icon_upload-consent-letter-8322da82.js";import{_ as be}from"./FormTitle.vue_vue_type_script_setup_true_lang-31e68bf9.js";import{_ as J}from"./InputDate.vue_vue_type_style_index_0_lang-1e3be0af.js";import{I as u,u as he}from"./createPageStore-69190bd9.js";import{h as U}from"./moment-fbc5633a.js";const Ie=de("ad",()=>{const v=c("revie"),b=c({searchStartTime:"",searchEndTime:""}),I=c([{adId:"",adName:"",adHyperlink:"",status:"",publishStartAt:"",publishEndAt:"",sloganBiggerSize:"",sloganSmallerSize:"",adImage:"",adIcon:"",isDefault:!0}]),z=c([{adId:"1101712995994",adName:"廣告名稱A",adHyperlink:"url.example1.com",status:u.Published,publishStartAt:"2023/08/17",publishEndAt:"2023/09/17",sloganBiggerSize:"大圖廣告文字A",sloganSmallerSize:"小圖廣告文字A",adImage:"廣告大圖A",adIcon:"廣告小圖A",isDefault:!0},{adId:"1601512995985",adName:"廣告名稱B",adHyperlink:"url.example2.com",status:u.InReview,publishStartAt:"2023/08/21",publishEndAt:"2023/08/28",sloganBiggerSize:"大圖廣告文字B",sloganSmallerSize:"小圖廣告文字B",adImage:"廣告大圖B",adIcon:"廣告小圖B",isDefault:!0},{adId:"8701632992981",adName:"廣告名稱C",adHyperlink:"url.example3.com",status:u.InReview,publishStartAt:"2023/08/20",publishEndAt:"2023/09/07",sloganBiggerSize:"大圖廣告文字C",sloganSmallerSize:"小圖廣告文字C",adImage:"廣告大圖C",adIcon:"廣告小圖C",isDefault:!0},{adId:"3751412295581",adName:"廣告名稱D",adHyperlink:"url.example4.com",status:u.Awaiting,publishStartAt:"2023/11/29",publishEndAt:"2023/12/30",sloganBiggerSize:"大圖廣告文字D",sloganSmallerSize:"小圖廣告文字D",adImage:"廣告大圖D",adIcon:"廣告小圖D",isDefault:!0},{adId:"55014125499184",adName:"廣告名稱E",adHyperlink:"url.example5.com",status:u.Suspended,publishStartAt:"2023/09/20",publishEndAt:"2023/10/10",sloganBiggerSize:"大圖廣告文字E",sloganSmallerSize:"小圖廣告文字E",adImage:"廣告大圖E",adIcon:"廣告小圖E",isDefault:!0},{adId:"9721612885993",adName:"廣告名稱F",adHyperlink:"url.example6.com",status:u.InReview,publishStartAt:"2023/11/11",publishEndAt:"2023/12/11",sloganBiggerSize:"大圖廣告文字F",sloganSmallerSize:"小圖廣告文字F",adImage:"廣告大圖F",adIcon:"廣告小圖F",isDefault:!0},{adId:"3301222995580",adName:"廣告名稱G",adHyperlink:"url.example7.com",status:u.Failure,publishStartAt:"2023/10/10",publishEndAt:"2023/11/11",sloganBiggerSize:"大圖廣告文字G",sloganSmallerSize:"小圖廣告文字G",adImage:"廣告大圖G",adIcon:"廣告小圖G",isDefault:!0},{adId:"1221712995001",adName:"廣告名稱H",adHyperlink:"url.example8.com",status:u.Published,publishStartAt:"2023/08/18",publishEndAt:"2023/09/18",sloganBiggerSize:"大圖廣告文字H",sloganSmallerSize:"小圖廣告文字H",adImage:"廣告大圖H",adIcon:"廣告小圖H",isDefault:!0},{adId:"1331712995335",adName:"廣告名稱I",adHyperlink:"url.example9.com",status:u.Published,publishStartAt:"2023/08/19",publishEndAt:"2023/09/19",sloganBiggerSize:"大圖廣告文字I",sloganSmallerSize:"小圖廣告文字I",adImage:"廣告大圖I",adIcon:"廣告小圖I",isDefault:!0}]),B=H(()=>z.value.filter(D=>D.status===u.Published)),F=c({published:{isChecked:!1,value:"發佈中"},pending:{isChecked:!1,value:"等待發佈"},discontinued:{isChecked:!1,value:"下架"},reviewing:{isChecked:!1,value:"審核中"},reviewFailed:{isChecked:!1,value:"審核失敗"}});return{permissionStatus:v,adManagementInfo:z,sortOrderAdData:B,checkBoxState:F,filterAdData:I,filterSelectDate:b}}),r=v=>(pe("data-v-fefe5d80"),v=v(),ge(),v),fe={class:"modal-mask QA-form"},Se={class:"content"},ke={class:"form-content"},_e={class:"w-[80%] py-4 gap-6 mx-auto grid grid-cols-1"},Ae=r(()=>t("h2",{class:"label-h2"}," 發佈時間 ",-1)),ye={class:"flex items-center"},xe=r(()=>t("span",{class:"mx-2"},"-",-1)),Ee=r(()=>t("h2",{class:"label-h2"}," 廣告名稱 ",-1)),ze=r(()=>t("h2",{class:"label-h2"}," 廣告小字 ",-1)),Be=r(()=>t("h2",{class:"label-h2"}," 廣告大字 ",-1)),De=r(()=>t("h2",{class:"label-h2"}," 超連結 ",-1)),Ne={class:"grid grid-cols-2 gap-8"},we=r(()=>t("h2",{class:"label-h2"},[A(" 大圖片上傳"),t("span",{class:"ml-2 text-xs text-neutral-700"},"檔案大小不得超過5MB")],-1)),Ce=r(()=>t("img",{src:W,alt:"icon-upload",class:"mb-2"},null,-1)),He=r(()=>t("p",{class:"text-sm text-black/50 mb-4"}," 限上傳PNG檔或JPG檔 ",-1)),Fe={class:"min-h-[24px]"},$e={key:0,class:"flex items-center"},Pe={class:"inline-block w-[110px] truncate"},Te=r(()=>t("h2",{class:"label-h2"},[A(" 小圖片上傳"),t("span",{class:"ml-2 text-xs text-neutral-700"},"檔案大小不得超過5MB")],-1)),Me=r(()=>t("img",{src:W,alt:"icon-upload",class:"mb-2"},null,-1)),Ge=r(()=>t("p",{class:"text-sm text-black/50 mb-4"}," 限上傳PNG檔或JPG檔 ",-1)),Ve={class:"min-h-[24px]"},Ye={key:0,class:"flex items-center"},je={class:"inline-block w-[110px] truncate"},Qe={class:"flex items-center justify-center py-6"},Re=ie({__name:"AddEidtADForm",props:{adType:{type:String,default:"add"},editId:{type:String,default:""}},emits:["close","addOrEditAd","oversize"],setup(v,{emit:b}){const I=v,z=he(),{createInfo:B}=R(z),F=Ie(),{adManagementInfo:D}=R(F),T=H(()=>I.editId),p=c(""),g=c(""),m=c(!1),a=c({publishStartAt:"",publishEndAt:"",adName:"",sloganSmallerSize:"",sloganBiggerSize:"",adHyperlink:"",adImage:void 0,adIcon:void 0,isDefault:!1}),K=H(()=>{switch(I.adType){case"add":case"backAdd":return"新增廣告";case"edit":case"backEdit":return"編輯廣告";case"query":case"backQuery":default:return"廣告內容"}}),X=H(()=>{switch(I.adType){case"add":case"edit":case"query":case"backQuery":default:return"確認";case"backAdd":case"backEdit":return"送審"}}),f=c(),y=c(),Z=ne({});oe(()=>{switch(I.adType){case"edit":M();break;case"query":M(),m.value=!0;break;case"backEdit":G();break;case"backQuery":G(),m.value=!0;break}});function M(){const d=B.value.selectedAd.findIndex(l=>l.adId===T.value),e=B.value.selectedAd[d];a.value.publishStartAt=e.publishStartAt,a.value.publishEndAt=e.publishEndAt,a.value.adName=e.adName,a.value.sloganBiggerSize=e.sloganBiggerSize,a.value.sloganSmallerSize=e.sloganSmallerSize,a.value.adHyperlink=e.adHyperlink,a.value.adImage=e.adImage,a.value.adIcon=e.adIcon,p.value=e==null?void 0:e.imageName,g.value=e==null?void 0:e.iconName,f.value=e.adImage,y.value=e.adIcon}function G(){const d=D.value.findIndex(l=>l.adId===T.value),e=D.value[d];a.value.adId=e.adId,a.value.adName=e.adName,a.value.adHyperlink=e.adHyperlink,a.value.status=e.status,a.value.publishStartAt=e.publishStartAt,a.value.publishEndAt=e.publishEndAt,a.value.sloganBiggerSize=e.sloganBiggerSize,a.value.sloganSmallerSize=e.sloganSmallerSize,a.value.adImage=e.adImage,a.value.adIcon=e.adIcon,a.value.isDefault=e.isDefault,p.value=e.adImage,g.value=e.adIcon}function ee(){return I.adType==="edit"||(a.value.publishStartAt=U().format("YYYY/MM/DD")),a.value.publishStartAt}function V(d,e){const l=document.getElementById(d),i=document.getElementById(`upload-input${d}`);i==null||i.remove();const s=document.createElement("input");l==null||l.appendChild(s),s.id=`upload-input${d}`,s.style.display="none",s.type="file",s.accept="image/png,image/jpeg",s.addEventListener("change",x=>{ae(x,e,d)}),s.addEventListener("click",x=>{x.stopPropagation()}),s.click()}function Y(d,e){const l=document.getElementById(`upload-input${d}`);switch(l==null||l.remove(),e){case"big":p.value="";break;case"small":g.value="";break}}function ae(d,e,l){const i=d.target.files[0],s=document.getElementById(`upload-input${l}`);if(i.size<=5*1024*1024)switch(e){case"big":a.value.adImage=i,p.value=i.name;break;case"small":a.value.adIcon=i,g.value=i.name;break}else b("oversize",!0);s==null||s.remove()}function j(d,e){a.value[e]=U(d).format("YYYY/MM/DD")}function Q(d){const e=document.getElementById(d);e&&(e!=null&&e.disabled)||(e.click(),e.disabled=!0)}function le(d,e){const l={publishStartAt:d.publishStartAt,publishEndAt:d.publishEndAt,adName:d.adName,sloganSmallerSize:d.sloganSmallerSize,sloganBiggerSize:d.sloganBiggerSize,adHyperlink:d.adHyperlink},i={adImage:a.value.adImage,adImageChange:!0},s={adIcon:a.value.adIcon,adIconChange:!0};switch(e){case"add":const x={...l,adId:Date.now().toString(),adImage:a.value.adImage,adIcon:a.value.adIcon,expand:!1,newAdd:!0,isDefault:!1};b("addOrEditAd",x);break;case"backAdd":console.log("新增成功!");const te={...l,adId:Date.now().toString(),adImage:a.value.adImage,adIcon:a.value.adIcon,isDefault:!0,status:u.InReview};b("addOrEditAd",te,"backAdd");break;case"edit":let S;switch(!0){case(f.value===a.value.adImage&&y.value===a.value.adIcon):S={...l};break;case(f.value!==a.value.adImage&&y.value===a.value.adIcon):console.log(f.value),console.log(a.value.adImage),S={...l,...i},console.log(S);break;case(f.value===a.value.adImage&&y.value!==a.value.adIcon):S={...l,...s};break;case(f.value!==a.value.adImage&&y.value!==a.value.adIcon):S={...l,...i,...s};break}b("addOrEditAd",S);break;case"backEdit":const se={...l,adId:a.value.adId,status:u.InReview,adImage:a.value.adImage,adIcon:a.value.adIcon,isDefault:!0};b("addOrEditAd",se,"backEdit");break}$()}function $(){b("close")}return(d,e)=>(P(),ue(ce,{to:"body"},[n(re,{name:"modal"},{default:o(()=>[t("div",fe,[t("div",Se,[n(be,{title:K.value,onClose:$},null,8,["title"]),t("div",ke,[n(h(me),{"validation-schema":h(Z),"initial-values":a.value,onSubmit:e[8]||(e[8]=l=>le(l,v.adType))},{default:o(()=>[t("div",_e,[t("div",null,[Ae,t("div",ye,[n(h(k),{name:"publishStartAt"},{default:o(({field:l,errorMessage:i})=>[n(J,_(l,{value:ee(),placeholder:"請選擇日期",disabled:m.value,"error-message":i,"onUpdate:modelValue":e[0]||(e[0]=s=>j(s,"publishStartAt"))}),null,16,["value","disabled","error-message"])]),_:1}),xe,n(h(k),{name:"publishEndAt"},{default:o(({field:l,errorMessage:i})=>[n(J,_(l,{value:a.value.publishEndAt,placeholder:"請選擇日期",disabled:m.value,"error-message":i,"onUpdate:modelValue":e[1]||(e[1]=s=>j(s,"publishEndAt"))}),null,16,["value","disabled","error-message"])]),_:1})])]),t("div",null,[Ee,n(h(k),{name:"adName"},{default:o(({field:l,value:i,errorMessage:s})=>[n(N,_(l,{placeholder:"請輸入規則名稱",disabled:m.value,"model-value":a.value.adName=i,"error-message":s}),null,16,["disabled","model-value","error-message"])]),_:1})]),t("div",null,[ze,n(h(k),{name:"sloganSmallerSize"},{default:o(({field:l,value:i,errorMessage:s})=>[n(N,_(l,{placeholder:"請輸入廣告小字",disabled:m.value,"model-value":a.value.sloganSmallerSize=i,"error-message":s}),null,16,["disabled","model-value","error-message"])]),_:1})]),t("div",null,[Be,n(h(k),{name:"sloganBiggerSize"},{default:o(({field:l,value:i,errorMessage:s})=>[n(N,_(l,{placeholder:"請輸入廣告大字",disabled:m.value,"model-value":a.value.sloganBiggerSize=i,"error-message":s}),null,16,["disabled","model-value","error-message"])]),_:1})]),t("div",null,[De,n(h(k),{name:"adHyperlink"},{default:o(({field:l,value:i,errorMessage:s})=>[n(N,_(l,{placeholder:"請輸入超連結網址",disabled:m.value,"model-value":a.value.adHyperlink=i,"error-message":s}),null,16,["disabled","model-value","error-message"])]),_:1})]),t("div",Ne,[t("div",null,[we,t("div",{id:"upload-big",class:L(["flex flex-col justify-center items-center border border-dashed border-black/30 rounded-md p-10 pb-6 min-h-[263px]",{"cursor-pointer":p.value===""}]),onClick:e[4]||(e[4]=l=>Q("uploadBigBtn"))},[Ce,He,n(w,{id:"uploadBigBtn",size:"m",disabled:p.value!==""||m.value,class:"mb-4",onClick:e[2]||(e[2]=C(l=>V("upload-big","big"),["stop"]))},{default:o(()=>[A(E(p.value!==""?"已上傳":"上傳檔案"),1)]),_:1},8,["disabled"]),t("div",Fe,[p.value!==""?(P(),O("div",$e,[t("span",Pe,E(p.value),1),t("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:e[3]||(e[3]=C(l=>Y("upload-big","big"),["stop"]))},"✕")])):q("",!0)])],2)]),t("div",null,[Te,t("div",{id:"upload-small",class:L(["w-full flex flex-col justify-center items-center border border-dashed border-black/30 rounded-md p-10 pb-6 min-h-[263px]",{"cursor-pointer":g.value===""}]),onClick:e[7]||(e[7]=l=>Q("uploadSmallBtn"))},[Me,Ge,n(w,{id:"uploadSmallBtn",size:"m",disabled:g.value!==""||m.value,class:"mb-4",onClick:e[5]||(e[5]=C(l=>V("upload-small","small"),["stop"]))},{default:o(()=>[A(E(g.value!==""?"已上傳":"上傳檔案"),1)]),_:1},8,["disabled"]),t("div",Ve,[g.value!==""?(P(),O("div",Ye,[t("span",je,E(g.value),1),t("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:e[6]||(e[6]=C(l=>Y("upload-small","small"),["stop"]))},"✕")])):q("",!0)])],2)])])]),t("div",Qe,[n(w,{size:"custom",width:250,height:48,outline:!0,class:"mr-4",onClick:$},{default:o(()=>[A(" 取消 ")]),_:1}),n(w,{size:"custom",type:"submit",width:250,height:48},{default:o(()=>[A(E(X.value),1)]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])])]),_:1})]))}});const Ke=ve(Re,[["__scopeId","data-v-fefe5d80"]]);export{Ke as A,Ie as u};
