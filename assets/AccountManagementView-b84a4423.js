import{_ as te}from"./icon_outcome-1d2e6907.js";import{_ as ae,a as le}from"./icon_delete-7a56ee05.js";import{d as F,I as oe,y as U,r as y,g as se,C as ne,D as j,F as J,o as T,p as z,w as c,a as e,n as I,u as a,a3 as ie,J as X,W as de,X as re,c as B,b as o,c0 as D,l as E,L as O,m as H,i as L,h as $,a2 as ce,s as Y,x as Q,_ as Z,a5 as K,k as ue,j as me,t as N}from"./index-039f4073.js";import{_ as _e}from"./FormTitle.vue_vue_type_script_setup_true_lang-31e68bf9.js";import{b as pe,N as ve}from"./Select-d1c71278.js";import{t as ge,d as he,o as fe,f as be,K as Se,a as Me,H as Ce,T as we,b as W,p as Ee}from"./use-controllable-5d703104.js";import{k as ye,E as q}from"./radio-group-523e1ed4.js";import{N as $e}from"./Breadcrumbs-d8dff005.js";import{T as xe}from"./Table-40d47b03.js";import"./icon_note-96b9c260.js";/* empty css                                                               */let ke=Symbol("GroupContext"),Te=F({name:"Switch",emits:{"update:modelValue":d=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${ge()}`}},inheritAttrs:!1,setup(d,{emit:r,attrs:s,slots:l,expose:C}){let v=oe(ke,null),[S,f]=he(U(()=>d.modelValue),t=>r("update:modelValue",t),U(()=>d.defaultChecked));function w(){f(!S.value)}let x=y(null),M=v===null?x:v.switchRef,g=pe(U(()=>({as:d.as,type:s.type})),M);C({el:M,$el:M});function _(t){t.preventDefault(),w()}function n(t){t.key===W.Space?(t.preventDefault(),w()):t.key===W.Enter&&Ee(t.currentTarget)}function p(t){t.preventDefault()}let m=U(()=>{var t,i;return(i=(t=fe(M))==null?void 0:t.closest)==null?void 0:i.call(t,"form")});return se(()=>{ne([m],()=>{if(!m.value||d.defaultChecked===void 0)return;function t(){f(d.defaultChecked)}return m.value.addEventListener("reset",t),()=>{var i;(i=m.value)==null||i.removeEventListener("reset",t)}},{immediate:!0})}),()=>{let{id:t,name:i,value:u,form:V,...A}=d,G={checked:S.value},R={id:t,ref:M,role:"switch",type:g.value,tabIndex:0,"aria-checked":S.value,"aria-labelledby":v==null?void 0:v.labelledby.value,"aria-describedby":v==null?void 0:v.describedby.value,onClick:_,onKeyup:n,onKeypress:p};return j(J,[i!=null&&S.value!=null?j(be,Se({features:Me.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:S.value,form:V,name:i,value:u})):null,Ce({ourProps:R,theirProps:{...s,...we(A,["modelValue","defaultChecked"])},slot:G,attrs:s,slots:l,name:"Switch"})])}}});const Ve=F({__name:"Toggle",props:{value:{type:null}},setup(d){return(r,s)=>(T(),z(a(Te),{"model-value":d.value,as:"template","onUpdate:modelValue":s[0]||(s[0]=l=>r.$emit("update:modelValue",l))},{default:c(({checked:l})=>[e("button",{class:I([l?"bg-primary-500 on":"bg-gray-200 off","relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-1 focus:ring-primary-500 focus:ring-offset-2"])},[e("span",{"aria-hidden":"true",class:I([l?"translate-x-7":"translate-x-0","pointer-events-none inline-block h-5 w-5 self-center transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "])},null,2)],2)]),_:1},8,["model-value"]))}});const ee=ie("accountManagement",()=>{const d=y(""),r=y({role_id:"",personnelCode:"",department:"",name:"",role:{label:"",value:0},status:!1,sectionManagerEmail:"",departmentManagerEmail:""}),s=y([{role_id:"20230116170505",personnelCode:"W901111",department:"Other",name:"玉南山",role:{label:"內勤人員",value:1},status:!0,sectionManagerEmail:"NSLSM@mail.com",departmentManagerEmail:"NSLDM@mail.com"},{role_id:"20230717190707",personnelCode:"W902222",department:"AGTeam",name:"玉北山",role:{label:"外勤人員",value:2},status:!1,sectionManagerEmail:"NSLSM2@mail.com",departmentManagerEmail:"NSLDM2@mail.com"},{role_id:"20231010221010",personnelCode:"W904444",department:"AGTeam",name:"玉東山",role:{label:"經理",value:4},status:!1,sectionManagerEmail:"NSLSM4@mail.com",departmentManagerEmail:"NSLDM4@mail.com"},{role_id:"20231111231111",personnelCode:"W906666",department:"DBTeam",name:"玉西山",role:{label:"處長",value:6},status:!0,sectionManagerEmail:"NSLSM6@mail.com",departmentManagerEmail:"NSLDM6@mail.com"}]),l=y([{label:"內勤人員",value:1},{label:"外勤人員",value:2},{label:"專員",value:3},{label:"經理",value:4},{label:"科主管",value:5},{label:"處主管",value:6}]);function C(){r.value.personnelCode="",r.value.department="",r.value.name="",r.value.role={label:"內勤人員",value:0},r.value.status=!1,r.value.sectionManagerEmail="",r.value.departmentManagerEmail=""}return{initValues:r,accountInfo:s,options:l,modeState:d,$reset:C}}),b=d=>(Y("data-v-d7645ba6"),d=d(),Q(),d),Ae={class:"modal-mask"},Ne={class:"content"},De={class:"pb-6 flex justify-center align-middle"},Ie={class:"show-modal"},Le={class:"show-modal-row"},Ue={class:"show-modal-input"},Oe=b(()=>e("label",{for:"personnelCode"},"員工編號",-1)),Be={class:"show-modal-input"},Fe=b(()=>e("label",{for:"department"},"部門",-1)),Ge={class:"flex items-center mb-4"},Re=b(()=>e("span",{class:"radio-text"},"DB TEAM",-1)),qe={class:"flex items-center"},Pe=b(()=>e("span",{class:"radio-text"},"AG TEAM",-1)),je={class:"flex items-center"},He=b(()=>e("span",{class:"radio-text"},"Other",-1)),Ke={class:"show-modal-row"},We={class:"show-modal-input"},Je=b(()=>e("label",{for:"name"},"姓名",-1)),ze={class:"show-modal-input"},Xe=b(()=>e("label",{for:"role"},"角色",-1)),Ye={class:"show-modal-row"},Qe={class:"show-modal-input"},Ze=b(()=>e("label",{for:"sectionManagerEmail"},"科主管Email",-1)),et={class:"show-modal-input"},tt=b(()=>e("label",{for:"departmentManagerEmail"},"處主管Email",-1)),at={class:"show-modal-row"},lt={class:"show-modal-input"},ot=b(()=>e("label",{for:"status"},"帳號狀態",-1)),st={class:"show-modal-button"},nt=F({__name:"AccountManagementForms",emits:["close","onSubmit","update:toggle-change","update:select-change"],setup(d,{emit:r}){const s=ee(),{initValues:l,accountInfo:C,options:v,modeState:S}=X(s);function f(g){console.log("update:ToggleChange："+g),r("update:toggle-change",g)}function w(g){console.log("update:SelectChange："+g),r("update:select-change",g)}function x(){r("close")}function M(){r("onSubmit")}return de({account:re().required("請輸入角色名稱").test("addNewPermissions","必須輸入內容",g=>/^.*/.test(g))}),(g,_)=>(T(),B("div",Ae,[e("div",Ne,[o(_e,{title:a(S)===a(D).CREATE?"新增帳號":"編輯帳號",onClose:x},null,8,["title"]),e("div",De,[e("div",Ie,[o(a(ce),{"initial-values":a(l),onSubmit:M},{default:c(()=>[e("div",Le,[e("div",Ue,[Oe,o(a(E),{id:"personnelCode",name:"personnelCode"},{default:c(({field:n,errorMessage:p})=>[o(O,{modelValue:a(l).personnelCode,"onUpdate:modelValue":_[0]||(_[0]=m=>a(l).personnelCode=m),"v-bind":n,class:"modal-input",placeholder:"請輸入人員代碼","error-message":p},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",Be,[Fe,o(a(E),{id:"department",name:"department"},{default:c(()=>[o(a(ye),{modelValue:a(l).department,"onUpdate:modelValue":_[1]||(_[1]=n=>a(l).department=n),class:"flex gap-5 pt-3 h-0"},{default:c(()=>[o(a(q),{value:"DBTeam",class:"w-fit"},{default:c(({checked:n})=>[e("div",Ge,[e("span",{class:I(["radio-circle text-[0px]",{"is-checked":n}])},null,2),Re])]),_:1}),o(a(q),{value:"AGTeam",class:"w-fit"},{default:c(({checked:n})=>[e("div",qe,[e("span",{class:I(["radio-circle text-[0px]",{"is-checked":n}])},null,2),Pe])]),_:1}),o(a(q),{value:"Other",class:"w-fit"},{default:c(({checked:n})=>[e("div",je,[e("span",{class:I(["radio-circle text-[0px]",{"is-checked":n}])},null,2),He])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),e("div",Ke,[e("div",We,[Je,o(a(E),{id:"name",name:"name"},{default:c(({field:n,errorMessage:p})=>[o(O,{modelValue:a(l).name,"onUpdate:modelValue":_[2]||(_[2]=m=>a(l).name=m),"v-bind":n,class:"modal-input",placeholder:"請輸入姓名","error-message":p},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",ze,[Xe,o(a(E),{id:"role",name:"role"},{default:c(({field:n,errorMessage:p})=>[o(ve,H({id:"roleNameSelected"},n,{class:"modal-input",value:a(l).role.value,"model-value":a(l).role.value,placeholder:"請選擇角色",options:a(v),"error-message":p,"onUpdate:modelValue":w}),null,16,["value","model-value","options","error-message"])]),_:1})])]),e("div",Ye,[e("div",Qe,[Ze,o(a(E),{id:"sectionManagerEmail",name:"sectionManagerEmail"},{default:c(({field:n,errorMessage:p})=>[o(O,{modelValue:a(l).sectionManagerEmail,"onUpdate:modelValue":_[3]||(_[3]=m=>a(l).sectionManagerEmail=m),"v-bind":n,class:"modal-input",placeholder:"請輸email","error-message":p},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",et,[tt,o(a(E),{id:"departmentManagerEmail",name:"departmentManagerEmail"},{default:c(({field:n,errorMessage:p})=>[o(O,{modelValue:a(l).departmentManagerEmail,"onUpdate:modelValue":_[4]||(_[4]=m=>a(l).departmentManagerEmail=m),"v-bind":n,class:"modal-input",placeholder:"請輸email","error-message":p},null,8,["modelValue","v-bind","error-message"])]),_:1})])]),e("div",at,[e("div",lt,[ot,o(a(E),{id:"status",name:"status"},{default:c(({value:n,field:p,errorMessage:m})=>[o(Ve,H({class:"modal-radio-button mt-3"},p,{"error-message":m,"model-value":a(l).status=n,"onUpdate:modelValue":f}),null,16,["error-message","model-value"])]),_:1})])]),e("div",st,[o(L,{type:"button",outline:!0,onClick:x},{default:c(()=>[$(" 取消 ")]),_:1}),o(L,{type:"submit"},{default:c(()=>[$(" 確認 ")]),_:1})])]),_:1},8,["initial-values"])])])])]))}});const it=Z(nt,[["__scopeId","data-v-d7645ba6"]]),h=d=>(Y("data-v-411753c5"),d=d(),Q(),d),dt={class:"query-view"},rt={class:"query-container"},ct={class:"breadcrumb-area"},ut={class:"query-area"},mt=h(()=>e("h2",{class:"query-title-text"}," 帳號管理 ",-1)),_t={class:"query-title"},pt=h(()=>e("span",{class:"title-img"},[e("img",{src:te,alt:""}),$(" 帳號列表 ")],-1)),vt=h(()=>e("span",{class:"text-xl mb-[2px]"},"+",-1)),gt=h(()=>e("caption",null,"Account Management Table",-1)),ht=h(()=>e("th",{class:"w-[20%]"}," 序號 ",-1)),ft=h(()=>e("th",{class:"w-[10%]"}," 人員代碼 ",-1)),bt=h(()=>e("th",{class:"w-[10%]"}," 姓名 ",-1)),St=h(()=>e("th",{class:"w-[15%]"}," 角色 ",-1)),Mt=h(()=>e("th",{class:"w-[15%]"}," 帳號狀態 ",-1)),Ct=h(()=>e("th",{class:"grow"}," 操作 ",-1)),wt={class:"w-[20%]","data-title":"序號："},Et={class:"w-[10%]","data-title":"人員代碼："},yt={class:"w-[10%]","data-title":"姓名："},$t={class:"w-[15%]","data-title":"角色："},xt={class:"w-[15%]","data-title":"帳號狀態："},kt={class:"flex account-state w-[60%] justify-start"},Tt=["src"],Vt={"data-title":"操作："},At={class:"action-button grow"},Nt=h(()=>e("img",{src:ae,alt:""},null,-1)),Dt=h(()=>e("img",{src:le,alt:""},null,-1)),It=F({__name:"AccountManagementView",setup(d){const r=ee(),{initValues:s,accountInfo:l,options:C,modeState:v}=X(r),S=[{title:"首頁",path:K.BACKHOME},{title:"帳號管理",path:K.ACCOUNT_MANAGEMENT}],f=y(!1),w=y(0),x=t=>{console.log("ToggleChanged:",t),s.value.status=t},M=t=>{console.log("SelectChanged:",t),s.value.role.value=t;const i=C.value.find(u=>u.value===t);i?s.value.role.label=i.label:console.log("沒有找到對應的選項")};function g(t){const i=l.value.findIndex(u=>u.role_id===t);console.log(i),i!==-1&&l.value.splice(i,1)}function _(){v.value=D.CREATE,r.$reset(),f.value=!0}function n(t){v.value=D.UPDATE,w.value=t;const i=l.value.find(u=>u.role_id===t);if(i){const u=JSON.parse(JSON.stringify(i));s.value=u}else console.log("沒有找到對應的資料");f.value=!0}function p(){r.$reset(),f.value=!1}const m=async()=>{if(v.value===D.CREATE){console.log("新增成功!");const t=s.value.personnelCode,i=s.value.department,u=s.value.name,V=s.value.role,A=s.value.status,G=s.value.sectionManagerEmail,R=s.value.departmentManagerEmail,P={role_id:(()=>{const k=new Date;return`${k.getFullYear()}${String(k.getMonth()+1).padStart(2,"0")}${String(k.getDate()).padStart(2,"0")}${String(k.getHours()).padStart(2,"0")}${String(k.getMinutes()).padStart(2,"0")}${String(k.getSeconds()).padStart(2,"0")}`})(),personnelCode:t,department:i,name:u,role:V,status:A,sectionManagerEmail:G,departmentManagerEmail:R};console.log(P),l.value.push(P),f.value=!1}else if(v.value===D.UPDATE){console.log("編輯成功!");const t=l.value.findIndex(i=>i.role_id===w.value);t!==-1?(l.value[t]=s.value,console.log(l.value[t])):console.log("沒有找到對應的資料"),f.value=!1}};return(t,i)=>(T(),B("div",dt,[e("div",rt,[e("div",ct,[o($e,{breadcrumb:S})]),e("div",ut,[mt,e("div",_t,[pt,o(L,{size:"custom",width:130,height:40,onClick:_},{default:c(()=>[vt,$("新增帳號 ")]),_:1})]),o(xe,null,{th:c(()=>[ht,ft,bt,St,Mt,Ct]),tobodyTr:c(()=>[(T(!0),B(J,null,me(a(l),(u,V)=>(T(),B("tr",{key:V,class:"query-result mt-4"},[e("td",wt,N(u.role_id),1),e("td",Et,N(u.personnelCode),1),e("td",yt,N(u.name),1),e("td",$t,N(u.role.label),1),e("td",xt,[e("div",kt,[e("img",{src:u.status?"images/icons/icon_check.png":"images/icons/icon_alert_grey.png",class:"inline-block",alt:"State Image"},null,8,Tt),$(" "+N(u.status?"啟用":"未啟用"),1)])]),e("td",Vt,[e("div",At,[o(L,{class:"edit-button",onClick:A=>n(u.role_id)},{default:c(()=>[Nt,$(" 編輯 ")]),_:2},1032,["onClick"]),o(L,{class:"delete-button",onClick:A=>g(u.role_id)},{default:c(()=>[Dt,$(" 刪除 ")]),_:2},1032,["onClick"])])])]))),128))]),default:c(()=>[gt]),_:1})]),f.value?(T(),z(it,{key:0,class:"nsl-form","init-values":a(s),options:a(C),onClose:p,onOnSubmit:m,"onUpdate:toggleChange":x,"onUpdate:selectChange":M},null,8,["init-values","options"])):ue("",!0)])]))}});const Wt=Z(It,[["__scopeId","data-v-411753c5"]]);export{Wt as default};
