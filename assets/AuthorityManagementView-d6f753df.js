import{_ as Y,a as z}from"./icon_delete-7a56ee05.js";import{a3 as K,r as C,d as q,J as L,W as X,X as Z,o as t,c as s,a as e,b as v,u,w as M,l as B,L as ee,F as _,j as N,e as F,bP as I,t as p,i as x,h as g,a2 as te,s as O,x as H,_ as J,a5 as Q,p as ae,k as f}from"./index-039f4073.js";import{_ as se}from"./FormTitle.vue_vue_type_script_setup_true_lang-31e68bf9.js";/* empty css                                                               */import{N as le}from"./Breadcrumbs-d8dff005.js";import{T as ne}from"./Table-40d47b03.js";import"./icon_note-96b9c260.js";const ie="/group-insurance/images/icons/icon_consent.png",j=K("authorityManagement",()=>{const b=C("add"),D=C({roleName:""}),w=C([{roleId:"20230116170505",roleName:"主任",permissions:[[{value:"createWebPreview",permissionsName:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",permissionsName:"uploadFiles",label:"上傳文件",selected:!0},{value:"createWebCopyFiles",permissionsName:"createWebCopyFiles",label:"複製案件",selected:!0},{value:"createWebDeletion",permissionsName:"createWebDeletion",label:"刪除",selected:!0},{value:"createWebRegistering",permissionsName:"createWebRegistering",label:"套版",selected:!0},{value:"createWebEdit",permissionsName:"createWebEdit",label:"編輯",selected:!0},{value:"createWebNew",permissionsName:"createWebNew",label:"新增",selected:!0},{value:"createWebReview",permissionsName:"createWebReview",label:"審核",selected:!0},{value:"createWebSecondStageReview",permissionsName:"createWebSecondStageReview",label:"二階段審核",selected:!0},{value:"createWebRemovedContent",permissionsName:"createWebRemovedContent",label:"下架內容",selected:!0}],[{value:"reportQueryViewContent",permissionsName:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",permissionsName:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",permissionsName:"dataMaintenanceDeletion",label:"刪除",selected:!0},{value:"dataMaintenanceEdit",permissionsName:"dataMaintenanceEdit",label:"編輯",selected:!0},{value:"dataMaintenanceRemovedContent",permissionsName:"dataMaintenanceRemovedContent",label:"下架",selected:!0},{value:"dataMaintenanceReview",permissionsName:"dataMaintenanceReview",label:"審核",selected:!0}],[{value:"authorityManagementEdit",permissionsName:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",permissionsName:"authorityManagementDeletion",label:"刪除",selected:!0},{value:"authorityManagementNew",permissionsName:"authorityManagementNew",label:"新增",selected:!0}],[{value:"accountManagementEdit",permissionsName:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",permissionsName:"accountManagementDeletion",label:"刪除",selected:!0},{value:"accountManagementNew",permissionsName:"accountManagementNew",label:"新增",selected:!0}]]},{roleId:"20230230141620",roleName:"合作金庫",permissions:[[{value:"createWebPreview",permissionsName:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",permissionsName:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",permissionsName:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",permissionsName:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",permissionsName:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",permissionsName:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",permissionsName:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",permissionsName:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",permissionsName:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",permissionsName:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",permissionsName:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",permissionsName:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",permissionsName:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",permissionsName:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",permissionsName:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",permissionsName:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",permissionsName:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",permissionsName:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",permissionsName:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",permissionsName:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",permissionsName:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",permissionsName:"accountManagementNew",label:"新增",selected:!1}]]},{roleId:"20230717190707",roleName:"合作金庫",permissions:[[{value:"createWebPreview",permissionsName:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",permissionsName:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",permissionsName:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",permissionsName:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",permissionsName:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",permissionsName:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",permissionsName:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",permissionsName:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",permissionsName:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",permissionsName:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",permissionsName:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",permissionsName:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",permissionsName:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",permissionsName:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",permissionsName:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",permissionsName:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",permissionsName:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",permissionsName:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",permissionsName:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",permissionsName:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",permissionsName:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",permissionsName:"accountManagementNew",label:"新增",selected:!1}]]}]),h=C([{buttonName:"創建網站",index:0},{buttonName:"報表查詢",index:1},{buttonName:"資料維護",index:2},{buttonName:"權限管理",index:3},{buttonName:"帳號管理",index:4}]),R=C([[{value:"createWebPreview",permissionsName:"createWebPreview",label:"預覽",selected:!1},{value:"createWebUploadFiles",permissionsName:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",permissionsName:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",permissionsName:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",permissionsName:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",permissionsName:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",permissionsName:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",permissionsName:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",permissionsName:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",permissionsName:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",permissionsName:"reportQueryViewContent",label:"查看內容",selected:!1}],[{value:"dataMaintenanceViewContent",permissionsName:"dataMaintenanceViewContent",label:"查看內容",selected:!1},{value:"dataMaintenanceDeletion",permissionsName:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",permissionsName:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",permissionsName:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",permissionsName:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",permissionsName:"authorityManagementEdit",label:"編輯",selected:!1},{value:"authorityManagementDeletion",permissionsName:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",permissionsName:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",permissionsName:"accountManagementEdit",label:"編輯",selected:!1},{value:"accountManagementDeletion",permissionsName:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",permissionsName:"accountManagementNew",label:"新增",selected:!1}]]);return{initValues:D,roleInfo:w,navButton:h,checkBoxes:R,modeState:b}}),S=b=>(O("data-v-b4304d8e"),b=b(),H(),b),oe={class:"modal-mask"},ce={class:"content"},re={class:"content-box pb-6 flex justify-center align-middle"},de={class:"show-modal"},me={class:"show-modal-body"},ue={class:"show-modal-input"},pe=S(()=>e("label",{for:"roleNameInput"},"角色名稱",-1)),be={class:"show-modal-table"},ve=S(()=>e("label",{class:"show-modal-label",for:"roleNameInput"}," 管理權限 ",-1)),_e={class:"show-table-container"},Ne={class:"table-container"},he=S(()=>e("div",{class:"container-title"}," 創建網站 ",-1)),fe={class:"check-container"},ge=["id","onUpdate:modelValue"],Me=["for"],we=S(()=>e("div",{class:"container-title"}," 報表查詢 ",-1)),ye={class:"check-container"},We=["id","onUpdate:modelValue"],Ce=["for"],Re=S(()=>e("div",{class:"container-title"}," 資料維護 ",-1)),$e={class:"check-container"},Se=["id","onUpdate:modelValue"],De=["for"],Ee=S(()=>e("div",{class:"container-title"}," 權限管理 ",-1)),Ve={class:"check-container"},ke=["id","onUpdate:modelValue"],Fe=["for"],Ie=S(()=>e("div",{class:"container-title"}," 帳號管理 ",-1)),xe={class:"check-container"},Ue=["id","onUpdate:modelValue"],Ae=["for"],Te={class:"show-modal-button"},Pe=q({__name:"AuthorityManagementForms",props:{currentNavButton:{type:Number,default:0}},emits:["close","on-submit"],setup(b,{emit:D}){const w=j(),{initValues:h,roleInfo:R,navButton:E,checkBoxes:$,modeState:W}=L(w);function U(){D("close")}function A(){D("on-submit")}const V=X({account:Z().required("請輸入角色名稱").test("roleNameInput","必須輸入內容",T=>/^.*/.test(T))});return(T,k)=>(t(),s("div",oe,[e("div",ce,[v(se,{title:u(W)==="add"?"新增角色":"編輯角色",onClose:U},null,8,["title"]),e("div",re,[e("div",de,[v(u(te),{"validation-schema":u(V),"initial-values":u(h)},{default:M(()=>[e("div",me,[e("div",ue,[pe,v(u(B),{id:"roleNameInput",name:"roleNameInput"},{default:M(({field:a,errorMessage:r})=>[v(ee,{modelValue:u(h).roleName,"onUpdate:modelValue":k[0]||(k[0]=d=>u(h).roleName=d),"v-bind":a,class:"modal-input",placeholder:"系統管理員","error-message":r},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",be,[ve,e("div",_e,[e("div",Ne,[he,e("div",fe,[(t(!0),s(_,null,N(u($)[0],(a,r)=>(t(),s("div",{key:r,class:"check-box"},[F(e("input",{id:a.permissionsName,"onUpdate:modelValue":d=>a.selected=d,type:"checkbox"},null,8,ge),[[I,a.selected]]),e("label",{class:"check-label",for:a.permissionsName},p(a.label),9,Me)]))),128))]),we,e("div",ye,[(t(!0),s(_,null,N(u($)[1],(a,r)=>(t(),s("div",{key:r,class:"check-box"},[F(e("input",{id:a.permissionsName,"onUpdate:modelValue":d=>a.selected=d,type:"checkbox"},null,8,We),[[I,a.selected]]),e("label",{class:"check-label",for:a.permissionsName},p(a.label),9,Ce)]))),128))]),Re,e("div",$e,[(t(!0),s(_,null,N(u($)[2],(a,r)=>(t(),s("div",{key:r,class:"check-box"},[F(e("input",{id:a.permissionsName,"onUpdate:modelValue":d=>a.selected=d,type:"checkbox"},null,8,Se),[[I,a.selected]]),e("label",{class:"check-label",for:a.permissionsName},p(a.label),9,De)]))),128))]),Ee,e("div",Ve,[(t(!0),s(_,null,N(u($)[3],(a,r)=>(t(),s("div",{key:r,class:"check-box"},[F(e("input",{id:a.permissionsName,"onUpdate:modelValue":d=>a.selected=d,type:"checkbox"},null,8,ke),[[I,a.selected]]),e("label",{class:"check-label",for:a.permissionsName},p(a.label),9,Fe)]))),128))]),Ie,e("div",xe,[(t(!0),s(_,null,N(u($)[4],(a,r)=>(t(),s("div",{key:r,class:"check-box"},[F(e("input",{id:a.permissionsName,"onUpdate:modelValue":d=>a.selected=d,type:"checkbox"},null,8,Ue),[[I,a.selected]]),e("label",{class:"check-label",for:a.permissionsName},p(a.label),9,Ae)]))),128))])])])])]),e("div",Te,[v(x,{outline:!0,onClick:U},{default:M(()=>[g(" 取消 ")]),_:1}),v(x,{type:"submit",onClick:A},{default:M(()=>[g(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])])]))}});const Qe=J(Pe,[["__scopeId","data-v-b4304d8e"]]),c=b=>(O("data-v-78027414"),b=b(),H(),b),qe={class:"query-view"},Le={class:"query-container"},Oe={class:"breadcrumb-area"},He={class:"query-area"},Je=c(()=>e("h2",{class:"query-title-text"}," 權限管理 ",-1)),je={class:"query-title"},Ge=c(()=>e("span",{class:"title-img"},[e("img",{src:ie,alt:""}),g(" 權限列表 ")],-1)),Ye=c(()=>e("span",{class:"text-xl mb-[2px]"},"+",-1)),ze=c(()=>e("caption",null,"Authority Management Table",-1)),Ke=c(()=>e("th",{class:"w-[20%]"}," 序號 ",-1)),Xe=c(()=>e("th",{class:"w-[20%]"}," 角色名稱 ",-1)),Ze=c(()=>e("th",{class:"w-[30%]"}," 角色名稱 ",-1)),Be=c(()=>e("th",{class:"grow"}," 操作 ",-1)),et={class:"w-[20%]","data-title":"序號："},tt={class:"w-[20%]","data-title":"角色名稱："},at={class:"role-permissions w-[30%]","data-title":"角色權限："},st={class:"permissions-title"},lt=c(()=>e("div",null,"創建網站-",-1)),nt={key:0},it={key:0,class:"separate"},ot={class:"permissions-title"},ct=c(()=>e("div",null,"報價查詢-",-1)),rt={key:0},dt={class:"permissions-title"},mt=c(()=>e("div",null,"資料維護-",-1)),ut={key:0},pt={key:0,class:"separate"},bt={class:"permissions-title"},vt=c(()=>e("div",null,"權限管理-",-1)),_t={key:0},Nt={key:0,class:"separate"},ht={class:"permissions-title"},ft=c(()=>e("div",null,"帳號管理-",-1)),gt={key:0},Mt={key:0,class:"separate"},wt={class:"grow","data-title":"操作："},yt={class:"action-button grow"},Wt=c(()=>e("img",{src:Y,alt:""},null,-1)),Ct=c(()=>e("img",{src:z,alt:""},null,-1)),Rt=q({__name:"AuthorityManagementView",setup(b){const D=j(),{initValues:w,roleInfo:h,modeState:R,checkBoxes:E}=L(D),$=[{title:"首頁",path:Q.BACKHOME},{title:"權限管理",path:Q.AUTHORITY_MANAGEMENT}],W=C(!1),U=C(0),A=C(0),V=(o,m)=>{for(let n=m.length-1;n>o;n--)if(m[n].selected)return!1;return!0},T=o=>{h.value.splice(o,1)},k=()=>{R.value="add",w.value.roleName="";for(const o of E.value)for(const m of o)m.selected=!1;W.value=!0},a=(o,m)=>{R.value="edit",A.value=m;const n=JSON.parse(JSON.stringify(o));w.value.roleName=n.roleName;const{permissions:y}=n;y.forEach((l,i)=>{l.forEach((P,G)=>{E.value[i][G].selected=P.selected})}),W.value=!0},r=()=>{w.value.roleName="";for(const o of E.value)for(const m of o)m.selected=!1;W.value=!1},d=async()=>{if(R.value==="add"){const o=w.value.roleName,m=E.value,y={roleId:(()=>{const l=new Date;return`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}${String(l.getHours()).padStart(2,"0")}${String(l.getMinutes()).padStart(2,"0")}${String(l.getSeconds()).padStart(2,"0")}`})(),roleName:o,permissions:m};h.value.push(y),W.value=!1}else if(R.value==="edit"){const o=h.value[A.value],m=w.value.roleName,n=E.value.map((y,l)=>y.map((i,P)=>({...o.permissions[l][P],selected:i.selected})));o.roleName=m,o.permissions=n,W.value=!1}};return(o,m)=>(t(),s("div",qe,[e("div",Le,[e("div",Oe,[v(le,{breadcrumb:$})]),e("div",He,[Je,e("div",je,[Ge,v(x,{size:"custom",width:130,height:40,onClick:k},{default:M(()=>[Ye,g("新增角色 ")]),_:1})]),v(ne,null,{th:M(()=>[Ke,Xe,Ze,Be]),tobodyTr:M(()=>[(t(!0),s(_,null,N(u(h),(n,y)=>(t(),s("tr",{key:y,class:"authority-body"},[e("td",et,p(n.roleId),1),e("td",tt,p(n.roleName),1),e("td",at,[e("div",null,[e("div",st,[lt,(t(!0),s(_,null,N(n.permissions[0],(l,i)=>(t(),s("span",{key:i},[l.selected?(t(),s("span",nt,[g(p(l.label),1),V(i,n.permissions[0])?f("",!0):(t(),s("span",it,","))])):f("",!0)]))),128))]),e("div",ot,[ct,(t(!0),s(_,null,N(n.permissions[1],(l,i)=>(t(),s("span",{key:i},[l.selected?(t(),s("span",rt,p(l.label),1)):f("",!0)]))),128))]),e("div",dt,[mt,(t(!0),s(_,null,N(n.permissions[2],(l,i)=>(t(),s("span",{key:i,class:"permissions-title"},[l.selected?(t(),s("span",ut,[g(p(l.label),1),V(i,n.permissions[2])?f("",!0):(t(),s("span",pt,","))])):f("",!0)]))),128))]),e("div",bt,[vt,(t(!0),s(_,null,N(n.permissions[3],(l,i)=>(t(),s("span",{key:i,class:"permissions-title"},[l.selected?(t(),s("span",_t,[g(p(l.label),1),V(i,n.permissions[3])?f("",!0):(t(),s("span",Nt,","))])):f("",!0)]))),128))]),e("div",ht,[ft,(t(!0),s(_,null,N(n.permissions[4],(l,i)=>(t(),s("span",{key:i,class:"permissions-title"},[l.selected?(t(),s("span",gt,[g(p(l.label),1),V(i,n.permissions[4])?f("",!0):(t(),s("span",Mt,","))])):f("",!0)]))),128))])])]),e("td",wt,[e("div",yt,[v(x,{class:"edit-button",onClick:l=>a(n,y)},{default:M(()=>[Wt,g(" 編輯 ")]),_:2},1032,["onClick"]),v(x,{class:"delete-button",onClick:l=>T(y)},{default:M(()=>[Ct,g(" 刪除 ")]),_:2},1032,["onClick"])])])]))),128))]),default:M(()=>[ze]),_:1})]),W.value?(t(),ae(Qe,{key:0,"current-nav-button":U.value,onClose:r,onOnSubmit:d},null,8,["current-nav-button"])):f("",!0)])]))}});const It=J(Rt,[["__scopeId","data-v-78027414"]]);export{It as default};
