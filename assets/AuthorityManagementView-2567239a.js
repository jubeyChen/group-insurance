import{_ as ae,a as le,b as ne}from"./icon_delete-cb30b165.js";import{W as se,r as C,d as j,J as Q,L as ie,M as oe,o as t,c as a,a as e,b as p,w as R,u as c,F as de,R as ce,k as m,l as _,j as F,h as f,Q as re,e as S,bG as x,t as v,s as J,x as O,_ as T,g as ue,n as A,p as be,i as g,at as ve}from"./index-7100064a.js";import{_ as me}from"./FormTitle.vue_vue_type_script_setup_true_lang-b1a90a89.js";/* empty css                                                               */import{u as _e}from"./pagination-831eabef.js";import{N as he}from"./Breadcrumbs-64cdbcc4.js";const q=se("authorityManagement",()=>{const h=C({addNewPermissions:""}),$=C([{code:"20230116170505",roleName:"主任",actions:[[{value:"createWebPreview",id:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",id:"uploadFiles",label:"上傳文件",selected:!0},{value:"createWebCopyFiles",id:"createWebCopyFiles",label:"複製案件",selected:!0},{value:"createWebDeletion",id:"createWebDeletion",label:"刪除",selected:!0},{value:"createWebRegistering",id:"createWebRegistering",label:"套版",selected:!0},{value:"createWebEdit",id:"createWebEdit",label:"編輯",selected:!0},{value:"createWebNew",id:"createWebNew",label:"新增",selected:!0},{value:"createWebReview",id:"createWebReview",label:"審核",selected:!0},{value:"createWebSecondStageReview",id:"createWebSecondStageReview",label:"二階段審核",selected:!0},{value:"createWebRemovedContent",id:"createWebRemovedContent",label:"下架內容",selected:!0}],[{value:"reportQueryViewContent",id:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",id:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",id:"dataMaintenanceDeletion",label:"刪除",selected:!0},{value:"dataMaintenanceEdit",id:"dataMaintenanceEdit",label:"編輯",selected:!0},{value:"dataMaintenanceRemovedContent",id:"dataMaintenanceRemovedContent",label:"下架",selected:!0},{value:"dataMaintenanceReview",id:"dataMaintenanceReview",label:"審核",selected:!0}],[{value:"authorityManagementEdit",id:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",id:"authorityManagementDeletion",label:"刪除",selected:!0},{value:"authorityManagementNew",id:"authorityManagementNew",label:"新增",selected:!0}],[{value:"accountManagementEdit",id:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",id:"accountManagementDeletion",label:"刪除",selected:!0},{value:"accountManagementNew",id:"accountManagementNew",label:"新增",selected:!0}]]},{code:"20230116170505",roleName:"合作金庫",actions:[[{value:"createWebPreview",id:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",id:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",id:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",id:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",id:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",id:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",id:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",id:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",id:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",id:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",id:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",id:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",id:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",id:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",id:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",id:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",id:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",id:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",id:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",id:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",id:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",id:"accountManagementNew",label:"新增",selected:!1}]]},{code:"20230116170505",roleName:"合作金庫",actions:[[{value:"createWebPreview",id:"createWebPreview",label:"預覽",selected:!0},{value:"createWebUploadFiles",id:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",id:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",id:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",id:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",id:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",id:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",id:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",id:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",id:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",id:"reportQueryViewContent",label:"查看內容",selected:!0}],[{value:"dataMaintenanceViewContent",id:"dataMaintenanceViewContent",label:"查看內容",selected:!0},{value:"dataMaintenanceDeletion",id:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",id:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",id:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",id:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",id:"authorityManagementEdit",label:"編輯",selected:!0},{value:"authorityManagementDeletion",id:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",id:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",id:"accountManagementEdit",label:"編輯",selected:!0},{value:"accountManagementDeletion",id:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",id:"accountManagementNew",label:"新增",selected:!1}]]}]),M=C([{buttonName:"創建網站",index:0},{buttonName:"報表查詢",index:1},{buttonName:"資料維護",index:2},{buttonName:"權限管理",index:3},{buttonName:"帳號管理",index:4}]),b=C([[{value:"createWebPreview",id:"createWebPreview",label:"預覽",selected:!1},{value:"createWebUploadFiles",id:"uploadFiles",label:"上傳文件",selected:!1},{value:"createWebCopyFiles",id:"createWebCopyFiles",label:"複製案件",selected:!1},{value:"createWebDeletion",id:"createWebDeletion",label:"刪除",selected:!1},{value:"createWebRegistering",id:"createWebRegistering",label:"套版",selected:!1},{value:"createWebEdit",id:"createWebEdit",label:"編輯",selected:!1},{value:"createWebNew",id:"createWebNew",label:"新增",selected:!1},{value:"createWebReview",id:"createWebReview",label:"審核",selected:!1},{value:"createWebSecondStageReview",id:"createWebSecondStageReview",label:"二階段審核",selected:!1},{value:"createWebRemovedContent",id:"createWebRemovedContent",label:"下架內容",selected:!1}],[{value:"reportQueryViewContent",id:"reportQueryViewContent",label:"查看內容",selected:!1}],[{value:"dataMaintenanceViewContent",id:"dataMaintenanceViewContent",label:"查看內容",selected:!1},{value:"dataMaintenanceDeletion",id:"dataMaintenanceDeletion",label:"刪除",selected:!1},{value:"dataMaintenanceEdit",id:"dataMaintenanceEdit",label:"編輯",selected:!1},{value:"dataMaintenanceRemovedContent",id:"dataMaintenanceRemovedContent",label:"下架",selected:!1},{value:"dataMaintenanceReview",id:"dataMaintenanceReview",label:"審核",selected:!1}],[{value:"authorityManagementEdit",id:"authorityManagementEdit",label:"編輯",selected:!1},{value:"authorityManagementDeletion",id:"authorityManagementDeletion",label:"刪除",selected:!1},{value:"authorityManagementNew",id:"authorityManagementNew",label:"新增",selected:!1}],[{value:"accountManagementEdit",id:"accountManagementEdit",label:"編輯",selected:!1},{value:"accountManagementDeletion",id:"accountManagementDeletion",label:"刪除",selected:!1},{value:"accountManagementNew",id:"accountManagementNew",label:"新增",selected:!1}]]);return{initValues:h,authorityManagementDataList:$,navButton:M,checkBoxes:b}}),D=h=>(J("data-v-baeaeaa1"),h=h(),O(),h),ge={class:"modal-mask"},fe={class:"content"},pe={class:"content-box pb-6 flex justify-center align-middle"},we={class:"show-modal"},Me={class:"show-modal-body"},ye={class:"show-modal-input"},We=D(()=>e("label",{for:"addNewPermissions"},"角色名稱",-1)),Ne={class:"show-modal-table"},Ce=D(()=>e("label",{class:"show-modal-label",for:"addNewPermissions"}," 管理權限 ",-1)),ke={class:"show-table-container"},Re={class:"table-container"},De=D(()=>e("div",{class:"container-title"}," 創建網站 ",-1)),$e={class:"check-container"},Ee=["id","onUpdate:modelValue"],Ve=["for"],Pe=D(()=>e("div",{class:"container-title"}," 報表查詢 ",-1)),Se={class:"check-container"},xe=["id","onUpdate:modelValue"],Fe=["for"],Ue=D(()=>e("div",{class:"container-title"}," 資料維護 ",-1)),Le={class:"check-container"},Ae=["id","onUpdate:modelValue"],Qe=["for"],Ie=D(()=>e("div",{class:"container-title"}," 權限管理 ",-1)),je={class:"check-container"},Je=["id","onUpdate:modelValue"],Oe=["for"],Te=D(()=>e("div",{class:"container-title"}," 帳號管理 ",-1)),qe={class:"check-container"},ze=["id","onUpdate:modelValue"],Ge=["for"],He={class:"show-modal-button"},Ke=j({__name:"AuthorityManagementForms",props:{currentNavButton:{type:Number,default:0}},emits:["close","on-submit"],setup(h,{emit:$}){const M=q(),{initValues:b,authorityManagementDataList:z,navButton:E,checkBoxes:k}=Q(M);function y(){$("close")}function V(){$("on-submit")}const U=ie({account:oe().required("請輸入角色名稱").test("addNewPermissions","必須輸入內容",P=>/^.*/.test(P))});return(P,W)=>(t(),a("div",ge,[e("div",fe,[p(me,{title:"新增角色",onClose:y}),e("div",pe,[e("div",we,[p(c(re),{"validation-schema":c(U),"initial-values":c(b)},{default:R(()=>[e("div",Me,[e("div",ye,[We,p(c(de),{id:"addNewPermissions",name:"addNewPermissions"},{default:R(({field:l,errorMessage:i})=>[p(ce,{modelValue:c(b).addNewPermissions,"onUpdate:modelValue":W[0]||(W[0]=u=>c(b).addNewPermissions=u),"v-bind":l,class:"modal-input",placeholder:"系統管理員","error-message":i},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",Ne,[Ce,e("div",ke,[e("div",Re,[De,e("div",$e,[(t(!0),a(m,null,_(c(k)[0],(l,i)=>(t(),a("div",{key:i,class:"check-box"},[S(e("input",{id:l.id,"onUpdate:modelValue":u=>l.selected=u,type:"checkbox"},null,8,Ee),[[x,l.selected]]),e("label",{class:"check-label",for:l.id},v(l.label),9,Ve)]))),128))]),Pe,e("div",Se,[(t(!0),a(m,null,_(c(k)[1],(l,i)=>(t(),a("div",{key:i,class:"check-box"},[S(e("input",{id:l.id,"onUpdate:modelValue":u=>l.selected=u,type:"checkbox"},null,8,xe),[[x,l.selected]]),e("label",{class:"check-label",for:l.id},v(l.label),9,Fe)]))),128))]),Ue,e("div",Le,[(t(!0),a(m,null,_(c(k)[2],(l,i)=>(t(),a("div",{key:i,class:"check-box"},[S(e("input",{id:l.id,"onUpdate:modelValue":u=>l.selected=u,type:"checkbox"},null,8,Ae),[[x,l.selected]]),e("label",{class:"check-label",for:l.id},v(l.label),9,Qe)]))),128))]),Ie,e("div",je,[(t(!0),a(m,null,_(c(k)[3],(l,i)=>(t(),a("div",{key:i,class:"check-box"},[S(e("input",{id:l.id,"onUpdate:modelValue":u=>l.selected=u,type:"checkbox"},null,8,Je),[[x,l.selected]]),e("label",{class:"check-label",for:l.id},v(l.label),9,Oe)]))),128))]),Te,e("div",qe,[(t(!0),a(m,null,_(c(k)[4],(l,i)=>(t(),a("div",{key:i,class:"check-box"},[S(e("input",{id:l.id,"onUpdate:modelValue":u=>l.selected=u,type:"checkbox"},null,8,ze),[[x,l.selected]]),e("label",{class:"check-label",for:l.id},v(l.label),9,Ge)]))),128))])])])])]),e("div",He,[p(F,{outline:!0,onClick:y},{default:R(()=>[f(" 取消 ")]),_:1}),p(F,{type:"submit",onClick:V},{default:R(()=>[f(" 確認 ")]),_:1})])]),_:1},8,["validation-schema","initial-values"])])])])]))}});const Xe=T(Ke,[["__scopeId","data-v-baeaeaa1"]]),w=h=>(J("data-v-89250a90"),h=h(),O(),h),Ye={class:"create-view-container"},Ze={class:"breadcrumb"},Be={class:"box mx-auto w-full"},et=w(()=>e("h2",{class:"title-text"}," 權限管理 ",-1)),tt={class:"management-title"},at=w(()=>e("span",{class:"management-title-text"},[e("img",{src:ae,alt:""}),f(" 權限列表 ")],-1)),lt=w(()=>e("span",null," ＋ ",-1)),nt={class:"table-container"},st=ve('<div class="table-header" data-v-89250a90><div class="table-header-title1" data-v-89250a90> 序號 </div><div class="table-header-title2" data-v-89250a90> 角色名稱 </div><div class="table-header-title3" data-v-89250a90> 角色名稱 </div><div class="table-header-title4" data-v-89250a90> 操作 </div></div>',1),it={class:"table-body-item1","data-title":"序　　號："},ot={class:"table-body-item2","data-title":"角色名稱："},dt={class:"table-body-item3","data-title":"角色名稱："},ct={class:"table-body-direction"},rt={class:"table-body-item-text"},ut=w(()=>e("div",null,"創建網站-",-1)),bt={key:0},vt={key:0,class:"separate"},mt={class:"table-body-item-text"},_t=w(()=>e("div",null,"報價查詢-",-1)),ht={key:0},gt={class:"table-body-item-text"},ft=w(()=>e("div",null,"資料維護-",-1)),pt={key:0},wt={key:0,class:"separate"},Mt={class:"table-body-item-text"},yt=w(()=>e("div",null,"權限管理-",-1)),Wt={key:0},Nt={key:0,class:"separate"},Ct={class:"table-body-item-text"},kt=w(()=>e("div",null,"帳號管理-",-1)),Rt={key:0},Dt={key:0,class:"separate"},$t={class:"table-body-item4"},Et=w(()=>e("img",{src:le,alt:""},null,-1)),Vt=w(()=>e("img",{src:ne,alt:""},null,-1)),Pt={class:"pagination"},St=["disabled"],xt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ft=["onClick"],Ut=["disabled"],Lt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},At=j({__name:"AuthorityManagementView",setup(h){const $=q(),{initValues:M,authorityManagementDataList:b,navButton:z,checkBoxes:E}=Q($),k=[{title:"首頁",path:"/back-home"},{title:"權限管理",path:"/back-authority-management"}],y=C(!1),V=C("add"),U=C(0),P=C(0);function W(s,r){for(let n=r.length-1;n>s;n--)if(r[n].selected)return!1;return!0}const l=_e(),{pageSet:i,totalPages:u}=Q(l);function G(){const s=i.value.currentPage-1;i.value.currentPage=s,i.value.totalElements=b.value.length}function H(){const s=i.value.currentPage+1;i.value.currentPage=s,i.value.totalElements=b.value.length}function K(s){s!==i.value.currentPage&&(i.value.currentPage=s,i.value.totalElements=b.value.length)}function I(s){const r=document.getElementById(s);if(r)return!!r.disabled}ue(()=>{l.$reset()});function X(s){b.value.splice(s,1)}function Y(){V.value="add",M.value.addNewPermissions="";for(const s of E.value)for(const r of s)r.selected=!1;y.value=!0}function Z(s,r){V.value="edit",P.value=r;const n=JSON.parse(JSON.stringify(s));M.value.addNewPermissions=n.roleName;const{actions:N}=n;N.forEach((o,d)=>{o.forEach((L,te)=>{E.value[d][te].selected=L.selected})}),y.value=!0}function B(){M.value.addNewPermissions="";for(const s of E.value)for(const r of s)r.selected=!1;y.value=!1}const ee=async()=>{if(V.value==="add"){const s=M.value.addNewPermissions,r=E.value,n={code:"20230116170505",roleName:s,actions:r};b.value.push(n),y.value=!1}else if(V.value==="edit"){const s=b.value[P.value],r=M.value.addNewPermissions,n=E.value.map((N,o)=>N.map((d,L)=>({...s.actions[o][L],selected:d.selected})));s.roleName=r,s.actions=n,y.value=!1}};return(s,r)=>(t(),a("div",Ye,[e("div",Ze,[p(he,{breadcrumb:k})]),e("div",Be,[et,e("div",tt,[at,p(F,{onClick:Y},{default:R(()=>[lt,f(" 新增角色 ")]),_:1})]),e("div",nt,[st,(t(!0),a(m,null,_(c(b),(n,N)=>(t(),a("div",{key:N,class:"table-body"},[e("div",it,v(n.code),1),e("div",ot,v(n.roleName),1),e("div",dt,[e("div",ct,[e("div",rt,[ut,(t(!0),a(m,null,_(n.actions[0],(o,d)=>(t(),a("span",{key:d},[o.selected?(t(),a("span",bt,[f(v(o.label),1),W(d,n.actions[0])?g("",!0):(t(),a("span",vt,","))])):g("",!0)]))),128))]),e("div",mt,[_t,(t(!0),a(m,null,_(n.actions[1],(o,d)=>(t(),a("span",{key:d},[o.selected?(t(),a("span",ht,v(o.label),1)):g("",!0)]))),128))]),e("div",gt,[ft,(t(!0),a(m,null,_(n.actions[2],(o,d)=>(t(),a("span",{key:d,class:"table-body-item-text"},[o.selected?(t(),a("span",pt,[f(v(o.label),1),W(d,n.actions[2])?g("",!0):(t(),a("span",wt,","))])):g("",!0)]))),128))]),e("div",Mt,[yt,(t(!0),a(m,null,_(n.actions[3],(o,d)=>(t(),a("span",{key:d,class:"table-body-item-text"},[o.selected?(t(),a("span",Wt,[f(v(o.label),1),W(d,n.actions[3])?g("",!0):(t(),a("span",Nt,","))])):g("",!0)]))),128))]),e("div",Ct,[kt,(t(!0),a(m,null,_(n.actions[4],(o,d)=>(t(),a("span",{key:d,class:"table-body-item-text"},[o.selected?(t(),a("span",Rt,[f(v(o.label),1),W(d,n.actions[4])?g("",!0):(t(),a("span",Dt,","))])):g("",!0)]))),128))])])]),e("div",$t,[p(F,{class:"edit-button",onClick:o=>Z(n,N)},{default:R(()=>[Et,f(" 編輯 ")]),_:2},1032,["onClick"]),p(F,{class:"delete-button",onClick:o=>X(N)},{default:R(()=>[Vt,f(" 刪除 ")]),_:2},1032,["onClick"])])]))),128)),e("div",Pt,[e("button",{disabled:c(i).currentPage===1,onClick:G},[(t(),a("svg",xt,[e("path",{class:A({"disabled-btn":I("pre-btn")}),d:"M6.16602 1.33301L1.49935 5.99967L6.16602 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,St),(t(!0),a(m,null,_(c(u),n=>(t(),a("button",{key:n,class:A(n===c(i).currentPage?"chosenPageBtn":"unchosenPageBtn"),onClick:N=>K(n)},v(n),11,Ft))),128)),e("button",{disabled:c(i).currentPage===c(u),onClick:H},[(t(),a("svg",Lt,[e("path",{class:A({"disabled-btn":I("next-btn")}),d:"M1.5 1.33301L6.16667 5.99967L1.5 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Ut)])])]),y.value?(t(),be(Xe,{key:0,"current-nav-button":U.value,onClose:B,onOnSubmit:ee},null,8,["current-nav-button"])):g("",!0)]))}});const qt=T(At,[["__scopeId","data-v-89250a90"]]);export{qt as default};
