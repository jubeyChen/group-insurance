import{_ as re}from"./icon_outcome-1d2e6907.js";import{_ as ue,a as me}from"./icon_delete-7a56ee05.js";import{d as q,I as pe,y as U,r as D,g as ae,C as _e,D as Y,F as J,o as S,p as le,w as m,a as e,n as $,u as t,a0 as ve,J as z,L as ge,M as he,c as E,b as s,b_ as A,l as C,Q as O,m as X,i as P,h as N,O as fe,s as oe,x as se,_ as ne,a2 as Z,j as ee,k as be,a6 as Se,t as T}from"./index-ee8c1cae.js";import{_ as ye}from"./FormTitle.vue_vue_type_script_setup_true_lang-c2ef5d19.js";import{t as we,d as Me,j as Ee,o as $e,f as ke,K as xe,b as Ce,H as De,T as Ne,i as te,k as Ie,N as Ve}from"./Select-d76b03a0.js";import{k as Te,E as W}from"./radio-group-a9645075.js";import{u as Ae}from"./pagination-c2702935.js";import{N as Pe}from"./Breadcrumbs-7d021867.js";import"./icon_note-96b9c260.js";/* empty css                                                               */let Le=Symbol("GroupContext"),Be=q({name:"Switch",emits:{"update:modelValue":c=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${we()}`}},inheritAttrs:!1,setup(c,{emit:r,attrs:n,slots:a,expose:k}){let g=pe(Le,null),[w,f]=Me(U(()=>c.modelValue),u=>r("update:modelValue",u),U(()=>c.defaultChecked));function x(){f(!w.value)}let I=D(null),M=g===null?I:g.switchRef,h=Ee(U(()=>({as:c.as,type:n.type})),M);k({el:M,$el:M});function o(u){u.preventDefault(),x()}function i(u){u.key===te.Space?(u.preventDefault(),x()):u.key===te.Enter&&Ie(u.currentTarget)}function v(u){u.preventDefault()}let _=U(()=>{var u,b;return(b=(u=$e(M))==null?void 0:u.closest)==null?void 0:b.call(u,"form")});return ae(()=>{_e([_],()=>{if(!_.value||c.defaultChecked===void 0)return;function u(){f(c.defaultChecked)}return _.value.addEventListener("reset",u),()=>{var b;(b=_.value)==null||b.removeEventListener("reset",u)}},{immediate:!0})}),()=>{let{id:u,name:b,value:F,form:G,...R}=c,j={checked:w.value},H={id:u,ref:M,role:"switch",type:h.value,tabIndex:0,"aria-checked":w.value,"aria-labelledby":g==null?void 0:g.labelledby.value,"aria-describedby":g==null?void 0:g.describedby.value,onClick:o,onKeyup:i,onKeypress:v};return Y(J,[b!=null&&w.value!=null?Y(ke,xe({features:Ce.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:w.value,form:G,name:b,value:F})):null,De({ourProps:H,theirProps:{...n,...Ne(R,["modelValue","defaultChecked"])},slot:j,attrs:n,slots:a,name:"Switch"})])}}});const Ue=q({__name:"Toggle",props:{value:{type:null}},setup(c){return(r,n)=>(S(),le(t(Be),{"model-value":c.value,as:"template","onUpdate:modelValue":n[0]||(n[0]=a=>r.$emit("update:modelValue",a))},{default:m(({checked:a})=>[e("button",{class:$([a?"bg-primary-500 on":"bg-gray-200 off","relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-1 focus:ring-primary-500 focus:ring-offset-2"])},[e("span",{"aria-hidden":"true",class:$([a?"translate-x-7":"translate-x-0","pointer-events-none inline-block h-5 w-5 self-center transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "])},null,2)],2)]),_:1},8,["model-value"]))}});const ie=ve("accountManagement",()=>{const c=D(""),r=D({serialNumber:"",employeeID:"",department:"",name:"",role:{label:"",value:0},accountState:!1,sectionManagerEmail:"",departmentManagerEmail:""}),n=D([{serialNumber:"20230116170505",employeeID:"W901111",department:"Other",name:"玉南山",role:{label:"內勤人員",value:1},accountState:!0,sectionManagerEmail:"NSLSM@mail.com",departmentManagerEmail:"NSLDM@mail.com"},{serialNumber:"20230717190707",employeeID:"W902222",department:"AGTeam",name:"玉北山",role:{label:"外勤人員",value:2},accountState:!1,sectionManagerEmail:"NSLSM2@mail.com",departmentManagerEmail:"NSLDM2@mail.com"},{serialNumber:"20231010221010",employeeID:"W904444",department:"AGTeam",name:"玉東山",role:{label:"經理",value:4},accountState:!1,sectionManagerEmail:"NSLSM4@mail.com",departmentManagerEmail:"NSLDM4@mail.com"},{serialNumber:"20231111231111",employeeID:"W906666",department:"DBTeam",name:"玉西山",role:{label:"處長",value:6},accountState:!0,sectionManagerEmail:"NSLSM6@mail.com",departmentManagerEmail:"NSLDM6@mail.com"}]),a=D([{label:"內勤人員",value:1},{label:"外勤人員",value:2},{label:"專員",value:3},{label:"經理",value:4},{label:"科主管",value:5},{label:"處主管",value:6}]);function k(){r.value.employeeID="",r.value.department="",r.value.name="",r.value.role={label:"內勤人員",value:0},r.value.accountState=!1,r.value.sectionManagerEmail="",r.value.departmentManagerEmail=""}return{initValues:r,accountManagementDataList:n,options:a,modeState:c,$reset:k}}),y=c=>(oe("data-v-49cf5f85"),c=c(),se(),c),Oe={class:"modal-mask"},qe={class:"content"},Fe={class:"pb-6 flex justify-center align-middle"},Ge={class:"show-modal"},Re={class:"show-modal-row"},je={class:"show-modal-input"},He=y(()=>e("label",{for:"employeeID"},"員工編號",-1)),Ke={class:"show-modal-input"},We=y(()=>e("label",{for:"department"},"部門",-1)),Je={class:"flex items-center mb-4"},ze=y(()=>e("span",{class:"radio-text"},"DB TEAM",-1)),Qe={class:"flex items-center"},Ye=y(()=>e("span",{class:"radio-text"},"AG TEAM",-1)),Xe={class:"flex items-center"},Ze=y(()=>e("span",{class:"radio-text"},"Other",-1)),et={class:"show-modal-row"},tt={class:"show-modal-input"},at=y(()=>e("label",{for:"name"},"姓名",-1)),lt={class:"show-modal-input"},ot=y(()=>e("label",{for:"role"},"角色",-1)),st={class:"show-modal-row"},nt={class:"show-modal-input"},it=y(()=>e("label",{for:"sectionManagerEmail"},"科主管Email",-1)),dt={class:"show-modal-input"},ct=y(()=>e("label",{for:"departmentManagerEmail"},"處主管Email",-1)),rt={class:"show-modal-row"},ut={class:"show-modal-input"},mt=y(()=>e("label",{for:"accountState"},"帳號狀態",-1)),pt={class:"show-modal-button"},_t=q({__name:"AccountManagementForms",emits:["close","onSubmit","update:toggle-change","update:select-change"],setup(c,{emit:r}){const n=ie(),{initValues:a,accountManagementDataList:k,options:g,modeState:w}=z(n);function f(h){console.log("update:ToggleChange："+h),r("update:toggle-change",h)}function x(h){console.log("update:SelectChange："+h),r("update:select-change",h)}function I(){r("close")}function M(){r("onSubmit")}return ge({account:he().required("請輸入角色名稱").test("addNewPermissions","必須輸入內容",h=>/^.*/.test(h))}),(h,o)=>(S(),E("div",Oe,[e("div",qe,[s(ye,{title:t(w)===t(A).CREATE?"新增帳號":"編輯帳號",onClose:I},null,8,["title"]),e("div",Fe,[e("div",Ge,[s(t(fe),{"initial-values":t(a),onSubmit:M},{default:m(()=>[e("div",Re,[e("div",je,[He,s(t(C),{id:"employeeID",name:"employeeID"},{default:m(({field:i,errorMessage:v})=>[s(O,{modelValue:t(a).employeeID,"onUpdate:modelValue":o[0]||(o[0]=_=>t(a).employeeID=_),"v-bind":i,class:"modal-input",placeholder:"請輸入人員代碼","error-message":v},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",Ke,[We,s(t(C),{id:"department",name:"department"},{default:m(()=>[s(t(Te),{modelValue:t(a).department,"onUpdate:modelValue":o[1]||(o[1]=i=>t(a).department=i),class:"flex gap-5 pt-3 h-0"},{default:m(()=>[s(t(W),{value:"DBTeam",class:"w-fit"},{default:m(({checked:i})=>[e("div",Je,[e("span",{class:$(["radio-circle text-[0px]",{"is-checked":i}])},null,2),ze])]),_:1}),s(t(W),{value:"AGTeam",class:"w-fit"},{default:m(({checked:i})=>[e("div",Qe,[e("span",{class:$(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Ye])]),_:1}),s(t(W),{value:"Other",class:"w-fit"},{default:m(({checked:i})=>[e("div",Xe,[e("span",{class:$(["radio-circle text-[0px]",{"is-checked":i}])},null,2),Ze])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),e("div",et,[e("div",tt,[at,s(t(C),{id:"name",name:"name"},{default:m(({field:i,errorMessage:v})=>[s(O,{modelValue:t(a).name,"onUpdate:modelValue":o[2]||(o[2]=_=>t(a).name=_),"v-bind":i,class:"modal-input",placeholder:"請輸入姓名","error-message":v},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",lt,[ot,s(t(C),{id:"role",name:"role"},{default:m(({field:i,errorMessage:v})=>[s(Ve,X({id:"roleNameSelected"},i,{class:"modal-input",value:t(a).role.value,"model-value":t(a).role.value,placeholder:"請選擇角色",options:t(g),"error-message":v,"onUpdate:modelValue":x}),null,16,["value","model-value","options","error-message"])]),_:1})])]),e("div",st,[e("div",nt,[it,s(t(C),{id:"sectionManagerEmail",name:"sectionManagerEmail"},{default:m(({field:i,errorMessage:v})=>[s(O,{modelValue:t(a).sectionManagerEmail,"onUpdate:modelValue":o[3]||(o[3]=_=>t(a).sectionManagerEmail=_),"v-bind":i,class:"modal-input",placeholder:"請輸email","error-message":v},null,8,["modelValue","v-bind","error-message"])]),_:1})]),e("div",dt,[ct,s(t(C),{id:"departmentManagerEmail",name:"departmentManagerEmail"},{default:m(({field:i,errorMessage:v})=>[s(O,{modelValue:t(a).departmentManagerEmail,"onUpdate:modelValue":o[4]||(o[4]=_=>t(a).departmentManagerEmail=_),"v-bind":i,class:"modal-input",placeholder:"請輸email","error-message":v},null,8,["modelValue","v-bind","error-message"])]),_:1})])]),e("div",rt,[e("div",ut,[mt,s(t(C),{id:"accountState",name:"accountState"},{default:m(({value:i,field:v,errorMessage:_})=>[s(Ue,X({class:"modal-radio-button mt-3"},v,{"error-message":_,"model-value":t(a).accountState=i,"onUpdate:modelValue":f}),null,16,["error-message","model-value"])]),_:1})])]),e("div",pt,[s(P,{type:"button",outline:!0,onClick:I},{default:m(()=>[N(" 取消 ")]),_:1}),s(P,{type:"submit"},{default:m(()=>[N(" 確認 ")]),_:1})])]),_:1},8,["initial-values"])])])])]))}});const vt=ne(_t,[["__scopeId","data-v-49cf5f85"]]),L=c=>(oe("data-v-d0ba7c85"),c=c(),se(),c),gt={class:"query-view"},ht={class:"query-container"},ft={class:"breadcrumb-area"},bt={class:"query-area"},St=L(()=>e("h2",{class:"query-title-text"}," 帳號管理 ",-1)),yt={class:"query-title"},wt=L(()=>e("span",{class:"title-img"},[e("img",{src:re,alt:""}),N(" 帳號列表 ")],-1)),Mt=L(()=>e("span",null," ＋ ",-1)),Et={class:"query-table"},$t=Se('<div class="query-header query-result-header" data-v-d0ba7c85><div class="w-[98%] mx-auto flex text-center" data-v-d0ba7c85><div class="w-[20%]" data-v-d0ba7c85> 序號 </div><div class="w-[10%]" data-v-d0ba7c85> 人員代碼 </div><div class="w-[10%]" data-v-d0ba7c85> 姓名 </div><div class="w-[15%]" data-v-d0ba7c85> 角色 </div><div class="w-[15%]" data-v-d0ba7c85> 帳號狀態 </div><div class="w-[30%]" data-v-d0ba7c85> 操作 </div></div></div>',1),kt={class:"query-body"},xt={class:"w-[98%] mx-auto","aria-hidden":"true"},Ct={class:"w-[20%]","data-title":"序號："},Dt={class:"w-[10%]","data-title":"人員代碼："},Nt={class:"w-[10%]","data-title":"姓名："},It={class:"table-body-direction"},Vt={class:"w-[15%]","data-title":"角色："},Tt={class:"table-body-direction"},At={class:"w-[15%]","data-title":"帳號狀態："},Pt={class:"table-body-direction w-full"},Lt={class:"web-state"},Bt=["src"],Ut={class:"body-item-action"},Ot=L(()=>e("img",{src:ue,alt:""},null,-1)),qt=L(()=>e("img",{src:me,alt:""},null,-1)),Ft={class:"pagination"},Gt=["disabled"],Rt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jt=["onClick"],Ht=["disabled"],Kt={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Wt=q({__name:"AccountManagementView",setup(c){const r=ie(),{initValues:n,accountManagementDataList:a,options:k,modeState:g}=z(r),w=[{title:"首頁",path:Z.BACKHOME},{title:"帳號管理",path:Z.ACCOUNT_MANAGEMENT}],f=D(!1),x=D(0),I=l=>{console.log("ToggleChanged:",l),n.value.accountState=l},M=l=>{console.log("SelectChanged:",l),n.value.role.value=l;const p=k.value.find(d=>d.value===l);p?n.value.role.label=p.label:console.log("沒有找到對應的選項")},h=Ae(),{pageSet:o,totalPages:i}=z(h),v=()=>{const l=o.value.currentPage-1;o.value.currentPage=l,o.value.totalElements=a.value.length},_=()=>{const l=o.value.currentPage+1;o.value.currentPage=l,o.value.totalElements=a.value.length},u=l=>{l!==o.value.currentPage&&(o.value.currentPage=l,o.value.totalElements=a.value.length)},b=l=>{const p=document.getElementById(l);if(p)return!!p.disabled};ae(()=>{h.$reset()});function F(l){const p=a.value.findIndex(d=>d.serialNumber===l);console.log(p),p!==-1&&a.value.splice(p,1)}function G(){g.value=A.CREATE,r.$reset(),f.value=!0}function R(l){g.value=A.UPDATE,x.value=l;const p=a.value.find(d=>d.serialNumber===l);if(p){const d=JSON.parse(JSON.stringify(p));n.value=d}else console.log("沒有找到對應的資料");f.value=!0}function j(){r.$reset(),f.value=!1}const H=async()=>{if(g.value===A.CREATE){console.log("新增成功!");const l=n.value.employeeID,p=n.value.department,d=n.value.name,B=n.value.role,K=n.value.accountState,de=n.value.sectionManagerEmail,ce=n.value.departmentManagerEmail,Q={serialNumber:(()=>{const V=new Date;return`${V.getFullYear()}${String(V.getMonth()+1).padStart(2,"0")}${String(V.getDate()).padStart(2,"0")}${String(V.getHours()).padStart(2,"0")}${String(V.getMinutes()).padStart(2,"0")}${String(V.getSeconds()).padStart(2,"0")}`})(),employeeID:l,department:p,name:d,role:B,accountState:K,sectionManagerEmail:de,departmentManagerEmail:ce};console.log(Q),a.value.push(Q),f.value=!1}else if(g.value===A.UPDATE){console.log("編輯成功!");const l=a.value.findIndex(p=>p.serialNumber===x.value);l!==-1?(a.value[l]=n.value,console.log(a.value[l])):console.log("沒有找到對應的資料"),f.value=!1}};return(l,p)=>(S(),E("div",gt,[e("div",ht,[e("div",ft,[s(Pe,{breadcrumb:w})]),e("div",bt,[St,e("div",yt,[wt,s(P,{onClick:G},{default:m(()=>[Mt,N(" 新增帳號 ")]),_:1})]),e("div",Et,[$t,e("div",kt,[e("table",xt,[(S(!0),E(J,null,ee(t(a),(d,B)=>(S(),E("tr",{key:B,class:"query-result"},[e("td",Ct,T(d.serialNumber),1),e("td",Dt,T(d.employeeID),1),e("td",Nt,[e("div",It,T(d.name),1)]),e("td",Vt,[e("div",Tt,T(d.role.label),1)]),e("td",At,[e("div",Pt,[e("div",Lt,[e("img",{src:d.accountState?"images/icons/icon_check.png":"images/icons/icon_alert_grey.png",class:"inline-block",alt:"State Image"},null,8,Bt),N(" "+T(d.accountState?"啟用":"未啟用"),1)])])]),e("td",Ut,[s(P,{class:"edit-button",onClick:K=>R(d.serialNumber)},{default:m(()=>[Ot,N(" 編輯 ")]),_:2},1032,["onClick"]),s(P,{class:"delete-button",onClick:K=>F(d.serialNumber)},{default:m(()=>[qt,N(" 刪除 ")]),_:2},1032,["onClick"])])]))),128))])]),e("div",Ft,[e("button",{disabled:t(o).currentPage===1,onClick:v},[(S(),E("svg",Rt,[e("path",{class:$({"disabled-btn":b("pre-btn")}),d:"M6.16602 1.33301L1.49935 5.99967L6.16602 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Gt),(S(!0),E(J,null,ee(t(i),d=>(S(),E("button",{key:d,class:$(d===t(o).currentPage?"chosenPageBtn":"unchosenPageBtn"),onClick:B=>u(d)},T(d),11,jt))),128)),e("button",{disabled:t(o).currentPage===t(i),onClick:_},[(S(),E("svg",Kt,[e("path",{class:$({"disabled-btn":b("next-btn")}),d:"M1.5 1.33301L6.16667 5.99967L1.5 10.6663",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],8,Ht)])])]),f.value?(S(),le(vt,{key:0,class:"nsl-form","init-values":t(n),options:t(k),onClose:j,onOnSubmit:H,"onUpdate:toggleChange":I,"onUpdate:selectChange":M},null,8,["init-values","options"])):be("",!0)])]))}});const sa=ne(Wt,[["__scopeId","data-v-d0ba7c85"]]);export{sa as default};
