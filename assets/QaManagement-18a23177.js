import{d as oe,J as R,r as D,y as $,ac as ie,g as ne,a5 as M,o as h,c as p,a as e,b as u,u as o,h as d,t as v,w as m,i as I,p as Q,k as x,n as q,F as ce,j as de,e as j,v as V,s as re,x as ue,_ as he}from"./index-72eb97a3.js";import{_ as me}from"./icon_note-96b9c260.js";import{u as _e,D as pe,_ as ve,a as xe,b as fe,c as O,d as ge}from"./DraggableTable-0b47e865.js";import{_ as ke}from"./icon_search_white-67c4c154.js";import{_ as z}from"./icon_outcome-1d2e6907.js";import{u as be,Q as we}from"./QAForm-ae38a256.js";import{I as C}from"./createPageStore-5e2e62fe.js";import{_ as N}from"./InputDate.vue_vue_type_style_index_0_lang-16a23bdb.js";import{N as y}from"./Checkbox-6f1f35a8.js";import{T as Ce}from"./Table-f729a9ac.js";import{D as ye}from"./vuedraggable.umd-ebc13d4f.js";import"./icon_upload-consent-letter-8322da82.js";import"./FormTitle.vue_vue_type_script_setup_true_lang-3ddf6d71.js";/* empty css                                                               */import"./vue.runtime.esm-bundler-cfc562c2.js";const i=S=>(re("data-v-9e89931b"),S=S(),ue(),S),Se={class:"text-neutral-800"},Te=i(()=>e("div",{class:"max-w-[1315px] mx-auto mb-12"},[e("h1",{class:"text-[32px]"}," Q&A管理 ")],-1)),De={class:"max-w-[1315px] mx-auto mb-8"},Ie={class:"search mb-10"},Ae=i(()=>e("h2",{class:"flex items-center mb-6 font-semibold"},[e("img",{class:"mr-2",src:me,alt:"Search Page"}),d(" 搜尋網頁 ")],-1)),Qe={class:"rounded-[16px] overflow-hidden border border-[#B9B9B9]"},Ee=i(()=>e("h3",{class:"text-sm font-bold text-primary-600 bg-[#E6EDF3] py-4 px-6 border border-b-[#80B7DE]"}," 請輸入搜尋條件(擇一) ",-1)),Be={class:"bg-white flex flex-col max-[1065px]:flex-row px-[24px] pb-[20px] pt-[120px]"},Fe={class:"flex flex-col absolute top-[270px]"},Re=i(()=>e("label",{class:"mb-[10px]"}," 發佈時間 ",-1)),$e={class:"flex"},Me=i(()=>e("div",{class:"flex items-center justify-center px-[10px] ml-[55px]"}," - ",-1)),qe={class:"flex items-center max-[1065px]:flex-col max-[1065px]:items-start"},je=i(()=>e("p",{class:"flex items-center mr-4 max-[1065px]:mb-[5px] max-[1065px]:mt-[3px]"},[e("img",{class:"mr-2",src:ve,alt:"Status"}),d(" 狀態 ")],-1)),Ve={class:"flex max-[1065px]:flex-col max-[1065px]:mb-[20px] max-[1065px]:gap-1"},Ne={class:"ml-1 mr-5 max-[1065px]:ml-0"},Oe={for:"published",class:"flex items-center"},ze={class:"mr-5"},Ue={for:"pending",class:"flex items-center"},He={class:"mr-5"},Le={class:"flex items-center"},Pe={class:"mr-5"},We={class:"flex items-center"},Ge={class:"flex items-center"},Je={class:"ml-auto flex gap-3"},Ke=i(()=>e("img",{class:"mr-4",src:ke,alt:"Search"},null,-1)),Xe={class:"search mb-10"},Ye={class:"search-outcome flex items-center justify-between mb-8"},Ze=i(()=>e("h2",{class:"flex items-center font-semibold"},[e("img",{class:"mr-2",src:z,alt:"Query"}),d(" 查詢結果 ")],-1)),et=i(()=>e("img",{class:"mr-2",src:xe,alt:"Add"},null,-1)),tt=i(()=>e("caption",null,"QA Management Table",-1)),st=i(()=>e("th",{class:"flex ml-3 justify-start w-[35%]"}," Ｑ＆Ａ題目 ",-1)),at=i(()=>e("th",{class:"w-[12%]"}," 狀態 ",-1)),lt=i(()=>e("th",{class:"w-[15%]"}," 發佈時間 ",-1)),ot={key:0,class:"grow"},it={class:"w-[35%]","data-title":"Ｑ＆Ａ題目："},nt={class:"flex items-center pl-3 max-[1065px]:pl-3"},ct={class:"w-[12%]","data-title":"狀態："},dt={class:"flex items-center pl-3 max-[1065px]:pl-3"},rt={src:fe,alt:"Waiting For Release"},ut={src:O,alt:"Announcing"},ht={class:"ml-2"},mt={class:"w-[15%]","data-title":"發佈時間："},_t={class:"max-[1065px]:pl-3"},pt={class:"grid grid-cols-3 max-[1065px]:pl-3"},vt=["onClick"],xt=["onClick"],ft=["onClick"],gt=["onClick"],kt={key:0,class:"grow","data-title":"審核："},bt={class:"flex gap-[10px] justify-center"},wt=i(()=>e("div",{class:"search-outcome flex items-center justify-between mb-8"},[e("h2",{class:"flex items-center font-semibold"},[e("img",{class:"mr-2",src:z,alt:"Arrangement"}),d(" 排列順序 ")])],-1)),Ct=i(()=>e("th",{class:"w-[35%]"}," QA 題目 ",-1)),yt=i(()=>e("th",{class:"w-[12%]"}," 狀態 ",-1)),St=i(()=>e("th",{class:"w-[15%]"}," 發佈時間 ",-1)),Tt=i(()=>e("th",{class:"grow"}," 編號 ",-1)),Dt={class:"tr list-group-item text-center text-sm text-black"},It={class:"w-[35%] max-[1065px]:ml-7","data-title":"ＱＡ題目："},At={class:"flex items-center max-[1065px]:pl-3"},Qt=i(()=>e("img",{class:"mr-5 max-[1065px]:hidden",src:ge,alt:"Catch"},null,-1)),Et={class:"w-[12%] max-[1065px]:ml-7","data-title":"狀態："},Bt={class:"flex items-center pl-3 max-[1065px]:pl-3"},Ft=i(()=>e("img",{src:O,alt:"Check"},null,-1)),Rt={class:"ml-2"},$t={class:"w-[15%] max-[1065px]:ml-7","data-title":"發佈時間："},Mt={class:"max-[1065px]:pl-3"},qt={class:"max-[1065px]:ml-7","data-title":"操作："},jt={class:"max-[1065px]:pl-3"},Vt=oe({__name:"QaManagement",setup(S){const U=be(),{qaManagementInfo:f,filterQAManagementInfo:g,permissionStatus:_,filterSelectDate:n,checkBoxState:s,sortOrderData:H}=R(U),E=D(H.value);$(()=>({animation:0,group:"description",disabled:!1,ghostClass:"ghost"}));const A=D(""),T=D("backAdd"),k=D(!1),L=ie();$(()=>L.path);function P(){_.value==="review"?(s.value.discontinued.isChecked=!0,s.value.pending.isChecked=!0,s.value.published.isChecked=!0,s.value.reviewing.isChecked=!0,s.value.reviewFailed.isChecked=!0,_.value=""):(s.value.discontinued.isChecked=!1,s.value.pending.isChecked=!1,s.value.published.isChecked=!1,s.value.reviewing.isChecked=!0,s.value.reviewFailed.isChecked=!1,_.value="review")}ne(()=>{s.value.discontinued.isChecked=!0,s.value.pending.isChecked=!0,s.value.published.isChecked=!0,s.value.reviewing.isChecked=!0,s.value.reviewFailed.isChecked=!0,g.value=f.value});const W=()=>{const l=Object.keys(s.value).some(r=>s.value[r].isChecked),a=n.value.searchStartTime!="",t=n.value.searchEndTime!="";if(l)l&&a&&t?g.value=f.value.filter(r=>{const c=new Date(r.publishStartAt),w=(!n.value.searchStartTime||c>=new Date(n.value.searchStartTime))&&(!n.value.searchEndTime||c<=new Date(n.value.searchEndTime));return Object.keys(s.value).some(le=>{const F=s.value[le];return F.isChecked&&r.status===F.value&&w})}):g.value=f.value.filter(r=>Object.keys(s.value).some(c=>{const w=s.value[c];return w.isChecked&&r.status===w.value}));else if(a&&t)g.value=f.value.filter(r=>{const c=new Date(r.publishStartAt);return(!n.value.searchStartTime||c>=new Date(n.value.searchStartTime))&&(!n.value.searchEndTime||c<=new Date(n.value.searchEndTime))});else if(a||t)alert("請選擇發佈起始時間和截止時間");else return g.value=[]},G=l=>{console.log("startReleaseDate:"),console.log(l);const a=new Date(l);a.setHours(0,0,0,0);const t=a.toISOString().split("T")[0];n.value.searchStartTime=t,console.log(n.value.searchStartTime)},J=l=>{console.log("endReleaseDate:"),console.log(l);const a=new Date(l);a.setHours(23,59,59,999);const t=a.toISOString().split("T")[0];n.value.searchEndTime=t,console.log(n.value.searchEndTime)},b=l=>{s.value[l].isChecked=!s.value[l].isChecked};function K(){T.value="backAdd",k.value=!0}function X(l){const a=f.value.findIndex(t=>t.qaId===l);console.log(a),a!==-1&&f.value.splice(a,1)}function Y(l){T.value="backQuery",A.value=l,k.value=!0}function Z(l){T.value="backEdit",A.value=l,k.value=!0}function ee(l){l.status=C.Suspended}function te(){k.value=!1}function B(l,a){l.status=a}const se=_e(),{breadcrumbs:ae}=R(se);return ae.value=[{title:"資料",path:M.DATA_MAINTENANCE},{title:"QA",path:M.Q_A}],(l,a)=>(h(),p("section",Se,[Te,e("div",De,[e("div",Ie,[Ae,e("div",Qe,[Ee,e("div",Be,[e("div",Fe,[Re,e("div",$e,[u(N,{placeholder:"請選擇日期",class:"date-picker-input","onUpdate:modelValue":G}),Me,u(N,{placeholder:"請選擇日期",class:"date-picker-input","onUpdate:modelValue":J})])]),e("div",qe,[je,e("ul",Ve,[e("li",Ne,[e("label",Oe,[u(y,{id:"published",name:"state","model-value":o(s).published.isChecked,"is-checked":o(s).published.isChecked,onChange:a[0]||(a[0]=t=>b("published"))},null,8,["model-value","is-checked"]),d(" 發佈中 ")])]),e("li",ze,[e("label",Ue,[u(y,{id:"pending",name:"state","model-value":o(s).pending.isChecked,"is-checked":o(s).pending.isChecked,onChange:a[1]||(a[1]=t=>b("pending"))},null,8,["model-value","is-checked"]),d(" 等待發佈 ")])]),e("li",He,[e("label",Le,[u(y,{id:"discontinued",name:"state","model-value":o(s).discontinued.isChecked,"is-checked":o(s).discontinued.isChecked,onChange:a[2]||(a[2]=t=>b("discontinued"))},null,8,["model-value","is-checked"]),d(" 下架 ")])]),e("li",Pe,[e("label",We,[u(y,{id:"4",name:"reviewing","model-value":o(s).reviewing.isChecked,"is-checked":o(s).reviewing.isChecked,onChange:a[3]||(a[3]=t=>b("reviewing"))},null,8,["model-value","is-checked"]),d(" 審核中 ")])]),e("li",null,[e("label",Ge,[u(y,{id:"reviewFailed",name:"state","model-value":o(s).reviewFailed.isChecked,"is-checked":o(s).reviewFailed.isChecked,onChange:a[4]||(a[4]=t=>b("reviewFailed"))},null,8,["model-value","is-checked"]),d(" 審核失敗 ")])])]),e("div",Je,[e("button",{class:"bg-danger hover:bg-[#ba3e3e] text-[white] px-4 p-2 rounded-md ml-3 max-[1065px]:ml-0 text-sm",onClick:P},v(o(_)==="review"?"長官身份: 切換完請按搜尋":"員工身份: 切換完請按搜尋"),1),u(I,{class:"flex items-center justify-center font-semibold text-base pe-2",size:"custom",width:130,height:40,onClick:W},{default:m(()=>[Ke,d(" 搜尋 ")]),_:1})])])])])]),e("div",Xe,[e("div",Ye,[Ze,u(I,{class:"flex items-center justify-center font-semibold text-base",size:"custom",width:140,height:40,onClick:K},{default:m(()=>[et,d(" 新增ＱＡ ")]),_:1})]),u(Ce,null,{th:m(()=>[st,at,lt,e("th",{class:q(o(_)==="review"?"w-[18%]":"grow")}," 操作 ",2),o(_)==="review"?(h(),p("th",ot," 審核 ")):x("",!0)]),tobodyTr:m(()=>[(h(!0),p(ce,null,de(o(g),(t,r)=>(h(),p("tr",{key:r,class:"text-center text-sm text-black"},[e("td",it,[e("div",nt,[e("span",null,v(t.qaTitle),1)])]),e("td",ct,[e("div",dt,[j(e("img",rt,null,512),[[V,t.status!=="發佈中"&&t.status!=="等待發佈"]]),j(e("img",ut,null,512),[[V,t.status==="發佈中"||t.status==="等待發佈"]]),e("span",ht,v(t.status),1)])]),e("td",mt,[e("span",_t,v(t.publishStartAt),1)]),e("td",{class:q(o(_)==="review"?"w-[18%]":"grow"),"data-title":"操作："},[e("div",pt,[e("a",{class:"text-[#1170C0] underline cursor-pointer",onClick:c=>Y(t.qaId)}," 查看內容 ",8,vt),t.status==="下架"||t.status==="審核失敗"||t.status==="審核中"||t.status==="等待發佈"?(h(),p("a",{key:0,class:"text-[#1170C0] underline cursor-pointer",onClick:c=>Z(t.qaId)}," 編輯 ",8,xt)):x("",!0),t.status==="發佈中"?(h(),p("a",{key:1,class:"text-[#1170C0] underline cursor-pointer",onClick:c=>ee(t)}," 下架 ",8,ft)):x("",!0),t.status!=="發佈中"&&t.status!=="等待發佈"&&t.status!=="審核中"?(h(),p("a",{key:2,class:"text-[#1170C0] underline cursor-pointer",onClick:c=>X(t.qaId)}," 刪除 ",8,gt)):x("",!0)])],2),o(_)==="review"?(h(),p("td",kt,[e("div",bt,[t.status===o(C).InReview?(h(),Q(I,{key:0,size:"custom",width:70,height:40,onClick:c=>B(t,o(C).Published)},{default:m(()=>[d(" 通過 ")]),_:2},1032,["onClick"])):x("",!0),t.status===o(C).InReview?(h(),Q(I,{key:1,class:"deny-button text-white font-bold py-2 px-4 rounded",size:"custom",width:70,height:40,onClick:c=>B(t,o(C).Failure)},{default:m(()=>[d(" 駁回 ")]),_:2},1032,["onClick"])):x("",!0)])])):x("",!0)]))),128))]),default:m(()=>[tt]),_:1})]),e("div",null,[wt,u(pe,null,{th:m(()=>[Ct,yt,St,Tt]),tobodyTr:m(()=>[u(o(ye),{modelValue:E.value,"onUpdate:modelValue":a[5]||(a[5]=t=>E.value=t),group:"sortOrderDataDisplay","drag-class":"drag","ghost-class":"ghost","item-key":"id",tag:"tbody","component-data":{tag:"tr",name:"flip-list",type:"transition"}},{item:m(({element:t,index:r})=>[e("tr",Dt,[e("td",It,[e("div",At,[Qt,e("span",null,v(t.qaTitle),1)])]),e("td",Et,[e("div",Bt,[Ft,e("span",Rt,v(t.status),1)])]),e("td",$t,[e("div",Mt,v(t.publishStartAt),1)]),e("td",qt,[e("div",jt,v(r+1)+". ",1)])])]),_:1},8,["modelValue"])]),_:1})]),k.value?(h(),Q(we,{key:0,"qa-type":T.value,"edit-id":A.value,onClose:te},null,8,["qa-type","edit-id"])):x("",!0)])]))}});const ts=he(Vt,[["__scopeId","data-v-9e89931b"]]);export{ts as default};
