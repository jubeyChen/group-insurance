import{_ as Z}from"./icon_note-96b9c260.js";import{_ as ee}from"./icon_search_white-67c4c154.js";import{_ as te}from"./icon_outcome-1d2e6907.js";import{a0 as se,r as N,d as O,J as H,L as W,C as ae,o as r,c as d,b as s,w as m,a as e,u as l,O as J,F as M,j as K,t as k,i as $,h as f,k as h,n as Q,a3 as le,a4 as oe,a5 as Y,a6 as ne,a2 as S,l as q,Q as z,m as B,s as ie,x as re,_ as de}from"./index-ee8c1cae.js";import{N as P}from"./Checkbox-52823328.js";import{_ as F}from"./InputDate.vue_vue_type_style_index_0_lang-c53f4462.js";import{P as i}from"./searchOutcomeStatus.enum-b4d2c749.js";import{N as ue}from"./Breadcrumbs-7d021867.js";import{_ as ce,h as G}from"./moment-80943d60.js";import{E as pe}from"./ExpansionPanel-4420d156.js";const X=se("searchPage",()=>{const I=N({policySerno:"",policyNum:"",customerName:"",publishStartAt:"",publishEndAt:"",status:[]}),V=N([{id:"1",policySerno:"20230116",policyNum:"20230116170505",customerName:"台積電",publishStartAt:"2023/11/11",publishEndAt:"2025/11/11",status:i.Published},{id:"2",policySerno:"20230120",policyNum:"20230116170505",customerName:"宏達電",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.Awaiting},{id:"3",policySerno:"20230120",policyNum:"20230116170505",customerName:"合作金庫",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.InReview2},{id:"4",policySerno:"20230120",policyNum:"20230116170505",customerName:"第一銀行",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.InReview1},{id:"5",policySerno:"20230120",policyNum:"20230116170505",customerName:"台新銀行",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.InApproval},{id:"6",policySerno:"20230120",policyNum:"20230116170505",customerName:"鴻海",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.Editing},{id:"7",policySerno:"20230120",policyNum:"20230116170505",customerName:"永豐",publishStartAt:"2023/10/11",publishEndAt:"2025/12/11",status:i.Suspended}]),v=N({districtAdminApprovalLetter:"",managerApprovalLetter:"",departmentApprovalLetter:""});return{pageInfo:I,searchOutcome:V,uploadApprovalValue:v}}),me={class:"min-h-[75vh] upload-approval"},_e=e("div",{class:"query-area"},[e("h2",{class:"query-title-text"}," 上傳文件 ")],-1),ve={class:"mb-4 text-primary-600 text-[22px]"},he={class:"border border-dashed border-black/30 rounded-md p-10 flex flex-col items-center justify-center"},be=e("img",{src:ce,alt:"icon",class:"mb-2"},null,-1),fe=e("p",{class:"text-sm text-black/50 mb-4"}," 限上傳PNG檔或JPG檔 ",-1),xe=["id"],ge={key:0,class:"flex items-center"},ye={class:"inline-block w-[110px] truncate"},we=["onClick"],Ae={class:"flex justify-center"},Se=O({__name:"UploadApproval",emits:["back"],setup(I,{emit:V}){const v=X(),{uploadApprovalValue:C}=H(v),E=N(!0),b=N([{id:"admin",name:"地區行政覆核同意信函",uploadData:void 0,uploadDataName:""},{id:"manager",name:"業務管理處主管同意信函",uploadData:void 0,uploadDataName:""},{id:"department",name:"報價處主管同意信函",uploadData:void 0,uploadDataName:""}]),R=W({});ae(b.value,()=>{console.log(b.value);const u=b.value.filter(n=>n.uploadData!==void 0).length;console.log(u),u>=3?E.value=!1:E.value=!0});function L(u){return b.value.findIndex(n=>n.id===u)}function D(u){const n=document.getElementById(`upload-area-${u}`),o=document.getElementById(`upload-input-${u}`);o==null||o.remove();const _=document.createElement("input");n==null||n.appendChild(_),_.id=`upload-input-${u}`,_.style.display="none",_.type="file",_.accept="image/png,image/jpeg",_.addEventListener("change",w=>{U(w,u)}),_.click()}function U(u,n){const o=u.target.files[0],_=b.value[L(n)],w=document.getElementById(`upload-input-${n}`);switch(_.uploadData=o,_.uploadDataName=o.name,n){case"admin":C.value.districtAdminApprovalLetter=o;break;case"manager":C.value.managerApprovalLetter=o;break;case"department":C.value.departmentApprovalLetter=o;break}w==null||w.remove()}function g(u){const n=document.getElementById(`upload-input-${u}`);n==null||n.remove();const o=b.value[L(u)];o.uploadData=void 0,o.uploadDataName=""}function y(u){console.log(u)}return(u,n)=>(r(),d("div",me,[_e,s(pe,{title:"需繳交同意信函","img-src":"/images/icons/icon_consent.png",style:{margin:0,"max-width":"100%"}},{default:m(()=>[s(l(J),{"validation-schema":l(R),"initial-values":l(C),onSubmit:n[1]||(n[1]=o=>y(l(C)))},{default:m(()=>[(r(!0),d(M,null,K(b.value,(o,_)=>(r(),d("div",{key:_,class:"mb-6 w-full"},[e("h2",ve,k(o.name),1),e("div",he,[be,fe,s($,{size:"m",class:"mb-4",disabled:o.uploadDataName!=="",onClick:w=>D(o.id)},{default:m(()=>[f(k(o.uploadDataName!==""?"已上傳":"上傳檔案"),1)]),_:2},1032,["disabled","onClick"]),e("div",{id:"upload-area-"+o.id,class:"min-h-[24px]"},[o.uploadDataName!==""?(r(),d("div",ge,[e("span",ye,k(o.uploadDataName),1),e("span",{class:"cursor-pointer flex items-center justify-center rounded-full bg-primary-400 text-xs text-white hover:bg-primary-600 min-h-[18px] min-w-[18px]",onClick:w=>g(o.id)},"✕",8,we)])):h("",!0)],8,xe)])]))),128)),e("div",Ae,[s($,{size:"l",outline:!0,class:"mr-4",onClick:n[0]||(n[0]=o=>V("back",!1))},{default:m(()=>[f(" 返回 ")]),_:1}),s($,{size:"l",type:"submit",disabled:E.value,class:Q({"cursor-not-allowed":E.value})},{default:m(()=>[f(" 送審 ")]),_:1},8,["disabled","class"])])]),_:1},8,["validation-schema","initial-values"])]),_:1},8,["img-src"])]))}}),c=I=>(ie("data-v-d404b0b2"),I=I(),re(),I),ke={key:0,class:"query-view"},Ee={class:"query-container"},Ne={class:"breadcrumb-area"},Ie={key:0},Ce={class:"query-area"},Pe=c(()=>e("h2",{class:"query-title-text"}," 創建網頁 ",-1)),$e={class:"query-title"},Re=c(()=>e("span",{class:"title-img"},[e("img",{src:Z,alt:""}),f(" 搜尋網頁 ")],-1)),De=c(()=>e("span",{class:"text-xl mr-2 mb-[2px]"},"+",-1)),Ve={class:"query-table"},qe=c(()=>e("div",{class:"query-header"}," 請輸入搜尋條件(擇一) ",-1)),Be={class:"query-body"},Le={class:"flex justify-between items-end max-[1010px]:flex-col max-[1010px]:items-start"},Ue={class:"grid grid-cols-2 w-[80%] gap-y-8 gap-x-12 max-[1010px]:grid-cols-1"},je=c(()=>e("label",null,"保戶編號",-1)),Te=c(()=>e("label",null,"保單號碼",-1)),ze=c(()=>e("label",null,"客戶名稱",-1)),Me=c(()=>e("label",{class:"mb-1 block"},"發佈時間",-1)),Ye={class:"date-containter"},Fe={class:"mr-[52px] max-[510px]:mr-0"},Ge=c(()=>e("span",{class:"mx-2"},"-",-1)),Oe={class:"mt-8 flex max-[875px]:grid max-[875px]:grid-cols-4 gap-y-4 max-[510px]:grid-cols-3"},He={class:"flex items-center mr-4"},We=c(()=>e("label",{for:"Published",class:"cursor-pointer"},"發佈中",-1)),Je={class:"flex items-center mr-4"},Ke=c(()=>e("label",{for:"Awaiting",class:"cursor-pointer"},"等待發佈",-1)),Qe={class:"flex items-center mr-4"},Xe=c(()=>e("label",{for:"InReview2",class:"cursor-pointer"},"科主管審核完成",-1)),Ze={class:"flex items-center mr-4"},et=c(()=>e("label",{for:"InReview1",class:"cursor-pointer"},"審核中",-1)),tt={class:"flex items-center mr-4"},st=c(()=>e("label",{for:"InApproval",class:"cursor-pointer"},"尚未上傳同意信函",-1)),at={class:"flex items-center mr-4"},lt=c(()=>e("label",{for:"Editing",class:"cursor-pointer"},"編輯中",-1)),ot={class:"flex items-center mr-4"},nt=c(()=>e("label",{for:"Suspended",class:"cursor-pointer"},"下架",-1)),it={class:"ml-4 max-[1010px]:self-end max-[1010px]:m-0 max-[1010px]:mt-6"},rt=c(()=>e("img",{src:ee,alt:"icon-search",class:"mr-4"},null,-1)),dt=c(()=>e("div",{class:"query-title"},[e("span",{class:"title-img"},[e("img",{src:te,alt:""}),f(" 搜尋結果 ")])],-1)),ut={class:"query-table"},ct={class:"query-header query-result-header"},pt={class:"w-[98%] mx-auto flex text-center"},mt=ne('<span class="w-[10%]" data-v-d404b0b2>保戶編號</span><span class="w-[13%]" data-v-d404b0b2>保單號碼</span><span class="w-[10%]" data-v-d404b0b2>客戶名稱</span><span class="w-[13%]" data-v-d404b0b2>網頁狀態</span><span class="w-[10%]" data-v-d404b0b2>上架時間</span><span class="w-[10%]" data-v-d404b0b2>下架時間</span><span class="grow" data-v-d404b0b2>操作</span>',7),_t={key:0,class:"w-[14%]"},vt={class:"query-body"},ht={class:"w-[98%] mx-auto","aria-hidden":"true"},bt={class:"w-[10%]","data-title":"保戶編號："},ft={class:"w-[13%]","data-title":"保單編號："},xt={class:"w-[10%]","data-title":"客戶名稱："},gt={class:"w-[13%] status","data-title":"網頁狀態："},yt=["src"],wt={class:"w-[10%]","data-title":"上架時間："},At={class:"w-[10%]","data-title":"下架時間："},St={class:"grow max-[1065px]:flex","data-title":"操作："},kt={key:0,class:"underline cursor-pointer text-[#1170C0]"},Et={key:1,class:"underline cursor-pointer text-[#1170C0]"},Nt=c(()=>e("span",{class:"underline cursor-pointer text-[#1170C0]"},"複製",-1)),It={key:2,class:"underline cursor-pointer text-[#1170C0]"},Ct={key:4,class:"underline cursor-pointer text-[#1170C0]"},Pt={key:5,class:"underline cursor-pointer text-[#1170C0]"},$t={key:6,class:"underline cursor-pointer text-[#1170C0]"},Rt={key:0,class:"w-[14%] flex","data-title":"審核："},Dt={key:0,class:"flex items-center"},Vt={key:1},qt=O({__name:"CreateView",setup(I){const V=X(),{pageInfo:v,searchOutcome:C}=H(V),E=le(),b=N(),R=N(!1),L=W({}),D=N("區主管");function U(p,a){switch(a){case"publishStartAt":v.value.publishStartAt=G(p).format("YYYY/MM/DD");break;case"publishEndAt":v.value.publishEndAt=G(p).format("YYYY/MM/DD");break}}function g(p){return v.value.status.some(a=>a===p)}function y(p,a){if(p)v.value.status.push(a);else{const j=v.value.status.findIndex(T=>T===a);v.value.status.splice(j,1)}}function u(p){return p===i.Published||p===i.Awaiting}function n(p){switch(D.value){case"科主管":return p===i.InReview1;case"區主管":return p===i.InReview1||p===i.InReview2;default:return!1}}function o(){E.currentRoute.value.path===S.NEW_PAGE?b.value=[{title:"首頁",path:S.BACKHOME},{title:"創建網頁",path:S.CREATE},{title:"新增網頁",path:S.NEW_PAGE}]:b.value=[{title:"首頁",path:S.BACKHOME},{title:"創建網頁",path:S.CREATE}]}function _(){window.scrollTo({top:0,behavior:"smooth"})}function w(p){console.log(p)}return oe(()=>{o()}),E.afterEach(o),(p,a)=>{const j=Y("router-link"),T=Y("router-view");return r(),d(M,null,[l(E).currentRoute.value.path===l(S).CREATE?(r(),d("div",ke,[e("div",Ee,[e("div",Ne,[s(ue,{breadcrumb:b.value},null,8,["breadcrumb"])]),R.value?h("",!0):(r(),d("div",Ie,[e("div",Ce,[Pe,e("div",$e,[Re,s($,{size:"custom",width:130,height:40},{default:m(()=>[s(j,{to:l(S).NEW_PAGE,class:"flex items-center justify-center text-white"},{default:m(()=>[De,f(" 新增網頁 ")]),_:1},8,["to"])]),_:1})]),e("div",Ve,[qe,e("div",Be,[s(l(J),{"validation-schema":l(L),"initial-values":l(v),onSubmit:a[9]||(a[9]=t=>w(t))},{default:m(()=>[e("div",Le,[e("div",null,[e("div",Ue,[e("div",null,[je,s(l(q),{name:"policySerno"},{default:m(({field:t,value:x,errorMessage:A})=>[s(z,B(t,{placeholder:"請輸入保戶編號","model-value":l(v).policySerno=x,"error-message":A}),null,16,["model-value","error-message"])]),_:1})]),e("div",null,[Te,s(l(q),{name:"policyNum"},{default:m(({field:t,value:x,errorMessage:A})=>[s(z,B(t,{placeholder:"請輸入保單編號","model-value":l(v).policyNum=x,"error-message":A}),null,16,["model-value","error-message"])]),_:1})]),e("div",null,[ze,s(l(q),{name:"customerName"},{default:m(({field:t,value:x,errorMessage:A})=>[s(z,B(t,{placeholder:"請輸入客戶名稱","model-value":l(v).customerName=x,"error-message":A}),null,16,["model-value","error-message"])]),_:1})]),e("div",null,[Me,e("div",Ye,[e("div",Fe,[s(l(q),{name:"publishStartAt"},{default:m(({field:t,errorMessage:x})=>[s(F,B(t,{placeholder:"請選擇日期","error-message":x,class:"date-picker-input","onUpdate:modelValue":a[0]||(a[0]=A=>U(A,"publishStartAt"))}),null,16,["error-message"])]),_:1})]),Ge,s(l(q),{name:"publishEndAt"},{default:m(({field:t,errorMessage:x})=>[s(F,B(t,{placeholder:"請選擇日期","error-message":x,class:"date-picker-input","onUpdate:modelValue":a[1]||(a[1]=A=>U(A,"publishEndAt"))}),null,16,["error-message"])]),_:1})])])]),e("div",Oe,[e("div",He,[s(P,{id:"Published",name:"Published","model-value":g("Published"),"onUpdate:modelValue":a[2]||(a[2]=t=>y(t,"Published"))},null,8,["model-value"]),We]),e("div",Je,[s(P,{id:"Awaiting",name:"Awaiting","model-value":g("Awaiting"),"onUpdate:modelValue":a[3]||(a[3]=t=>y(t,"Awaiting"))},null,8,["model-value"]),Ke]),e("div",Qe,[s(P,{id:"InReview2",name:"InReview2","model-value":g("InReview2"),"onUpdate:modelValue":a[4]||(a[4]=t=>y(t,"InReview2"))},null,8,["model-value"]),Xe]),e("div",Ze,[s(P,{id:"InReview1",name:"InReview1","model-value":g("InReview1"),"onUpdate:modelValue":a[5]||(a[5]=t=>y(t,"InReview1"))},null,8,["model-value"]),et]),e("div",tt,[s(P,{id:"InApproval",name:"InApproval","model-value":g("InApproval"),"onUpdate:modelValue":a[6]||(a[6]=t=>y(t,"InApproval"))},null,8,["model-value"]),st]),e("div",at,[s(P,{id:"Editing",name:"Editing","model-value":g("Editing"),"onUpdate:modelValue":a[7]||(a[7]=t=>y(t,"Editing"))},null,8,["model-value"]),lt]),e("div",ot,[s(P,{id:"Suspended",name:"Suspended","model-value":g("Suspended"),"onUpdate:modelValue":a[8]||(a[8]=t=>y(t,"Suspended"))},null,8,["model-value"]),nt])])]),e("div",it,[s($,{class:"flex items-center justify-center",size:"custom",width:130,height:40,type:"submit"},{default:m(()=>[rt,f(" 搜尋 ")]),_:1})])])]),_:1},8,["validation-schema","initial-values"])])])]),dt,e("div",ut,[e("div",ct,[e("div",pt,[mt,D.value!==""?(r(),d("span",_t,"審核")):h("",!0)])]),e("div",vt,[e("table",ht,[e("tbody",null,[(r(!0),d(M,null,K(l(C),t=>(r(),d("tr",{key:t.id,class:"query-result"},[e("td",bt,k(t.policySerno),1),e("td",ft,k(t.policyNum),1),e("td",xt,k(t.customerName),1),e("td",gt,[e("img",{src:u(t.status)?"images/icons/icon_check.png":"images/icons/icon_alert_grey.png",alt:"icon",class:"mr-1"},null,8,yt),f(" "+k(t.status),1)]),e("td",wt,k(t.publishStartAt),1),e("td",At,k(t.publishEndAt),1),e("td",St,[e("div",{class:Q(["grid max-[1065px]:w-[180px] max-[420px]:w-[150px]",D.value===""?"grid-cols-5 max-[420px]:grid-cols-2 max-[420px]:gap-y-2":"grid-cols-3 gap-y-2"])},[t.status!==l(i).Editing?(r(),d("span",kt,[s(j,{to:l(S).HOME,class:"flex items-center justify-center max-[1065px]:justify-start",onClick:_},{default:m(()=>[f("前台 ")]),_:1},8,["to"])])):h("",!0),t.status!==l(i).Editing?(r(),d("span",Et,"後台")):h("",!0),Nt,t.status===l(i).Published||t.status===l(i).Awaiting?(r(),d("span",It,"套印")):h("",!0),t.status===l(i).InApproval?(r(),d("span",{key:3,class:"underline cursor-pointer text-[#1170C0]",onClick:a[10]||(a[10]=x=>{R.value=!0,_()})},"上傳 ")):h("",!0),t.status===l(i).Editing||t.status===l(i).Suspended?(r(),d("span",Ct,"刪除")):h("",!0),t.status!==l(i).Published?(r(),d("span",Pt,"編輯")):h("",!0),t.status===l(i).Published?(r(),d("span",$t,"下架")):h("",!0)],2)]),D.value!==""?(r(),d("td",Rt,[n(t.status)?(r(),d("div",Dt,[s($,{size:"s",class:"mr-2"},{default:m(()=>[f(" 通過 ")]),_:1}),s($,{size:"s",class:"denyBtn"},{default:m(()=>[f(" 駁回 ")]),_:1})])):h("",!0)])):h("",!0)]))),128))])])])])])),R.value?(r(),d("div",Vt,[s(Se,{onBack:a[11]||(a[11]=t=>R.value=t)})])):h("",!0)])])):h("",!0),s(T)],64)}}});const Ot=de(qt,[["__scopeId","data-v-d404b0b2"]]);export{Ot as default};
